<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" guidelines golang">
<title>Go Azure SDK Design Guidelines | Azure SDKs</title>
<link rel="stylesheet" href="/azure-sdk/css/syntax.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/azure-sdk/css/modern-business.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/azure-sdk/css/boxshadowproperties.css" />
<link rel="stylesheet" href="/azure-sdk/css/theme-azure.css" />
<link rel="stylesheet" href="/azure-sdk/css/customstyles.css" />
<link rel="stylesheet" href="/azure-sdk/css/normalize.css">
<link rel="stylesheet" href="/azure-sdk/css/tipuesearch.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/azure-sdk/js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="/azure-sdk/js/toc.js"></script>
<script src="/azure-sdk/js/customscripts.js"></script>

<link rel="shortcut icon" href="/azure-sdk/images/azure-sdk-glyph.svg"/>
<link rel="alternate" type="application/rss+xml" title="Azure SDKs" href="/azure-sdk/feed.xml" />

    <script>
        $(document).ready(function () {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function () {
            $("#tg-sb-link").click(function () {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    
    <!-- Due to the page header height, all anchors uses top padding to offset the top possion and appear below the main header.
        If one requirement icon is just below another, the padding of the icon overlaps the one on top of it and block the clicking surface.
        The script below finds all requirements icons and adds z-index decrementally to place any previous icon on top of the next ones.
        The script runs after the page is completelly load (all content is downloaded).
      -->
    <script>
        $(window).bind("load", function () {
            let requeriments = $('.requirement');
            requeriments.each(function (index, element) {
                $(element).css("z-index", requeriments.length - index);
            });
        });
    </script>

</head>

<body>
    <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/azure-sdk/releases/latest/index.html"/>
                <span class="projectTitle"><img style="margin-top: -8px;" class="d-inline-block align-top" src="/azure-sdk/images/azure-sdk-glyph.svg" width="35" height="35" alt=""/> Azure SDKs</span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> -->
                <!-- entries without drop-downs appear here -->





                
                
                
                <li><a href="https://aka.ms/azsdk/blog" rel="noopener">Blog</a></li>
                
                
                
                <li><a href="/azure-sdk/releases/latest/">Releases</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guidelines<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/azure-sdk/general_introduction.html" rel="noopener">General Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/dotnet_introduction.html" rel="noopener">.NET Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/java_introduction.html" rel="noopener">Java Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/python_design.html" rel="noopener">Python Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/typescript_introduction.html" rel="noopener">TypeScript Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/android_design.html" rel="noopener">Android Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/ios_design.html" rel="noopener">iOS Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/clang_design.html" rel="noopener">C Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/cpp_introduction.html" rel="noopener">C++ Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/golang_introduction.html" rel="noopener">Go Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/policies_adoption.html" rel="noopener">GitHub Repos</a></li>
                        
                        <li><a href="/azure-sdk/policies_reviewprocess.html" rel="noopener">Policies</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API References<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        
                        <li><a href="https://aka.ms/net-docs" rel="noopener">.NET</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/java-docs" rel="noopener">Java</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/python-docs" rel="noopener">Python</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/js-docs" rel="noopener">TypeScript</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                
                
                <li>
                    
                        <a style="font-size: 1.666em !important" class="fa fa-github fa-2x" title="GitHub Link" href="https://github.com/azure/azure-sdk"></a>
                    
                </li>
                <li>
                    <a style="font-size: 1.666em !important" class="fa fa-twitter fa-2x" title="Twitter Link" href="https://twitter.com/AzureSDK"></a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

    <!-- Page Content -->
    <div class="container-fluid" style="margin-top: 60px; min-height: calc(100vh - 50px);">
        <div id="main">
            <!-- Content Row -->
            <div class="row">
                
                
                <!-- Sidebar Column -->
                <div class="col-md-2 col-xs-12" id="tg-sb-sidebar">
                    

<div id="mysidebar" class="nav">

  <script src="/azure-sdk/js/tipuesearch_content.js"></script>
  <script src="/azure-sdk/js/tipuesearch_set.js"></script>
  <script src="/azure-sdk/js/tipuesearch.min.js"></script>

<p>
<form action="/azure-sdk/search.html" >
    <div class=" tipue_search_left"><img src="/azure-sdk/images/search.png" alt="Search Icon" class="tipue_search_icon"></div>
    <input type="text" class="form-control tipue_search_right" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required placeholder="Search website">
</form>
</p>
<div style="clear: both;"></div>
  <ol>
    <li class="sidebarTitle"> </li>
    
      
        
        <li>
        
          
          <a title="General Guidelines" href="#">General Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/general_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="Terminology" href="/azure-sdk/general_terminology.html">Terminology</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/general_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/general_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/general_documentation.html">Documentation</a></li>
              
              
            
              
                <li><a title="Azure Core" href="/azure-sdk/general_azurecore.html">Azure Core</a></li>
              
              
            
              
                <li><a title="Contribution Guidelines" href="/azure-sdk/policies_opensource.html">Contribution Guidelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title=".NET Guidelines" href="#">.NET Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/dotnet_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/dotnet_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="Microsoft.Azure.Cosmos" href="https://docs.microsoft.com/dotnet/api/microsoft.azure.cosmos" target="_blank" rel="noopener">Microsoft.Azure.Cosmos</a></li>
                      
                    
                      
                        <li><a title="Azure.Messaging.EventHubs" href="https://azure.github.io/azure-sdk-for-net/eventhubs.html#azuremessagingeventhubs" target="_blank" rel="noopener">Azure.Messaging.EventHubs</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Keys" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultkeys" target="_blank" rel="noopener">Azure.Security.KeyVault.Keys</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Secrets" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultsecrets" target="_blank" rel="noopener">Azure.Security.KeyVault.Secrets</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Blobs" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestorageblobs" target="_blank" rel="noopener">Azure.Storage.Blobs</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Files.Shares" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragefilesshares" target="_blank" rel="noopener">Azure.Storage.Files.Shares</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Queues" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragequeues" target="_blank" rel="noopener">Azure.Storage.Queues</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Java Guidelines" href="#">Java Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/java_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/java_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Spring Guidelines" href="/azure-sdk/java_spring.html">Spring Guidelines</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-data-appconfiguration" href="https://azure.github.io/azure-sdk-for-java/appconfiguration.html#azure-data-appconfiguration" target="_blank" rel="noopener">azure-data-appconfiguration</a></li>
                      
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-java/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-messaging-eventhubs" href="https://azure.github.io/azure-sdk-for-java/eventhubs.html#azure-messaging-eventhubs" target="_blank" rel="noopener">azure-messaging-eventhubs</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Python Guidelines" href="#">Python Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/python_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/python_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/python_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-python/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-eventhub" href="https://azure.github.io/azure-sdk-for-python/eventhubs.html#azure-eventhub" target="_blank" rel="noopener">azure-eventhub</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="TypeScript Guidelines" href="#">TypeScript Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/typescript_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/typescript_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/typescript_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/typescript_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="@azure/cosmos" href="https://azure.github.io/azure-cosmos-js/" target="_blank" rel="noopener">@azure/cosmos</a></li>
                      
                    
                      
                        <li><a title="@azure/event-hubs" href="https://azure.github.io/azure-sdk-for-js/eventhubs.html#azure-event-hubs" target="_blank" rel="noopener">@azure/event-hubs</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-keys" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">@azure/keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-secrets" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">@azure/keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-blob" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-blob" target="_blank" rel="noopener">@azure/storage-blob</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-file-share" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-file-share" target="_blank" rel="noopener">@azure/storage-file-share</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-queue" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-queue" target="_blank" rel="noopener">@azure/storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Android Guidelines" href="#">Android Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/android_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/android_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="iOS Guidelines" href="#">iOS Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/ios_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/ios_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C Guidelines" href="#">C Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/clang_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/clang_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="az_iot" href="https://azuresdkdocs.blob.core.windows.net/$web/c/az_iot/latest/index.html" target="_blank" rel="noopener">az_iot</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C++ Guidelines" href="#">C++ Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/cpp_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/cpp_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-datalake" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-datalake" target="_blank" rel="noopener">azure-storage-file-datalake</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-shares" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Go Guidelines" href="#">Go Guidelines</a>
          
          <ul>
            
              
                <li class="active"><a title="Design" href="/azure-sdk/golang_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/golang_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="GitHub Repos" href="#">GitHub Repos</a>
          
          <ul>
            
              
                <li><a title="Guidelines Contributions" href="/azure-sdk/policies_adoption.html">Guidelines Contributions</a></li>
              
              
            
              
                <li><a title="Repository structure" href="/azure-sdk/policies_repostructure.html">Repository structure</a></li>
              
              
            
              
                <li><a title="Repository branching" href="/azure-sdk/policies_repobranching.html">Repository branching</a></li>
              
              
            
              
                <li><a title="Pipelines" href="/azure-sdk/policies_pipelines.html">Pipelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Policies" href="#">Policies</a>
          
          <ul>
            
              
                <li><a title="Review Process" href="/azure-sdk/policies_reviewprocess.html">Review Process</a></li>
              
              
            
              
                <li><a title="Releases" href="/azure-sdk/policies_releases.html">Releases</a></li>
              
              
            
              
                <li><a title="Release notes" href="/azure-sdk/policies_releasenotes.html">Release notes</a></li>
              
              
            
              
                <li><a title="Support" href="/azure-sdk/policies_support.html">Support</a></li>
              
              
            
          </ul>
        </li>
      
    
  </ol>
</div>

<script>$("li.active").parents('li').toggleClass("active");</script>

                </div>
                
                

                <!-- Content Column -->
                <div class="col-md-10 col-xs-12" id="tg-sb-content">
                    <div class="row">
    
    <div class="col-md-2 col-xs-12 content-right pull-right">
        
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 60);
  return false
})
  
});
</script>

<div id="toc"></div>

    </div>
    

    <div class="col-md-10  col-xs-12 content-center pull-left">
        <div class="post-header">
        <h1 class="post-title-main">Go Azure SDK Design Guidelines</h1>
        </div>
        
        
        
        <div class="post-content">
            
        
            
        
            <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>DRAFT:</b> The Go Language guidelines are in DRAFT status</div>

<h2 id="introduction">Introduction</h2>

<p>The Go guidelines are for the benefit of client library designers targeting service applications written in <a href="https://golang.org/">Go</a>.</p>

<h3 id="golang-principles">Design principles</h3>

<p>The Azure SDK should be designed to enhance the productivity of developers connecting to Azure services. Other qualities (such as completeness, extensibility, and performance) are important but secondary. Productivity is achieved by adhering to the principles described below:</p>

<p><strong>Idiomatic</strong></p>

<ul>
  <li>The SDK should follow the general design guidelines and conventions for the target language. It should feel natural to a developer in the target language.</li>
  <li>We embrace the ecosystem with its strengths and its flaws.</li>
  <li>We work with the ecosystem to improve it for all developers.</li>
</ul>

<p><strong>Consistent</strong></p>

<ul>
  <li>Client libraries should be consistent within the language, consistent with the service and consistent between all target languages. In cases of conflict, consistency within the language is the highest priority and consistency between all target languages is the lowest priority.</li>
  <li>Service-agnostic concepts such as logging, HTTP communication, and error handling should be consistent. The developer should not have to relearn service-agnostic concepts as they move between client libraries.</li>
  <li>Consistency of terminology between the client library and the service is a good thing that aids in diagnosability.</li>
  <li>All differences between the service and client library must have a good (articulated) reason for existing, rooted in idiomatic usage rather than whim.</li>
  <li>The Azure SDK for each target language feels like a single product developed by a single team.</li>
  <li>There should be feature parity across target languages. This is more important than feature parity with the service.</li>
</ul>

<p><strong>Approachable</strong></p>

<ul>
  <li>We are experts in the supported technologies so our customers, the developers, don’t have to be.</li>
  <li>Developers should find great documentation (hero tutorial, how to articles, samples, and API documentation) that makes it easy to be successful with the Azure service.</li>
  <li>Getting off the ground should be easy through the use of predictable defaults that implement best practices. Think about progressive concept disclosure.</li>
  <li>The SDK should be easily acquired through the most normal mechanisms in the target language and ecosystem.</li>
  <li>Developers can be overwhelmed when learning new service concepts. The core use cases should be discoverable.</li>
</ul>

<p><strong>Diagnosable</strong></p>

<ul>
  <li>The developer should be able to understand what is going on.</li>
  <li>It should be discoverable when and under what circumstances a network call is made.</li>
  <li>Defaults are discoverable and their intent is clear.</li>
  <li>Logging, tracing, and error handling are fundamental and should be thoughtful.</li>
  <li>Error messages should be concise, correlated with the service, actionable, and human readable. Ideally, the error message should lead the consumer to a useful action that they can take.</li>
  <li>Integrating with the preferred debugger for the target language should be easy.</li>
</ul>

<p><strong>Dependable</strong></p>

<ul>
  <li>Breaking changes are more harmful to a user’s experience than most new features and improvements are beneficial.</li>
  <li>Incompatibilities should never be introduced deliberately without thorough review and very strong justification.</li>
  <li>Do not rely on dependencies that can force our hand on compatibility.</li>
</ul>

<h3 id="golang-general">General Guidelines</h3>

<p><a href="#golang-general-follow-general-guidelines" name="golang-general-follow-general-guidelines" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow the <a href="/azure-sdk/general_introduction.html">General Azure SDK Guidelines</a>.</p>

<p><a href="#golang-general-use-azcore-pipeline" name="golang-general-use-azcore-pipeline" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">azcore.Pipeline</code> to implement all methods that call Azure REST services.</p>

<p><a href="#golang-general-idiomatic-code" name="golang-general-idiomatic-code" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  write idiomatic Go code.  If you’re not familiar with the language, a great place to start is https://golang.org/doc/effective_go.  Do <strong>NOT</strong> simply attempt to translate your language of choice into Go.</p>

<h3 id="support-for-non-http-protocols">Support for non-HTTP Protocols</h3>

<p>This document contains guidelines developed primarily for typical Azure REST services, i.e. stateless services with request-response based interaction model. Many of the guidelines in this document are more broadly applicable, but some might be specific to such REST services.</p>

<h2 id="golang-api">Azure SDK API Design</h2>

<p>Azure services will be exposed to Go developers as one or more <em>service client</em> types and a set of <em>supporting types</em>.</p>

<h3 id="golang-client">Service Clients</h3>

<p>Your API surface consists of one or more service clients that the consumer instantiates to connect to your service, plus a set of supporting types.</p>

<p><a href="#golang-client-naming" name="golang-client-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name service client types with the <code class="language-plaintext highlighter-rouge">Client</code> suffix.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">WidgetClient</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// all fields MUST NOT be exported</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="service-client-constructors">Service Client Constructors</h4>

<p><a href="#golang-client-constructors" name="golang-client-constructors" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide one or more constructors in the following format that return a new instance of a service client type.  The “simple named” constructor MUST use an <code class="language-plaintext highlighter-rouge">azcore.TokenCredential</code>, assuming the service supports AAD authentication.  If not, then the preferred credential type is used instead.  Constructors MUST return the client instance by reference.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// NewWidgetClient creates a new instance of WidgetClient with the specified values.</span>
<span class="c">// endpoint - The URI of the Widget.</span>
<span class="c">// cred - The AAD token credential used to authenticate with the Widget service.</span>
<span class="c">// options - Optional WidgetClient values.  Pass nil to accept default values.</span>
<span class="k">func</span> <span class="n">NewWidgetClient</span><span class="p">(</span><span class="n">endpoint</span> <span class="kt">string</span><span class="p">,</span> <span class="n">cred</span> <span class="n">azcore</span><span class="o">.</span><span class="n">TokenCredential</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientOptions</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">WidgetClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>

<span class="c">// NewWidgetClientWithNoCredential creates a new instance of WidgetClient with the specified values.</span>
<span class="c">// endpoint - The URI of the Widget that supports anonymous/SAS authentication</span>
<span class="c">// options - Optional WidgetClient values.  Pass nil to accept default values.</span>
<span class="k">func</span> <span class="n">NewWidgetClientWithNoCredential</span><span class="p">(</span><span class="n">endpoint</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientOptions</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">WidgetClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>

<span class="c">// NewWidgetClientFromConnectionString creates a new instance of WidgetClient from the specified connection string.</span>
<span class="c">// options - Optional WidgetClient values.  Pass nil to accept default values.</span>
<span class="k">func</span> <span class="n">NewWidgetClientFromConnectionString</span><span class="p">(</span><span class="n">connectionString</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientOptions</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">WidgetClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-client-constructors-params" name="golang-client-constructors-params" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document all constructor parameters as part of the method block comment.</p>

<h5 id="service-client-configuration">Service Client Configuration</h5>

<p>TODO</p>

<h5 id="setting-the-service-version">Setting the Service Version</h5>

<p>TODO</p>

<h5 id="client-immutability">Client Immutability</h5>

<p><a href="#golang-api-service-client-immutable" name="golang-api-service-client-immutable" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that all service client types are safe for concurrent use by multiple goroutines.  Ideally, all client state is immutable which will satisfy this guideline.</p>

<p><a href="#golang-api-service-client-fields" name="golang-api-service-client-fields" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  export any fields on client types.  This is to support mocking of clients via interface types.</p>

<h4 id="service-methods">Service Methods</h4>

<p><em>Service methods</em> are the methods on the client that invoke operations on the service.</p>

<h5 id="sync-and-async">Sync and Async</h5>

<p>The Go idiom is to expose only synchronous methods.  This allows callers to implement asynchronous calls as appropriate for their use-case.</p>

<p><a href="#golang-api-sync-only" name="golang-api-sync-only" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  create any goroutines inside an API call or return any channels which implies concurrent behavior.  This allows the consumer to control the concurrent implementation in a way that works best with their application.</p>

<p><a href="#golang-api-async-helper" name="golang-api-async-helper" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  create higher-level abstractions that work asynchronously where appropriate, allowing consumers the ability to opt-in to the async behavior.</p>

<h5 id="naming">Naming</h5>

<p><a href="#golang-client-crud-verbs" name="golang-client-crud-verbs" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  prefer the use of the following terms for CRUD operations:</p>

<table>
  <tbody>
    <tr>
      <td>Verb</td>
      <td>Parameters</td>
      <td>Comments</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Set&lt;noun&gt;</code></td>
      <td>key,item</td>
      <td>Adds new item or updates existing item.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Add&lt;noun&gt;</code></td>
      <td>key,item</td>
      <td>Adds a new item.  Fails if item already exists.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Update&lt;noun&gt;</code></td>
      <td>key,item</td>
      <td>Updates an existing item.  Fails if item doesn’t exist.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Delete&lt;noun&gt;</code></td>
      <td>key</td>
      <td>Deletes an existing item. Doesn’t fail if item doesn’t exist.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Get&lt;noun&gt;</code></td>
      <td>key</td>
      <td>Will retun an error if item doesn’t exist.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">List&lt;noun&gt;</code></td>
      <td> </td>
      <td>Returns list of items.  Returns empty list if no items exist.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">&lt;noun&gt;Exists</code></td>
      <td>key</td>
      <td>Returns <code class="language-plaintext highlighter-rouge">true</code> if the item exists.</td>
    </tr>
  </tbody>
</table>

<p><a href="#golang-client-verbs-flexible" name="golang-client-verbs-flexible" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  remain flexible and use names best suited for developer experience. Don’t conflict with terminology used by the service team’s documentation, blogs, and presentations.</p>

<p><a href="#golang-api-multimethods" name="golang-api-multimethods" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  provide multiple methods for a single REST endpoint.</p>

<h5 id="return-types">Return Types</h5>

<p>Requests to the service fall into two basic groups: methods that make a single logical request, and methods that make a deterministic sequence of requests. An example of a <em>single logical request</em> is a request that may be retried inside the operation. An example of a <em>deterministic sequence of requests</em> is a paged operation.</p>

<p>The <em>response envelope</em> is a protocol neutral representation of a response. The response envelope may combine data from headers and response body. For example, you may expose an <code class="language-plaintext highlighter-rouge">ETag</code> header as a property on the response envelope. <code class="language-plaintext highlighter-rouge">&lt;Client&gt;&lt;Method&gt;Response</code> is the ‘response envelope’. It contains HTTP headers and the object (a deserialized object created from the response body).  Response envelopes MUST be returned by value.</p>

<p><a href="#golang-response-logical-entity" name="golang-response-logical-entity" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return the response envelope for the normal form of a service method. The response envelope MUST represent the information needed in the 99%+ case.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// WidgetClientGetResponse contains the response from method WidgetClient.Get.</span>
<span class="k">type</span> <span class="n">WidgetClientGetResponse</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// ETag contains the value from the ETag header.</span>
	<span class="n">ETag</span> <span class="o">*</span><span class="n">azcore</span><span class="o">.</span><span class="n">ETag</span>

	<span class="c">// LastModified contains the value from the last-modified header.</span>
	<span class="n">LastModified</span> <span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Time</span>

	<span class="c">// Widget contains the unmarshalled response body in Widget format.</span>
	<span class="n">Widget</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">Widget</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">Name</span> <span class="kt">string</span>
	<span class="n">Color</span> <span class="n">WidgetColor</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">WidgetClient</span><span class="p">)</span> <span class="n">Get</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">name</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientGetOptions</span><span class="p">)</span> <span class="p">(</span><span class="n">WidgetClientGetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-response-examples" name="golang-response-examples" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide examples on how to access the streamed response for a request, where exposed by the client library. We don’t expect all methods to expose a streamed response.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// WidgetClientGetBinaryResponse contains the response from method WidgetClient.GetBinaryResponse.</span>
<span class="k">type</span> <span class="n">WidgetClientGetBinaryResponse</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// Body contains the streaming response.</span>
	<span class="n">Body</span> <span class="n">io</span><span class="o">.</span><span class="n">ReadCloser</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">WidgetClient</span><span class="p">)</span> <span class="n">GetBinaryResponse</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">name</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientGetBinaryResponseOptions</span><span class="p">)</span> <span class="p">(</span><span class="n">WidgetClientGetBinaryResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-response-logical-paging" name="golang-response-logical-paging" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide an idiomatic way to enumerate all logical entities for a paged operation, automatically fetching new pages as needed.  For more information on what to return for List operations, refer to <a href="#pagination">Pagination</a>.</p>

<p>For methods that combine multiple requests into a single call:</p>

<p><a href="#golang-response-no-headers" name="golang-response-no-headers" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  return headers and other per-request metadata unless it’s obvious as to which specific HTTP request the method’s return value corresponds to.</p>

<p><a href="#golang-response-failure-info" name="golang-response-failure-info" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide enough information in failure cases for an application to take appropriate corrective action.</p>

<p>Model structures are types that consumers use to provide required information into client library methods.  They can also be returned from client methods. These structures typically represent the domain model, or option structures that must be configured before the request can be made.</p>

<p><a href="#golang-model-types" name="golang-model-types" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  export all fields on model types to allow for mocking.</p>

<p><a href="#golang-model-types-ro" name="golang-model-types-ro" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document all read-only fields and exclude their values when marshalling the structure to be sent over the wire.</p>

<h5 id="cancellation">Cancellation</h5>

<p>Cancellation is handled via the <code class="language-plaintext highlighter-rouge">context.Context</code> paramater, which is <em>always</em> the first method parameter.  All APIs that perform I/O of any kind, sleep, or perform a significant amount of CPU-bound work <em>must</em> take a <code class="language-plaintext highlighter-rouge">context.Context</code> as its first parameter.  Please see the documentation for <a href="https://pkg.go.dev/context">context</a> for more information, including examples.</p>

<h5 id="thread-safety">Thread Safety</h5>

<p><a href="#golang-methods-thread-safety" name="golang-methods-thread-safety" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  be safe for concurrent use across multiple goroutines.</p>

<h4 id="service-method-parameters">Service Method Parameters</h4>

<p><a href="#golang-api-service-client-byref" name="golang-api-service-client-byref" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that all methods on client types pass their receiver by reference.</p>

<p><a href="#golang-api-context" name="golang-api-context" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  accept a <code class="language-plaintext highlighter-rouge">context.Context</code> object as the first parameter to every method that performs any I/O operations.</p>

<p><a href="#golang-api-mandatory-params" name="golang-api-mandatory-params" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  have every I/O method accept all required parameters after the mandatory <code class="language-plaintext highlighter-rouge">context.Context</code> object.</p>

<h5 id="optional-parameters">Optional Parameters</h5>

<p><a href="#golang-api-options-struct" name="golang-api-options-struct" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  define a <code class="language-plaintext highlighter-rouge">&lt;Client&gt;&lt;Method&gt;Options</code> structure for every method.  This structure includes fields for all non-mandatory parameters. The structure can have fields added to it over time to simplify versioning.  To disambiguate names, use the client type name for a prefix.  If the method contains no optional parameters, the <code class="language-plaintext highlighter-rouge">options</code> struct should have a comment indicating it’s a placeholder for future optional parameters.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// WidgetClientGetOptions contains the optional parameters for the WidgetClient.Get method.</span>
<span class="k">type</span> <span class="n">WidgetClientGetOptions</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">Tag</span> <span class="o">*</span><span class="kt">string</span>
	<span class="n">Length</span> <span class="o">*</span><span class="kt">int</span>
<span class="p">}</span>

<span class="c">// WidgetClientSetOptions contains the optional parameters for the WidgetClient.Set method.</span>
<span class="k">type</span> <span class="n">WidgetClientSetOptions</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// placeholder for future optional parameters</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-api-options-ptr" name="golang-api-options-ptr" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  allow the user to pass a pointer to the structure as the last parameter. If the user passes <code class="language-plaintext highlighter-rouge">nil</code>, then the method should assume appropriate default values for all the structure’s fields.  Note that <code class="language-plaintext highlighter-rouge">nil</code> and a zero-initialized <code class="language-plaintext highlighter-rouge">&lt;Client&gt;&lt;Method&gt;Options</code> structure <strong>are required</strong> to be semantically equivalent.</p>

<p><a href="#golang-api-params" name="golang-api-params" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document all parameters as part of the method block comment.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Get retrieves the specified Widget.</span>
<span class="c">// ctx - The context used to control the lifetime of the request.</span>
<span class="c">// name - The name of the Widget to retrieve.</span>
<span class="c">// options - Any optional parameters.</span>
<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">WidgetClient</span><span class="p">)</span> <span class="n">Get</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">name</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientGetOptions</span><span class="p">)</span> <span class="p">(</span><span class="n">WidgetClientGetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="parameter-validation">Parameter Validation</h5>

<p>The service client will have several methods that perform requests on the service. <em>Service parameters</em> are directly passed across the wire to an Azure service. <em>Client parameters</em> are not passed directly to the service, but used within the client library to fulfill the request.  Examples of client parameters include values that are used to construct a URI, or a file that needs to be uploaded to storage.</p>

<p><a href="#golang-params-client-validation" name="golang-params-client-validation" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  validate client parameters.</p>

<p><a href="#golang-params-service-validation" name="golang-params-service-validation" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  validate service parameters. This includes null checks, empty strings, and other common validating conditions. Let the service validate any request parameters.</p>

<p><a href="#golang-params-devex" name="golang-params-devex" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  validate the developer experience when the service parameters are invalid to ensure appropriate error messages are generated by the service. If the developer experience is compromised due to service-side error messages, work with the service team to correct prior to release.</p>

<h4 id="methods-returning-collections-paging">Methods Returning Collections (Paging)</h4>

<p><a href="#golang-pagination" name="golang-pagination" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return an instance of <code class="language-plaintext highlighter-rouge">*runtime.Pager[T]</code> for operations that return pages.  <code class="language-plaintext highlighter-rouge">runtime.Pager[T]</code> allows consumers to iterate over all pages as defined by the service.</p>

<p><a href="#golang-pagination" name="golang-pagination" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name methods that return a <code class="language-plaintext highlighter-rouge">*runtime.Pager[T]</code> with pattern <code class="language-plaintext highlighter-rouge">New&lt;Operation&gt;Pager</code>.</p>

<p><a href="#golang-params-service-validation" name="golang-params-service-validation" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  perform any IO when creating the <code class="language-plaintext highlighter-rouge">runtime.Pager[T]</code>.  This implies that the method does NOT take a context and does NOT return an error.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">WidgetClient</span><span class="p">)</span> <span class="n">NewListPager</span><span class="p">(</span><span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientListOptions</span><span class="p">)</span> <span class="o">*</span><span class="n">runtime</span><span class="o">.</span><span class="n">Pager</span><span class="p">[</span><span class="n">WidgetClientListResponse</span><span class="p">]</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">WidgetClientListResponse</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">WidgetsListResult</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">WidgetsListResult</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">Values</span> <span class="p">[]</span><span class="o">*</span><span class="n">Widget</span>

	<span class="n">NextLink</span> <span class="o">*</span><span class="kt">string</span>
<span class="p">}</span>

<span class="n">pager</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">NewListPager</span><span class="p">(</span><span class="no">nil</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pager</span><span class="o">.</span><span class="n">More</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">page</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">pager</span><span class="o">.</span><span class="n">NextPage</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">())</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="c">// handle error...</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">w</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">page</span><span class="o">.</span><span class="n">Value</span> <span class="p">{</span>
		<span class="n">process</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-pagination-serialization" name="golang-pagination-serialization" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide means to serialize and deserialize a <code class="language-plaintext highlighter-rouge">runtime.Pager[T]</code> so that paging can pause and continue, potentially on another machine.</p>

<h4 id="methods-invoking-long-running-operations">Methods Invoking Long Running Operations</h4>

<p><a href="#golang-lro-poller" name="golang-lro-poller" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return an instance of <code class="language-plaintext highlighter-rouge">*runtime.Poller[T]</code> for long-running operation methods.  <code class="language-plaintext highlighter-rouge">runtime.Poller[T]</code> encapsulates the polling and status of the long-running operation.</p>

<p><a href="#golang-lro-method-naming" name="golang-lro-method-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  prefix methods which return a <code class="language-plaintext highlighter-rouge">*runtime.Poller[T]</code> with <code class="language-plaintext highlighter-rouge">Begin</code>.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// BeginCreate creates a new widget with the specified name.</span>
<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">WidgetClient</span><span class="p">)</span> <span class="n">BeginCreate</span><span class="p">(</span><span class="n">ctx</span> <span class="n">context</span><span class="o">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">name</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientBeginCreateOptions</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">runtime</span><span class="o">.</span><span class="n">Poller</span><span class="p">[</span><span class="n">WidgetClientCreateResponse</span><span class="p">],</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>

<span class="c">// WidgetClientCreateResponse contains the response from method WidgetClient.BeginCreate.</span>
<span class="k">type</span> <span class="n">WidgetClientCreateResponse</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">Widget</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-lro-resuming-operations" name="golang-lro-resuming-operations" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a field named <code class="language-plaintext highlighter-rouge">ResumeToken</code> in the <code class="language-plaintext highlighter-rouge">&lt;Client&gt;&lt;Method&gt;Options</code> type used to instantiate a <code class="language-plaintext highlighter-rouge">*runtime.Poller[T]</code> type with the <code class="language-plaintext highlighter-rouge">ResumeToken</code> from a previous call to <code class="language-plaintext highlighter-rouge">Poller[T].ResumeToken()</code>.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// WidgetClientBeginCreateOptions contains the optional parameters for the WidgetClient.BeginCreate method.</span>
<span class="k">type</span> <span class="n">WidgetClientBeginCreateOptions</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="c">// Resumes the LRO from the provided token.</span>
	<span class="n">ResumeToken</span> <span class="kt">string</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-lro-cancel" name="golang-lro-cancel" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  cancel the LRO when cancellation is requested via a context. The context is cancelling the polling operation and should not have any effect on the service.</p>

<p><a href="#golang-lro-pattern" name="golang-lro-pattern" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow the operation pattern for all LROs.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// example #1, blocking call to PollUntilDone()</span>
<span class="n">poller</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">BeginCreate</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="s">"blue_widget"</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error...</span>
<span class="p">}</span>

<span class="n">w</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">poller</span><span class="o">.</span><span class="n">PollUntilDone</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">runtime</span><span class="o">.</span><span class="n">PollUntilDoneOptions</span><span class="p">{</span><span class="n">Frequency</span><span class="o">:</span> <span class="m">5</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">})</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error...</span>
<span class="p">}</span>

<span class="n">process</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

<span class="c">// example #2, customized poll loop</span>
<span class="n">poller</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">BeginCreate</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="s">"green_widget"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error...</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">{</span>
	<span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">poller</span><span class="o">.</span><span class="n">Poll</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">())</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="c">// handle error ...</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="n">poller</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">break</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="n">delay</span> <span class="o">:=</span> <span class="n">runtime</span><span class="o">.</span><span class="n">RetryAfter</span><span class="p">(</span><span class="n">resp</span><span class="p">);</span> <span class="n">delay</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">{</span>
		<span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="n">w</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">poller</span><span class="o">.</span><span class="n">Result</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">())</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error ...</span>
<span class="p">}</span>
<span class="n">process</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

<span class="c">// example #3, resuming from a previous operation</span>
<span class="c">// getting the resume token from a previous poller instance</span>
<span class="n">poller</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">BeginCreate</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="s">"blue_widget"</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error...</span>
<span class="p">}</span>

<span class="n">tk</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">poller</span><span class="o">.</span><span class="n">ResumeToken</span><span class="p">()</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error ...</span>
<span class="p">}</span>

<span class="c">// resuming from the resume token that was previously saved</span>
<span class="n">poller</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">BeginCreate</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="s">""</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">WidgetClientBeginCreateOptions</span><span class="p">{</span>
	<span class="n">ResumeToken</span><span class="o">:</span> <span class="n">tk</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error ...</span>
<span class="p">}</span>

<span class="n">w</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">poller</span><span class="o">.</span><span class="n">PollUntilDone</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">(),</span> <span class="no">nil</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="c">// handle error...</span>
<span class="p">}</span>
<span class="n">process</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
</code></pre></div></div>

<h5 id="conditional-request-methods">Conditional Request Methods</h5>

<p>TODO</p>

<h5 id="hierarchical-clients">Hierarchical Clients</h5>

<p>TODO</p>

<h3 id="supporting-types">Supporting Types</h3>

<p>In addition to service client types, Azure SDK APIs provide and use other supporting types as well.</p>

<h4 id="model-types">Model Types</h4>

<p>TODO</p>

<h5 id="model-type-naming">Model Type Naming</h5>

<p>TODO</p>

<h4 id="constants-as-enumerations">Constants as Enumerations</h4>

<p><a href="#golang-const" name="golang-const" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use a <code class="language-plaintext highlighter-rouge">const</code> for parameters, fields, and return types when values are known.</p>

<h4 id="azure-core-types">Azure Core Types</h4>

<p>TODO</p>

<h4 id="primitive-types">Primitive Types</h4>

<p>TODO</p>

<h3 id="error-handling">Error Handling</h3>

<p><a href="#golang-errors" name="golang-errors" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return an error if a method fails to perform its intended functionality.  For methods that return multiple items, the error object is always the last item in the return signature.</p>

<p><a href="#golang-errors-wrapping" name="golang-errors-wrapping" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  wrap an error with another error if it would help in the diagnosis of the underlying failure.  Expect consumers to use <a href="https://blog.golang.org/go1.13-errors">error helper functions</a> like <code class="language-plaintext highlighter-rouge">errors.As()</code> and <code class="language-plaintext highlighter-rouge">errors.Is()</code>.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">err</span> <span class="o">:=</span> <span class="n">xml</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Payload</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"unmarshalling type %s: %w"</span><span class="p">,</span> <span class="n">reflect</span><span class="o">.</span><span class="n">TypeOf</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">Elem</span><span class="p">()</span><span class="o">.</span><span class="n">Name</span><span class="p">(),</span> <span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#golang-errors-on-request-failed" name="golang-errors-on-request-failed" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return the service/operation specific error type when an HTTP request fails with an unsuccessful HTTP status code as defined by the service.  For operations that do not define an error type, return the HTTP response body in string format if available, else return the <code class="language-plaintext highlighter-rouge">Status</code> string on the HTTP response.</p>

<p><a href="#golang-errors-include-response" name="golang-errors-include-response" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  include the HTTP response and originating request in the returned error.  Use <code class="language-plaintext highlighter-rouge">runtime.NewResponseError()</code> from the <code class="language-plaintext highlighter-rouge">sdk/internal</code> module to provide this information.</p>

<p>In the case of a method that makes multiple HTTP requests, the first error encountered should stop the remainder of the operation and this error (or another error wrapping it) should be returned.</p>

<p><a href="#golang-errors-distinct-types" name="golang-errors-distinct-types" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return distinct error types so that consumers can distinguish between a client error (incomplete/incorrect API parameter values) and other SDK failures (failure to send the request, marshalling/unmarshalling, parsing errors).</p>

<p><a href="#golang-errors-documentation" name="golang-errors-documentation" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document the error types that are returned by each method.  Don’t document commonly returned error types, for example <code class="language-plaintext highlighter-rouge">context.DeadlineExceeded</code> when an HTTP request times out.</p>

<p><a href="#golang-errors-other-types" name="golang-errors-other-types" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  create arbitrary error types.  Use error types provided by the service, standard library, or <code class="language-plaintext highlighter-rouge">azcore</code>.</p>

<h3 id="authentication">Authentication</h3>

<p>Azure services use different kinds of authentication schemes to allow clients to access the service. Conceptually, there are two entities responsible in this process: a credential and an authentication policy. Credentials provide confidential authentication data. Authentication policies use the data provided by a credential to modify an HTTP request before it is sent to the service.</p>

<p><a href="#golang-auth-support" name="golang-auth-support" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  support all authentication techniques that the service supports.</p>

<p><a href="#golang-auth-use-azidentity" name="golang-auth-use-azidentity" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use credential and authentication policy implementations from the <code class="language-plaintext highlighter-rouge">azcore</code> or <code class="language-plaintext highlighter-rouge">azidentity</code> package where available.</p>

<p><a href="#golang-auth-concurrency" name="golang-auth-concurrency" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide credential types that can be used to fetch all data needed to authenticate a request to the service. If using a service-specific credential type, the implementation must be safe for concurrent use by multiple goroutines.</p>

<p><a href="#golang-auth-connection-strings" name="golang-auth-connection-strings" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  support constructing a service client with a connection string unless such connection string is available within tooling (e.g. Azure portal, for copy/paste operations). A connection string is a combination of an endpoint, credential data, and other options used to simplify service client configuration. Connection strings are easily integrated into an application by copy/paste from the portal. However, credentials within a connection string can’t be rotated within a running process. Their use should be discouraged in production apps.  If the client library supports connection strings, the constructor should look like this:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// NewWidgetClientFromConnectionString creates a new instance of WidgetClient with the specified values.  It uses the default pipeline configuration.</span>
<span class="k">func</span> <span class="n">NewWidgetClientFromConnectionString</span><span class="p">(</span><span class="n">con</span> <span class="kt">string</span><span class="p">,</span> <span class="n">options</span> <span class="o">*</span><span class="n">WidgetClientOptions</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="n">WidgetClient</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When implementing authentication, don’t open up the consumer to security holes like PII (personally identifiable information) leakage or credential leakage. Credentials are generally issued with a time limit, and must be refreshed periodically to ensure that the service connection continues to function as expected. Ensure your client library follows all current security recommendations and consider an independent security review of the client library to ensure you’re not introducing potential security problems for the consumer.</p>

<p><a href="#golang-auth-persistence" name="golang-auth-persistence" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  persist, cache, or reuse security credentials. Security credentials should be considered short lived to cover both security concerns and credential refresh situations.</p>

<p><a href="#golang-auth-policy-impl" name="golang-auth-policy-impl" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a suitable authentication policy if your service implements a non-standard authentication system (that is, an authentication system that is not supported by Azure Core).  You also need to produce an authentication policy for the HTTP pipeline that can add credentials to requests given the alternative authentication mechanism provided by the service.  Custom credentials will need to implement the <code class="language-plaintext highlighter-rouge">azcore.Credentials</code> interface.</p>

<h3 id="package-naming">Package Naming</h3>

<p>TODO (namespaces in other languages)</p>

<h3 id="support-for-mocking">Support for Mocking</h3>

<p>One of the key things we want to support is to allow consumers of the package to easily write repeatable unit-tests for their applications without activating a service. This allows them to reliably and quickly test their code without worrying about the vagaries of the underlying service implementation (including, for example, network conditions or service outages). Mocking is also helpful to simulate failures, edge cases, and hard to reproduce situations (for example: does code work on February 29th).</p>

<p><a href="#golang-mock-friendly" name="golang-mock-friendly" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  generate types and methods that can be mocked to simulate a response from an Azure endpoint.</p>

<p><a href="#golang-mock-procedure" name="golang-mock-procedure" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document the tools and procedures recommended to generate client interfaces for mocking.</p>

<p><a href="#golang-mock-lro-pages" name="golang-mock-lro-pages" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  generate interface types for LRO and pageable response types that contain all of the methods for their respective types.  The interface type name will be the same as the LRO/pageable response type name.</p>

<p><a href="#golang-test-recordings" name="golang-test-recordings" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  support HTTP request and response recording/playback via the pipeline.</p>

<h2 id="azure-sdk-module-design">Azure SDK Module Design</h2>

<h3 id="golang-packages">Packages</h3>

<p>Go groups related types in a package.  In Go, the package should be named <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;&lt;service&gt;</code>, where <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;</code> is either <code class="language-plaintext highlighter-rouge">arm</code> or <code class="language-plaintext highlighter-rouge">az</code>, and where <code class="language-plaintext highlighter-rouge">&lt;service&gt;</code> is the service name represented as a single word.</p>

<p><a href="#golang-package-prefix" name="golang-package-prefix" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  start the package with <code class="language-plaintext highlighter-rouge">arm</code> or <code class="language-plaintext highlighter-rouge">az</code> to indicate an Azure client package.  Use <code class="language-plaintext highlighter-rouge">arm</code> for management-plane packages, and <code class="language-plaintext highlighter-rouge">az</code> for all other packages.</p>

<p><a href="#golang-package-name" name="golang-package-name" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  construct the package name with all lowercase letters (uppercase letters, hyphens and underscores are not allowed). For example, the Azure compute management package would be named <code class="language-plaintext highlighter-rouge">armcompute</code> and the Azure blob storage package would be named <code class="language-plaintext highlighter-rouge">azblob</code>.</p>

<p><a href="#golang-package-registration" name="golang-package-registration" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  register the chosen package name with the <a href="https://github.com/azure/azure-sdk/issues">Architecture Board</a>. Open an issue to request the package name. See the <a href="registered_namespaces.html">registered package list</a> for a list of the currently registered packages.</p>

<h4 id="directory-structure">Directory Structure</h4>

<p><a href="#golang-pkgpath-construction" name="golang-pkgpath-construction" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  construct a package import path that allows the consumer to tie its packages to the service being used. The package path does <strong>NOT</strong> change when the branding of the product changes. Avoid the use of marketing names that may change.</p>

<p><a href="#golang-pkgpath-leaf" name="golang-pkgpath-leaf" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that the package leaf directory name matches the package name declared in the source code.</p>

<p><a href="#golang-pkgpath-apiver" name="golang-pkgpath-apiver" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that each service API version is in its own directory, IFF that service supports multiple API versions.</p>

<p><a href="#golang-pkgpath-mgmt" name="golang-pkgpath-mgmt" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  place the management (Azure Resource Manager) API in the <code class="language-plaintext highlighter-rouge">arm</code> path. Use the grouping <code class="language-plaintext highlighter-rouge">./sdk/arm/&lt;group&gt;/&lt;api-version&gt;/arm&lt;service&gt;</code> for the package path. Since more services require management APIs than data plane APIs, other paths may be used explicitly for management only. Data plane usage is by exception only. Additional paths that can be used for control plane SDKs include:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Namespace Group</th>
      <th style="text-align: left">Functional Area</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">appmodel</code></td>
      <td style="text-align: left">Application models, such as Functions or App Frameworks</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">compute</code></td>
      <td style="text-align: left">Virtual machines, containers, and other compute services</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">integration</code></td>
      <td style="text-align: left">Integration services (such as Logic Apps)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">management</code></td>
      <td style="text-align: left">Management services (such as Cost Analytics)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">networking</code></td>
      <td style="text-align: left">Services such as VPN, WAN, and Networking</td>
    </tr>
  </tbody>
</table>

<p>Many management APIs do not have a data plane because they deal with management of the Azure account. Place the management package in the <code class="language-plaintext highlighter-rouge">arm</code> path. For example, use <code class="language-plaintext highlighter-rouge">sdk/arm/costanalysis/...</code> instead of <code class="language-plaintext highlighter-rouge">sdk/arm/management/costanalysis</code>.</p>

<p>Here is a complete example.</p>

<p>Data-plane packages:</p>

<ul>
  <li>github.com/Azure/azure-sdk-for-go/sdk/keyvault/7.0/azkeyvault</li>
  <li>github.com/Azure/azure-sdk-for-go/sdk/storage/blob/2019-12-19/azblob</li>
  <li>github.com/Azure/azure-sdk-for-go/sdk/storage/queue/2019-12-19/azqueue</li>
  <li>github.com/Azure/azure-sdk-for-go/sdk/storage/table/2019-12-19/aztable</li>
</ul>

<p>Management-plane packages:</p>

<ul>
  <li>github.com/Azure/azure-sdk-for-go/sdk/arm/keyvault/2019-09-01/armkeyvault</li>
  <li>github.com/Azure/azure-sdk-for-go/sdk/arm/storage/2019-01-01/armstorage</li>
  <li>github.com/Azure/azure-sdk-for-go/sdk/arm/storage/2019-02-01/armstorage</li>
</ul>

<h4 id="common-packages">Common Packages</h4>

<p>There are occasions when common code needs to be shared between several client packages. For example, a set of cooperating client packages may wish to share a set of errors or models.</p>

<p><a href="#golang-commonlib-approval" name="golang-commonlib-approval" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  gain <a href="https://github.com/azure/azure-sdk/issues">Architecture Board</a> approval prior to implementing a common package.</p>

<p><a href="#golang-commonlib-minimize-code" name="golang-commonlib-minimize-code" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  minimize the code within a common package. Code within the common package is treated the same as any other client package.</p>

<p><a href="#golang-commonlib-namespace" name="golang-commonlib-namespace" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  store the common package in the same directory as the associated client packages.</p>

<p>A common package will only be approved if:</p>

<ul>
  <li>The consumer of the non-shared package will consume the objects within the common package directly, AND</li>
  <li>The information will be shared between multiple client package.</li>
</ul>

<p>Let’s take two examples:</p>

<ol>
  <li>
    <p>Implementing two Cognitive Services client packages, we find a model is required that is produced by one Cognitive Services client package and consumed by another Coginitive Services client package, or the same model is produced by two client packages. The consumer is required to do the passing of the model in their code, or may need to compare the model produced by one client package vs. that produced by another client package. This is a good candidate for choosing a common package.</p>
  </li>
  <li>
    <p>Two Cognitive Services client packages return a <code class="language-plaintext highlighter-rouge">BoundingBox</code> model to indicate where an object was detected in an image. There is no linkage between the <code class="language-plaintext highlighter-rouge">BoundingBox</code> model in each client package, and it is not passed into another client package. This is not a good candidate for creation of a common package (although you may wish to place this model in a common package if one exists for the namespace already). Instead, produce two different models - one in each client package.</p>
  </li>
</ol>

<h3 id="package-versioning">Package Versioning</h3>

<p><a href="#golang-versioning-modules" name="golang-versioning-modules" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  release each package as a <a href="https://blog.golang.org/using-go-modules">Go module</a>.  Legacy dependency management tools such as <code class="language-plaintext highlighter-rouge">dep</code> and <code class="language-plaintext highlighter-rouge">glide</code> are not supported.</p>

<p><a href="#golang-versioning-semver" name="golang-versioning-semver" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  release versions of modules in accordance with <a href="https://semver.org/spec/v2.0.0.html">semver 2.0</a>.</p>

<p><a href="#golang-versioning-beta" name="golang-versioning-beta" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  clearly version prerelease modules.  For new modules, use a v0 major version with no suffix (v0.1.0).  For existing modules, use a <code class="language-plaintext highlighter-rouge">-beta</code> suffix (v1.1.0-beta, v2.0.0-beta).</p>

<h3 id="dependencies">Dependencies</h3>

<p>Packages should strive to avoid taking dependencies on packages outside of the standard library for the following reasons:</p>

<ul>
  <li><strong>Versioning</strong> - Exposing types defined outside the standard library (i.e. <code class="language-plaintext highlighter-rouge">exchange types</code>) can indroduce versioning complexity.  If we have an client package that exposes types from a v3 of package Foo and the consumer wants to use v5 of package Foo, then the consumer cannot use the v5 types to satisfy the v3 requirement.</li>
  <li><strong>Size</strong> - Consumer applications must be able to deploy as fast as possible into the cloud and move in various ways across networks. Removing additional code (like dependencies) improves deployment performance.</li>
  <li><strong>Licensing</strong> - You must be conscious of the licensing restrictions of a dependency and often provide proper attribution and notices when using them.</li>
  <li><strong>Compatibility</strong> - Often times you do not control a dependency and it may choose to evolve in a direction that is incompatible with your original use.</li>
  <li><strong>Security</strong> - If a security vulnerability is discovered in a dependency, it may be difficult or time consuming to get the vulnerability corrected if Microsoft does not control the dependency’s code base.</li>
</ul>

<p><a href="#golang-dependencies-exch-types" name="golang-dependencies-exch-types" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  limit exchange types to those provided by the standard library (<strong>NO EXCEPTIONS</strong>).</p>

<p><a href="#golang-dependencies-azure-core" name="golang-dependencies-azure-core" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  depend on the <code class="language-plaintext highlighter-rouge">azcore</code> package for functionality that is common across all client packages.  This package includes APIs for HTTP connectivity, global configuration, logging, credential handling, and more.</p>

<p><a href="#golang-dependencies-azure-core" name="golang-dependencies-azure-core" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  depend on the <code class="language-plaintext highlighter-rouge">sdk/internal</code> package for functionality that is common across all client packages that should not be publicly exported.  This package includes helpers for creating errors with stack frame information, and more.</p>

<p><a href="#golang-dependencies-approved-list" name="golang-dependencies-approved-list" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  be dependent on any other packages within the client package distribution package, with the exception of the following:</p>

<table>
  <thead>
    <tr>
      <th>Library</th>
      <th>Version</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">github.com/pkg/browser</code></td>
      <td>v0.0.0-20180916011732-0a3d74bf9ce4</td>
      <td>Used for opening URLs in the user’s default browser.  Used in <code class="language-plaintext highlighter-rouge">azidentity</code> interactive credential.</td>
    </tr>
  </tbody>
</table>

<h3 id="native-code">Native Code</h3>

<p>TODO</p>

<h3 id="doc-comments">Doc Comments</h3>

<p><a href="#golang-document-everything" name="golang-document-everything" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document every exported constant, function, and type within a package.</p>

<h2 id="repository-guidelines">Repository Guidelines</h2>

<p><a href="#golang-general-repository" name="golang-general-repository" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  locate all source code in the <a href="https://github.com/azure/azure-sdk-for-go">azure/azure-sdk-for-go</a> GitHub repository.</p>

<p><a href="#golang-general-engsys" name="golang-general-engsys" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow Azure SDK engineering systems guidelines for working in the <a href="https://github.com/azure/azure-sdk-for-go">azure/azure-sdk-for-go</a> GitHub repository.</p>

<h3 id="documentation-style">Documentation Style</h3>

<p><a href="#golang-docs-to-silence" name="golang-docs-to-silence" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  attempt to document your library into silence. Preempt developers’ usage questions and minimize GitHub issues by clearly explaining your API in the <a href="https://godoc.org">GoDoc</a>. Include information on service limits and errors they might hit, and how to avoid and recover from those errors.</p>

<p>As you write your code, <em>doc it so you never hear about it again.</em> The less questions you have to answer about your client library, the more time you have to build new features for your service.</p>

<h3 id="readme">README</h3>

<p>TODO</p>

<h3 id="samples">Samples</h3>

<p>Code examples are small functions that demonstrate a certain feature that is relevant to the client library.  Examples allow developers to quickly understand the full usage requirements of your client library.  Code examples shouldn’t be any more complex than needed to demonstrate the feature.  Don’t write full applications.  Examples should have a high signal to noise ratio between useful code and boilerplate code for non-related reasons.</p>

<p><a href="#golang-include-code-examples" name="golang-include-code-examples" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  include code examples within your package’s code. The examples should clearly and succinctly demonstrate the code most developers need to write with your library. Include examples for all common operations. Pay attention to operations that are complex or might be difficult for new users of your library. Include examples for the champion scenarios you’ve identified for the library.</p>

<p><a href="#golang-code-example-location" name="golang-code-example-location" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  place code examples within the package directory, for example in an <code class="language-plaintext highlighter-rouge">examples_test.go</code> file.</p>

<p><a href="#golang-code-example-comments" name="golang-code-example-comments" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  add an <code class="language-plaintext highlighter-rouge">Output:</code> or <code class="language-plaintext highlighter-rouge">Unordered output:</code> <a href="https://golang.org/pkg/testing/#hdr-Examples">comment</a> at the end of the example if the output is deterministic and suitable for running as a unit test.</p>

<p><a href="#golang-code-example-graft" name="golang-code-example-graft" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that code examples can be easily grafted from the documentation into a user’s own application.</p>

<p><a href="#golang-code-example-readability" name="golang-code-example-readability" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  write code examples for ease of reading and comprehension over code compactness and efficiency.</p>

<p><a href="#golang-code-example-platforms" name="golang-code-example-platforms" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that examples can run in Windows, macOS, and Linux development environments.</p>

<p><a href="#golang-code-example-builds" name="golang-code-example-builds" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  build and test your code examples using the repository’s continuous integration (CI) to ensure they remain functional.</p>

<p><a href="#golang-code-example-exports" name="golang-code-example-exports" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that all exported types, members, functions, and methods are documented.</p>

<p><a href="#golang-code-example-combination" name="golang-code-example-combination" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  combine multiple operations in a code example unless it’s required for demonstrating the type or member. For example, a Cosmos DB code example doesn’t include both account and container creation operations. Create an example for account creation, and another example for container creation.</p>

<p>Combined operations require knowledge of additional operations that might be outside the user’s current focus. The developer must first understand the code surrounding the operation they’re working on and can’t copy and paste the code example into their project.</p>


        
            <div class="tags">
                
            </div>
        
            

        </div>
    </div>
</div>
                </div>
                <!-- /.row -->

            </div>
            <!-- /.container -->
        </div>
        <!-- /#main -->
    </div>
    
    <!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-46"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62780441-46');
</script>

<!-- OLD SCRIPT
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-62780441-46','auto');ga('require','displayfeatures');ga('send','pageview');</script>
-->

    
    
    <!-- the app_insights gets auto inserted from the config file -->
<!-- For other configuration elements, see https://docs.microsoft.com/azure/azure-monitor/app/javascript#snippet-based-setup -->

<script type="text/javascript">
var sdkInstance="appInsightsSDK";window[sdkInstance]="appInsights";var aiName=window[sdkInstance],aisdk=window[aiName]||function(n){var o={config:n,initialize:!0},t=document,e=window,i="script";setTimeout(function(){var e=t.createElement(i);e.src=n.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",t.getElementsByTagName(i)[0].parentNode.appendChild(e)});try{o.cookie=t.cookie}catch(e){}function a(n){o[n]=function(){var e=arguments;o.queue.push(function(){o[n].apply(o,e)})}}o.queue=[],o.version=2;for(var s=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];s.length;)a("track"+s.pop());var r="Track",c=r+"Page";a("start"+c),a("stop"+c);var u=r+"Event";if(a("start"+u),a("stop"+u),a("addTelemetryInitializer"),a("setAuthenticatedUserContext"),a("clearAuthenticatedUserContext"),a("flush"),o.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},!(!0===n.disableExceptionTracking||n.extensionConfig&&n.extensionConfig.ApplicationInsightsAnalytics&&!0===n.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking)){a("_"+(s="onerror"));var p=e[s];e[s]=function(e,n,t,i,a){var r=p&&p(e,n,t,i,a);return!0!==r&&o["_"+s]({message:e,url:n,lineNumber:t,columnNumber:i,error:a}),r},n.autoExceptionInstrumented=!0}return o}(
{
    instrumentationKey:"5e03f19a-f5b4-4620-97d5-35707cec7fcb",
    autoTrackPageVisitTime:true,
    isCookieUseDisabled:true
}
);(window[aiName]=aisdk).queue&&0===aisdk.queue.length&&aisdk.trackPageView({});
</script>

    
</body>
<hr class="shaded"/>
<footer>
    <div class="container-fluid">
        <div class="row footer">
            <div class="col-lg-6 text-left pb-1">
           &copy;2023 Microsoft Azure. All rights reserved. 
 Site last generated: Sep 20, 2023
            </div>
            <div class="col-lg-6 text-right">
                <p><img src="/azure-sdk/images/company_logo.png" width="100px" alt="Microsoft logo"/></p>
            </div>
        </div>
    </div>
</footer>

</html>
