<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" guidelines dotnet">
<title>.NET Azure SDK Design Guidelines | Azure SDKs</title>
<link rel="stylesheet" href="/azure-sdk/css/syntax.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/azure-sdk/css/modern-business.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/azure-sdk/css/boxshadowproperties.css" />
<link rel="stylesheet" href="/azure-sdk/css/theme-azure.css" />
<link rel="stylesheet" href="/azure-sdk/css/customstyles.css" />
<link rel="stylesheet" href="/azure-sdk/css/normalize.css">
<link rel="stylesheet" href="/azure-sdk/css/tipuesearch.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/azure-sdk/js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="/azure-sdk/js/toc.js"></script>
<script src="/azure-sdk/js/customscripts.js"></script>

<link rel="shortcut icon" href="/azure-sdk/images/azure-sdk-glyph.svg"/>
<link rel="alternate" type="application/rss+xml" title="Azure SDKs" href="/azure-sdk/feed.xml" />

    <script>
        $(document).ready(function () {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function () {
            $("#tg-sb-link").click(function () {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    
    <!-- Due to the page header height, all anchors uses top padding to offset the top possion and appear below the main header.
        If one requirement icon is just below another, the padding of the icon overlaps the one on top of it and block the clicking surface.
        The script below finds all requirements icons and adds z-index decrementally to place any previous icon on top of the next ones.
        The script runs after the page is completelly load (all content is downloaded).
      -->
    <script>
        $(window).bind("load", function () {
            let requeriments = $('.requirement');
            requeriments.each(function (index, element) {
                $(element).css("z-index", requeriments.length - index);
            });
        });
    </script>

</head>

<body>
    <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/azure-sdk/releases/latest/index.html"/>
                <span class="projectTitle"><img style="margin-top: -8px;" class="d-inline-block align-top" src="/azure-sdk/images/azure-sdk-glyph.svg" width="35" height="35" alt=""/> Azure SDKs</span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> -->
                <!-- entries without drop-downs appear here -->





                
                
                
                <li><a href="https://aka.ms/azsdk/blog" rel="noopener">Blog</a></li>
                
                
                
                <li><a href="/azure-sdk/releases/latest/">Releases</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guidelines<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/azure-sdk/general_introduction.html" rel="noopener">General Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/dotnet_introduction.html" rel="noopener">.NET Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/java_introduction.html" rel="noopener">Java Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/python_design.html" rel="noopener">Python Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/typescript_introduction.html" rel="noopener">TypeScript Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/android_design.html" rel="noopener">Android Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/ios_design.html" rel="noopener">iOS Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/clang_design.html" rel="noopener">C Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/cpp_introduction.html" rel="noopener">C++ Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/golang_introduction.html" rel="noopener">Go Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/policies_adoption.html" rel="noopener">GitHub Repos</a></li>
                        
                        <li><a href="/azure-sdk/policies_reviewprocess.html" rel="noopener">Policies</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API References<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        
                        <li><a href="https://aka.ms/net-docs" rel="noopener">.NET</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/java-docs" rel="noopener">Java</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/python-docs" rel="noopener">Python</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/js-docs" rel="noopener">TypeScript</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                
                
                <li>
                    
                        <a style="font-size: 1.666em !important" class="fa fa-github fa-2x" title="GitHub Link" href="https://github.com/azure/azure-sdk"></a>
                    
                </li>
                <li>
                    <a style="font-size: 1.666em !important" class="fa fa-twitter fa-2x" title="Twitter Link" href="https://twitter.com/AzureSDK"></a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

    <!-- Page Content -->
    <div class="container-fluid" style="margin-top: 60px; min-height: calc(100vh - 50px);">
        <div id="main">
            <!-- Content Row -->
            <div class="row">
                
                
                <!-- Sidebar Column -->
                <div class="col-md-2 col-xs-12" id="tg-sb-sidebar">
                    

<div id="mysidebar" class="nav">

  <script src="/azure-sdk/js/tipuesearch_content.js"></script>
  <script src="/azure-sdk/js/tipuesearch_set.js"></script>
  <script src="/azure-sdk/js/tipuesearch.min.js"></script>

<p>
<form action="/azure-sdk/search.html" >
    <div class=" tipue_search_left"><img src="/azure-sdk/images/search.png" alt="Search Icon" class="tipue_search_icon"></div>
    <input type="text" class="form-control tipue_search_right" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required placeholder="Search website">
</form>
</p>
<div style="clear: both;"></div>
  <ol>
    <li class="sidebarTitle"> </li>
    
      
        
        <li>
        
          
          <a title="General Guidelines" href="#">General Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/general_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="Terminology" href="/azure-sdk/general_terminology.html">Terminology</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/general_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/general_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/general_documentation.html">Documentation</a></li>
              
              
            
              
                <li><a title="Azure Core" href="/azure-sdk/general_azurecore.html">Azure Core</a></li>
              
              
            
              
                <li><a title="Contribution Guidelines" href="/azure-sdk/policies_opensource.html">Contribution Guidelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title=".NET Guidelines" href="#">.NET Guidelines</a>
          
          <ul>
            
              
                <li class="active"><a title="Design" href="/azure-sdk/dotnet_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/dotnet_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="Microsoft.Azure.Cosmos" href="https://docs.microsoft.com/dotnet/api/microsoft.azure.cosmos" target="_blank" rel="noopener">Microsoft.Azure.Cosmos</a></li>
                      
                    
                      
                        <li><a title="Azure.Messaging.EventHubs" href="https://azure.github.io/azure-sdk-for-net/eventhubs.html#azuremessagingeventhubs" target="_blank" rel="noopener">Azure.Messaging.EventHubs</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Keys" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultkeys" target="_blank" rel="noopener">Azure.Security.KeyVault.Keys</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Secrets" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultsecrets" target="_blank" rel="noopener">Azure.Security.KeyVault.Secrets</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Blobs" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestorageblobs" target="_blank" rel="noopener">Azure.Storage.Blobs</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Files.Shares" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragefilesshares" target="_blank" rel="noopener">Azure.Storage.Files.Shares</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Queues" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragequeues" target="_blank" rel="noopener">Azure.Storage.Queues</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Java Guidelines" href="#">Java Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/java_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/java_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Spring Guidelines" href="/azure-sdk/java_spring.html">Spring Guidelines</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-data-appconfiguration" href="https://azure.github.io/azure-sdk-for-java/appconfiguration.html#azure-data-appconfiguration" target="_blank" rel="noopener">azure-data-appconfiguration</a></li>
                      
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-java/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-messaging-eventhubs" href="https://azure.github.io/azure-sdk-for-java/eventhubs.html#azure-messaging-eventhubs" target="_blank" rel="noopener">azure-messaging-eventhubs</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Python Guidelines" href="#">Python Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/python_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/python_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/python_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-python/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-eventhub" href="https://azure.github.io/azure-sdk-for-python/eventhubs.html#azure-eventhub" target="_blank" rel="noopener">azure-eventhub</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="TypeScript Guidelines" href="#">TypeScript Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/typescript_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/typescript_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/typescript_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/typescript_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="@azure/cosmos" href="https://azure.github.io/azure-cosmos-js/" target="_blank" rel="noopener">@azure/cosmos</a></li>
                      
                    
                      
                        <li><a title="@azure/event-hubs" href="https://azure.github.io/azure-sdk-for-js/eventhubs.html#azure-event-hubs" target="_blank" rel="noopener">@azure/event-hubs</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-keys" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">@azure/keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-secrets" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">@azure/keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-blob" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-blob" target="_blank" rel="noopener">@azure/storage-blob</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-file-share" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-file-share" target="_blank" rel="noopener">@azure/storage-file-share</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-queue" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-queue" target="_blank" rel="noopener">@azure/storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Android Guidelines" href="#">Android Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/android_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/android_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="iOS Guidelines" href="#">iOS Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/ios_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/ios_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C Guidelines" href="#">C Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/clang_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/clang_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="az_iot" href="https://azuresdkdocs.blob.core.windows.net/$web/c/az_iot/latest/index.html" target="_blank" rel="noopener">az_iot</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C++ Guidelines" href="#">C++ Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/cpp_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/cpp_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-datalake" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-datalake" target="_blank" rel="noopener">azure-storage-file-datalake</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-shares" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Go Guidelines" href="#">Go Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/golang_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/golang_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="GitHub Repos" href="#">GitHub Repos</a>
          
          <ul>
            
              
                <li><a title="Guidelines Contributions" href="/azure-sdk/policies_adoption.html">Guidelines Contributions</a></li>
              
              
            
              
                <li><a title="Repository structure" href="/azure-sdk/policies_repostructure.html">Repository structure</a></li>
              
              
            
              
                <li><a title="Repository branching" href="/azure-sdk/policies_repobranching.html">Repository branching</a></li>
              
              
            
              
                <li><a title="Pipelines" href="/azure-sdk/policies_pipelines.html">Pipelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Policies" href="#">Policies</a>
          
          <ul>
            
              
                <li><a title="Review Process" href="/azure-sdk/policies_reviewprocess.html">Review Process</a></li>
              
              
            
              
                <li><a title="Releases" href="/azure-sdk/policies_releases.html">Releases</a></li>
              
              
            
              
                <li><a title="Release notes" href="/azure-sdk/policies_releasenotes.html">Release notes</a></li>
              
              
            
              
                <li><a title="Support" href="/azure-sdk/policies_support.html">Support</a></li>
              
              
            
          </ul>
        </li>
      
    
  </ol>
</div>

<script>$("li.active").parents('li').toggleClass("active");</script>

                </div>
                
                

                <!-- Content Column -->
                <div class="col-md-10 col-xs-12" id="tg-sb-content">
                    <div class="row">
    
    <div class="col-md-2 col-xs-12 content-right pull-right">
        
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 60);
  return false
})
  
});
</script>

<div id="toc"></div>

    </div>
    

    <div class="col-md-10  col-xs-12 content-center pull-left">
        <div class="post-header">
        <h1 class="post-title-main">.NET Azure SDK Design Guidelines</h1>
        </div>
        
        
        
        <div class="post-content">
            
        
            
        
            <h2 id="introduction">Introduction</h2>

<p>The following document describes .NET specific guidelines for designing Azure SDK client libraries. These guidelines complement general <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a> with design considerations specific to the Azure SDK. These guidelines also expand on and simplify language-independent <a href="/azure-sdk/general_introduction.html">General Azure SDK Guidelines</a>. More specific guidelines take precedence over more general guidelines.</p>

<p>Throughout this document, we’ll use the client library for the <a href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/appconfiguration/Azure.Data.AppConfiguration">Azure Application Configuration service</a> to illustrate various design concepts.</p>

<h3 id="dotnet-principles">Design Principles</h3>

<p>The main value of the Azure SDK is <strong>productivity</strong> building applications with Azure services. Other qualities, such as completeness, extensibility, and performance are important but secondary.  We ensure our customers can be highly productive when using our libraries by ensuring these libraries are:</p>

<p><strong>Idiomatic</strong></p>

<ul>
  <li>Azure SDK libraries follow <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a>.</li>
  <li>Azure SDK libraries feel like designed by the designers of the .NET Standard libraries.</li>
  <li>Azure SDK libraries version just like the .NET Standard libraries.</li>
</ul>

<blockquote>
  <p>We are not trying to fix bad parts of the language ecosystem; we embrace the ecosystem with its strengths and its flaws.</p>
</blockquote>

<p><strong>Consistent</strong></p>

<ul>
  <li>The Azure SDK feels like a single product of a single team, not a set of unrelated NuGet packages.</li>
  <li>Users learn common concepts once; apply the knowledge across all SDK components.</li>
  <li>All differences from the guidelines must have good reasons.</li>
</ul>

<p><strong>Approachable</strong></p>

<ul>
  <li>Small number of steps to get started; power knobs for advanced users</li>
  <li>Small number of concepts; small number of types; small number of members</li>
  <li>Approachable by our users, not only by engineers designing the SDK components</li>
  <li>Easy to find great <em>getting started</em> guides and samples</li>
  <li>Easy to acquire</li>
</ul>

<p><strong>Dependable</strong></p>

<ul>
  <li>100% backward compatible</li>
  <li>Great logging, tracing, and error messages</li>
  <li>Predictable support lifecycle, feature coverage, and quality</li>
</ul>

<h3 id="dotnet-general">General Guidelines</h3>

<p><a href="#dotnet-general-follow-framework-guidelines" name="dotnet-general-follow-framework-guidelines" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow the official <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a>.</p>

<p>At the end of this document, you can find a section with <a href="#dotnet-appendix-overlookedguidelines">the most commonly overlooked guidelines</a> in existing Azure SDK libraries.</p>

<p><a href="#dotnet-general-follow-general-guidelines" name="dotnet-general-follow-general-guidelines" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow the <a href="/azure-sdk/general_introduction.html">General Azure SDK Guidelines</a>.</p>

<p>The guidelines provide a robust methodology for communicating with Azure services. The easiest way to ensure that your component meets these requirements is to use the <a href="https://www.nuget.org/packages/Azure.Core/">Azure.Core</a> package to call Azure services. Details of these helper APIs and their usage are described in the <a href="/azure-sdk/dotnet_implementation.html#dotnet-usage-httppipeline">Using HttpPipeline</a> section.</p>

<p><a href="#dotnet-general-use-http-pipeline" name="dotnet-general-use-http-pipeline" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">HttpPipeline</code> to implement all methods that call Azure REST services.</p>

<p>The pipeline can be found in the <a href="https://www.nuget.org/packages/Azure.Core/">Azure.Core</a> package, and it takes care of many <a href="/azure-sdk/general_introduction.html">General Azure SDK Guidelines</a>. Details of the pipeline design and usage are described in section <a href="/azure-sdk/dotnet_implementation.html#dotnet-usage-httppipeline">Using HttpPipeline</a> below. If you can’t use the pipeline, you must implement <a href="/azure-sdk/general_azurecore.html">all the general requirements of Azure SDK</a> manually.</p>

<h3 id="support-for-non-http-protocols">Support for non-HTTP Protocols</h3>

<p>This document contains guidelines developed primarily for typical Azure REST services, i.e. stateless services with request-response based interaction model. Many of the guidelines in this document are more broadly applicable, but some might be specific to such REST services.</p>

<h2 id="dotnet-api">Azure SDK API Design</h2>

<p>Azure services are exposed to .NET developers as one or more <a href="#dotnet-client">service client</a> types and a set of <a href="#supporting-types">supporting types</a>.  The supporting types may include various <a href="#dotnet-subclients">subclients</a>, which give structure to the API by organizing groups of related service operations, and <a href="#dotnet-model-types">model types</a>, which represent resources on the service.</p>

<h3 id="dotnet-client">The Service Client</h3>

<p>Service clients are the main starting points for developers calling Azure services with the Azure SDK.  Each client library should have at least one client in its main namespace, so it’s easy to discover.  The guidelines in this section describe patterns for the design of a service client.</p>

<p>A service client should have the same shape as this code snippet:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nn">Azure.</span><span class="p">&lt;</span><span class="k">group</span><span class="p">&gt;.&lt;</span><span class="n">service_name</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="c1">// main service client class</span>
    <span class="k">public</span> <span class="k">class</span> <span class="err">&lt;</span><span class="nc">service_name</span><span class="p">&gt;</span><span class="n">Client</span> <span class="p">{</span>

        <span class="c1">// simple constructors; don't use default parameters</span>
        <span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">simple_binding_parameters</span><span class="p">&gt;);</span>
        <span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">simple_binding_parameters</span><span class="p">&gt;,</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="n">ClientOptions</span> <span class="n">options</span><span class="p">);</span>

        <span class="c1">// 0 or more advanced constructors</span>
        <span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">advanced_binding_parameters</span><span class="p">&gt;,</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="n">ClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

        <span class="c1">// mocking constructor</span>
        <span class="k">protected</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">();</span>

        <span class="c1">// service methods (synchronous and asynchronous)</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;&lt;</span><span class="n">model</span><span class="p">&gt;&gt;</span> <span class="p">&lt;</span><span class="n">service_operation</span><span class="p">&gt;</span><span class="nf">Async</span><span class="p">(&lt;</span><span class="n">parameters</span><span class="p">&gt;,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">model</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="n">service_operation</span><span class="p">&gt;(&lt;</span><span class="n">parameters</span><span class="p">&gt;,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

        <span class="c1">// other members</span>
    <span class="p">}</span>

    <span class="c1">// options for configuring the client</span>
    <span class="k">public</span> <span class="k">class</span> <span class="err">&lt;</span><span class="nc">service_name</span><span class="p">&gt;</span><span class="n">ClientOptions</span> <span class="p">:</span> <span class="n">ClientOptions</span> <span class="p">{</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>For example, the Application Configuration Service client looks like this code snippet:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nn">Azure.Data.Configuration</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>

        <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">);</span>
        <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">,</span> <span class="n">ConfigurationClientOptions</span> <span class="n">options</span><span class="p">);</span>

        <span class="k">protected</span> <span class="nf">ConfigurationClient</span><span class="p">();</span> <span class="c1">// for mocking</span>

        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">GetConfigurationSettingAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">GetConfigurationSetting</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

        <span class="c1">// other members</span>
        <span class="err">…</span>
    <span class="p">}</span>

    <span class="c1">// options for configuring the client</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClientOptions</span> <span class="p">:</span> <span class="n">ClientOptions</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can find the full sources of <a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/appconfiguration/Azure.Data.AppConfiguration/src/ConfigurationClient.cs">here</a>.</p>

<p><a href="#dotnet-client-naming" name="dotnet-client-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name service client types with the <em>Client</em> suffix.</p>

<p>For example, the service client for the Application Configuration service is called <code class="language-plaintext highlighter-rouge">ConfigurationClient</code>.</p>

<p><a href="#dotnet-client-location" name="dotnet-client-location" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  place at least one service client in the root namespace of their corresponding component.</p>

<p><a href="#dotnet-client-type" name="dotnet-client-type" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make service clients classes (reference types), not structs (value types).</p>

<p><a href="#dotnet-client-immutable" name="dotnet-client-immutable" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make service clients immutable.</p>

<p>Client instances are often shared between threads (stored in application statics) and it should be difficult, if not impossible, for one of these threads to affect others.</p>

<p><a href="#dotnet-client-namespace" name="dotnet-client-namespace" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  see <a href="#dotnet-namespace-naming">Namespace Naming</a> guidelines for how to choose the namespace for the client types.</p>

<h4 id="dotnet-client-ctor">Service Client Constructors</h4>

<p><a href="#dotnet-client-constructor-minimal" name="dotnet-client-constructor-minimal" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a minimal constructor that takes only the parameters required to connect to the service.</p>

<p>For example, you may use a connection string, or host name and authentication.  It should be easy to start using the client without extensive customization.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-client-constructor-no-default-params" name="dotnet-client-constructor-no-default-params" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use default parameters in the simplest constructor.</p>

<p><a href="#dotnet-client-constructor-overloads" name="dotnet-client-constructor-overloads" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide constructor overloads that allow specifying additional options such as credentials, a custom HTTP pipeline, or advanced configuration.</p>

<p>Custom pipeline and client-specific configuration are represented by an <code class="language-plaintext highlighter-rouge">options</code> parameter. The type of the parameter is typically a subclass of <code class="language-plaintext highlighter-rouge">ClientOptions</code> type, shown below.</p>

<h5 id="dotnet-usage-options">Using ClientOptions</h5>

<p><a href="#dotnet-http-pipeline-options" name="dotnet-http-pipeline-options" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name subclasses of <code class="language-plaintext highlighter-rouge">ClientOptions</code> by adding <em>Options</em> suffix to the name of the client type the options subclass is configuring.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// options for configuring ConfigurationClient</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClientOptions</span> <span class="p">:</span> <span class="n">ClientOptions</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">,</span> <span class="n">ConfigurationClientOptions</span> <span class="n">options</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If the options type can be shared by multiple client types, name it with a more general name, such as <code class="language-plaintext highlighter-rouge">&lt;library_name&gt;ClientOptions</code>.  For example, the <code class="language-plaintext highlighter-rouge">BlobClientOptions</code> class can be used by <code class="language-plaintext highlighter-rouge">BlobClient</code>, <code class="language-plaintext highlighter-rouge">BlobContainerClient</code>, and <code class="language-plaintext highlighter-rouge">BlobAccountClient</code>.</p>

<p><a href="#dotnet-options-no-default-constructor" name="dotnet-options-no-default-constructor" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  have a default constructor on the options type.</p>

<p>Each overload constructor should take at least <code class="language-plaintext highlighter-rouge">version</code> parameter to specify the service version. See <a href="#dotnet-service-version-option">Versioning</a> guidelines for details.</p>

<p>For example, the <code class="language-plaintext highlighter-rouge">ConfigurationClient</code> type and its public constructors look as follows:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">);</span>
    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">,</span> <span class="n">ConfigurationClientOptions</span> <span class="n">options</span><span class="p">);</span>
    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">,</span> <span class="n">TokenCredential</span> <span class="n">credential</span><span class="p">,</span> <span class="n">ConfigurationClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="dotnet-service-version-option">Service Versions</h5>

<p><a href="#dotnet-versioning-highest-api" name="dotnet-versioning-highest-api" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  call the highest supported service API version by default.</p>

<p><a href="#dotnet-versioning-select-api-version" name="dotnet-versioning-select-api-version" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  allow the consumer to explicitly select a supported service API version when instantiating the service client.</p>

<p>Use a constructor parameter called <code class="language-plaintext highlighter-rouge">version</code> on the client options type.</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">version</code> parameter must be the first parameter to all constructor overloads.</li>
  <li>The <code class="language-plaintext highlighter-rouge">version</code> parameter must be required, and default to the latest supported service version.</li>
  <li>The type of the <code class="language-plaintext highlighter-rouge">version</code> parameter must be <code class="language-plaintext highlighter-rouge">ServiceVersion</code>; an enum nested in the options type.</li>
  <li>The <code class="language-plaintext highlighter-rouge">ServiceVersion</code> enum must use explicit values starting from 1.</li>
  <li><code class="language-plaintext highlighter-rouge">ServiceVersion</code> enum value 0 is reserved. When 0 is passed into APIs, ArgumentException should be thrown.</li>
</ul>

<p>For example, the following is a code snippet from the <code class="language-plaintext highlighter-rouge">ConfigurationClientOptions</code>:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClientOptions</span> <span class="p">:</span> <span class="n">ClientOptions</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nf">ConfigurationClientOptions</span><span class="p">(</span><span class="n">ServiceVersion</span> <span class="n">version</span> <span class="p">=</span> <span class="n">ServiceVersion</span><span class="p">.</span><span class="n">V2019_05_09</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="p">==</span> <span class="k">default</span><span class="p">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">$"The service version </span><span class="p">{</span><span class="n">version</span><span class="p">}</span><span class="s"> is not supported by this library."</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">enum</span> <span class="n">ServiceVersion</span> <span class="p">{</span>
        <span class="n">V2019_05_09</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Third-party reusable libraries shouldn’t change behavior without an explicit decision by the developer.  When developing libraries that are based on the Azure SDK, lock the library to a specific service version to avoid changes in behavior.</div>

<p><a href="#dotnet-versioning-feature-flags" name="dotnet-versioning-feature-flags" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  force consumers to test service API versions to check support for a feature.  Use the <em>tester-doer</em> .NET pattern to implement feature flags, or use <code class="language-plaintext highlighter-rouge">Nullable&lt;T&gt;</code>.</p>

<p>For example, if the client library supports two service versions, only one of which can return batches, the consumer might write the following code:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">CanBatch</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Response</span><span class="p">&lt;</span><span class="n">SettingBatch</span><span class="p">&gt;</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetBatch</span><span class="p">(</span><span class="s">"some_key*"</span><span class="p">);</span>
    <span class="n">Guid</span><span class="p">?</span> <span class="n">Guid</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Guid</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="n">response1</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"some_key1"</span><span class="p">);</span>
    <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="n">response2</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"some_key2"</span><span class="p">);</span>
    <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="n">response3</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"some_key3"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="mocking">Mocking</h5>

<p><a href="#dotnet-client-constructor-for-mocking" name="dotnet-client-constructor-for-mocking" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide protected parameterless constructor for mocking.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="nf">ConfigurationClient</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-client-constructor-use-params" name="dotnet-client-constructor-use-params" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  reference virtual properties of the client class as parameters to other methods or constructors within the client constructor. This violates the <a href="https://docs.microsoft.com/dotnet/standard/design-guidelines/constructor">.NET Framework Constructor Design</a> because a field to which a virtual property refers may not be initialized yet, or a mocked virtual property may not be set up yet. Use parameters or local variables instead:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">ConfigurationRestClient</span> <span class="n">_client</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">ConfigurationClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ConnectionString</span> <span class="p">=</span> <span class="n">connectionString</span><span class="p">;</span>
        <span class="c1">// Use parameter below instead of the class-defined virtual property.</span>
        <span class="n">_client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ConfigurationRestClient</span><span class="p">(</span><span class="n">connectionString</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="kt">string</span> <span class="n">ConnectionString</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In mocks, using the virtual property instead of the parameter requires the property to be mocked to return the value before the constructor is called when the mock is created. In <a href="https://github.com/moq/moq4">Moq</a> this requires using the delegate parameter to create the mock, which may not be an obvious workaround.</p>

<p>See <a href="#dotnet-mocking">Support for Mocking</a> for details.</p>

<h4 id="dotnet-subclients">Subclients</h4>

<p>There are two categories of clients: <em>service clients</em> and their <em>subclients</em>. Service clients can be instantiated and <a href="#dotnet-client-naming">have the <code class="language-plaintext highlighter-rouge">Client</code> suffix</a>.  Subclients can only be created by calling factory methods on other clients (commonly on service clients) and do not have the client suffix.</p>

<p>As discussed above, the <a href="#dotnet-client">service client</a> is the entry point to the API for an Azure service – from it, library users can invoke all operations the service provides and can easily implement the most common scenarios.  Where it will simplify an API’s design, groups of service calls can be organized around smaller subclient types.</p>

<p><a href="#dotnet-service-client-entry-point" name="dotnet-service-client-entry-point" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use service clients to indicate the starting point(s) for the most common customer scenarios.</p>

<p><a href="#dotnet-use-subclients" name="dotnet-use-subclients" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  use subclients to group operations related to a service resource or functional area to improve API usability.</p>

<p>There are a variety of types of subclients.  These include:</p>

<ul>
  <li><em>Resource Clients</em>, which group methods bound to a specific resource, along with information about the resource.</li>
  <li><em>Operation Group Clients</em>, which are not bound to a resource but group related operations.  If referring to a specific resource, these would take a resource identifier as a parameter.</li>
  <li>Subclasses of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code>, which manage service calls related to <a href="#dotnet-longrunning">long running operations</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">Pageable&lt;T&gt;</code> types returned from <a href="#dotnet-paging">paging methods</a>, which manage service calls to retrieve pages of elements in a collection.</li>
</ul>

<p>For example, in the Azure Container Registry API, a <code class="language-plaintext highlighter-rouge">ContainerRegistryClient</code> service client provides an entry point for communicating with the service, and a <code class="language-plaintext highlighter-rouge">ContainerRepository</code> resource client organizes operations related to a specific repository resource:</p>

<pre><code class="language-C#">public class ContainerRegistryClient {
    // ...
    public virtual ContainerRepository GetRepository(string name);
}
 
public class ContainerRepository {
    protected ContainerRepository();
    public virtual string Name { get; }
    public virtual Response Delete(CancellationToken cancellationToken = default);
    public virtual Response&lt;ContainerRepositoryProperties&gt; GetProperties(CancellationToken cancellationToken = default);
    public virtual Response&lt;ContainerRepositoryProperties&gt; UpdateProperties(ContainerRepositoryProperties value, CancellationToken cancellationToken = default);
    // ...
}
</code></pre>

<p><code class="language-plaintext highlighter-rouge">ServiceBusSender</code> groups operations for sending messages to a specific entity with properties that identify that entity.</p>

<pre><code class="language-C#">    public class ServiceBusSender {
        protected ServiceBusSender();
        public virtual string EntityPath { get; }
        public virtual Task CancelScheduledMessageAsync(long sequenceNumber, CancellationToken cancellationToken = default);
        public virtual ValueTask&lt;ServiceBusMessageBatch&gt; CreateMessageBatchAsync(CancellationToken cancellationToken = default);
        public virtual Task&lt;long&gt; ScheduleMessageAsync(ServiceBusMessage message, DateTimeOffset scheduledEnqueueTime, CancellationToken cancellationToken = default);
        public virtual Task SendMessageAsync(ServiceBusMessage message, CancellationToken cancellationToken = default);
        // ...
    }
</code></pre>

<p><a href="#dotnet-subclient-factory-methods" name="dotnet-subclient-factory-methods" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide factory methods to create a subclient.</p>

<p><a href="#dotnet-subclient-factory-methods-suffix" name="dotnet-subclient-factory-methods-suffix" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  include a suffix the method that creates a subclient, according to the table below:</p>

<table>
  <thead>
    <tr>
      <th>Client Type</th>
      <th>Naming Convention</th>
      <th>Factory Method Naming Convention</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Service Client</td>
      <td><code class="language-plaintext highlighter-rouge">Client</code> Suffix</td>
      <td>Get&lt;client&gt;Client()</td>
    </tr>
    <tr>
      <td>Resource Client</td>
      <td>No Suffix</td>
      <td>Get&lt;resource&gt;()</td>
    </tr>
    <tr>
      <td>Operation Group Client</td>
      <td>No Suffix</td>
      <td>Get&lt;group&gt;Client()</td>
    </tr>
    <tr>
      <td><a href="#dotnet-longrunning">Long Running Operation</a></td>
      <td><code class="language-plaintext highlighter-rouge">Operation</code> Suffix</td>
      <td>(long LRO) <code class="language-plaintext highlighter-rouge">Start</code> prefix; (short LRO) no prefix</td>
    </tr>
    <tr>
      <td><a href="#dotnet-paging">Pageable</a></td>
      <td><code class="language-plaintext highlighter-rouge">Pageable&lt;T&gt;</code></td>
      <td>Get&lt;resource&gt;s</td>
    </tr>
  </tbody>
</table>

<p><a href="#dotnet-subclient-factory-methods-parameters" name="dotnet-subclient-factory-methods-parameters" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  take a resource identifier as a parameter to the resource client factory method.</p>

<p><a href="#dotnet-subclient-properties" name="dotnet-subclient-properties" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  expose resource identifiers as properties on the resource client.</p>

<p><a href="#dotnet-subclient-collections" name="dotnet-subclient-collections" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  place operations on collections of resources a separate subclient to avoid cluttering the parent client with too many methods.</p>

<p>While API usability is the primary reason for subclients, another motivating factor is resource efficiency.  <a href="https://devblogs.microsoft.com/azure-sdk/lifetime-management-and-thread-safety-guarantees-of-azure-sdk-net-clients/">Clients need to be cached</a>, so if the set of client instances is large or unlimited (in case the client takes a scoping parameter, like a hub, or a container), using subclients allows an application to cache the top level client and create instances of subclients on demand.  In addition, if there is an expensive shared resource (e.g. an AMQP connection), subclients are preferred, as they naturally lead to resource sharing.</p>

<p><a href="#dotnet-service-client-entry-point" name="dotnet-service-client-entry-point" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  use the <code class="language-plaintext highlighter-rouge">HttpPipeline</code> that belongs to the type providing the factory method to make network calls to the service from the subclient.  An exception to this might be if subclient needs different pipeline policies than the parent client.</p>

<p><a href="#dotnet-subclient-no-constructor" name="dotnet-subclient-no-constructor" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  provide a public constructor on a subclient.  Subclients are non-instantiable by design.</p>

<p><a href="#dotnet-subclient-mocking" name="dotnet-subclient-mocking" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a protected parameterless constructor on subclients for mocking.</p>

<h5 id="dotnet-choosing-client-types">Choosing between Service Clients and Subclients</h5>

<p>In many cases, an Azure SDK API should contain one service client and zero or more subclients.  Both service clients and subclients have <a href="#dotnet-client-methods">service methods</a>.  Consider adding more than one service client to the API in the following cases:</p>

<p><a href="#dotnet-service-client-multiple-target-customers" name="dotnet-service-client-multiple-target-customers" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  consider providing an additional service client in an API when the service has different common scenarios for multiple target users, such as a service administrator and an end-user of the entities the administrator creates.</p>

<p>For example, the Azure Form Recognizer library provides a <code class="language-plaintext highlighter-rouge">FormRecognizerClient</code> for application developers to read form fields in their applications, and a <code class="language-plaintext highlighter-rouge">FormTrainingClient</code> for data scientist customers to train the form recognition models.</p>

<p><a href="#dotnet-service-client-advanced-scenarios" name="dotnet-service-client-advanced-scenarios" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  consider providing an additional service client when a service has advanced scenarios you want to keep separate from the types that support the most common scenarios.  In this case, consider using a <code class="language-plaintext highlighter-rouge">.Specialized</code> namespace to contain the additional clients.</p>

<p>For example, the Azure Storage Blobs library provides a <code class="language-plaintext highlighter-rouge">BlockBlobClient</code> in the <code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs.Specialized</code> namespace that gives finer grained control of how blobs are uploaded.  For further discussion of designing APIs for advanced scenarios, please see the <a href="https://aka.ms/fxdg3">.NET Framework Guidelines</a> sections on progressive frameworks and the principle of layered architecture.</p>

<p><a href="#dotnet-service-client-direct-resource-urls" name="dotnet-service-client-direct-resource-urls" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  consider providing an additional service client for a service resource that is commonly referenced with a URL that points to it directly.  This will allow users to instantiate a client directly from the resource endpoint, without needing to parse the URL to obtain the root service endpoint.</p>

<p><a href="#dotnet-service-client-resource-hierarchy" name="dotnet-service-client-resource-hierarchy" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  consider providing additional service clients for each level in a resource hierarchy.  For service clients representing resources in a hierarchy, you should also provide a <code class="language-plaintext highlighter-rouge">&lt;parent&gt;.Get&lt;child&gt;Client(...)</code> method to retrieve the client for the named child.</p>

<p>For example, the Azure Storage service provides an account that contains zero or more containers, which in turn contain zero or more blobs. The Azure SDK storage library provides service clients for each level: <code class="language-plaintext highlighter-rouge">BlobServiceClient</code>, <code class="language-plaintext highlighter-rouge">BlobContainerClient</code>, and <code class="language-plaintext highlighter-rouge">BlobClient</code>.</p>

<pre><code class="language-C#">public class BlobServiceClient {
    // ...
    public virtual BlobContainerClient GetBlobContainerClient(string blobContainerName);
    // ...
}

public class BlobContainerClient {
    // ...
    public virtual BlobClient GetBlobClient(string blobName);
    // ...
}

public class BlobClient {
    // ...
}

</code></pre>

<h4 id="dotnet-client-methods">Service Methods</h4>

<p><em>Service methods</em> are the methods on the client that invoke operations on the service.</p>

<p>Here are the main service methods in the <code class="language-plaintext highlighter-rouge">ConfigurationClient</code>.  They meet all the guidelines that are discussed below.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">AddAsync</span><span class="p">(</span><span class="n">ConfigurationSetting</span> <span class="n">setting</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">Add</span><span class="p">(</span><span class="n">ConfigurationSetting</span> <span class="n">setting</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">SetAsync</span><span class="p">(</span><span class="n">ConfigurationSetting</span> <span class="n">setting</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">Set</span><span class="p">(</span><span class="n">ConfigurationSetting</span> <span class="n">setting</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">GetAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">SettingFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">default</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">SettingFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">default</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">DeleteAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">SettingFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">default</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="n">SettingFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">default</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="sync-and-async">Sync and Async</h5>

<p><a href="#dotnet-service-methods-sync-and-async" name="dotnet-service-methods-sync-and-async" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide both asynchronous and synchronous variants for all service methods.</p>

<p>Many developers want to port existing applications to the Cloud. These applications are often synchronous, and the cost of rewriting them to be asynchronous is usually prohibitive. Calling asynchronous APIs from synchronous methods can only be done through a technique called <a href="https://devblogs.microsoft.com/pfxteam/should-i-expose-synchronous-wrappers-for-asynchronous-methods/"><em>sync-over-async</em>, which can cause deadlocks</a>.  The Azure SDK provides synchronous APIs to minimize friction when porting existing application to Azure.</p>

<p><a href="#dotnet-service-methods-naming" name="dotnet-service-methods-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure that the names of the asynchronous and the synchronous variants differ only by the <em>Async</em> suffix.</p>

<h5 id="naming">Naming</h5>

<p>Most methods in Azure SDK libraries should be named following the typical .NET method naming conventions. The Azure SDK Design Guidelines add special conventions for methods that access and manipulate server resources.</p>

<p><a href="#general-client-standardize-verbs" name="general-client-standardize-verbs" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  use standard verbs for methods that access or manipulate server resources.</p>

<!-- The table data is in yaml format on _data/tables/net_standard_verbs -->

<div class="standard-verbs-table-container">
    <!-- Table Header -->
    <div class="standard-verbs-table-row">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-header standard-verbs-table-cell-verb">Verb</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-header">Parameters</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-header">Returns</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-header standard-verbs-table-cell-comments">
            Comments</div>
    </div>
    <!-- Table Rows -->
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Verb</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair standard-verbs-table-cell-verb">
            <p>Create</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Parameters</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>key, item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Returns</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>Created item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Comments</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair">
            <p>Creates a resource. Throws if the resource exists.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Verb</div>
        <div class="standard-verbs-table-cell  standard-verbs-table-cell-verb">
            <p>Set</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Parameters</div>
        <div class="standard-verbs-table-cell "><p>key, item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Returns</div>
        <div class="standard-verbs-table-cell ">
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Comments</div>
        <div class="standard-verbs-table-cell ">
            <p>Creates or replaces a resource.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Verb</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair standard-verbs-table-cell-verb">
            <p>Update</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Parameters</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>key, item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Returns</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Comments</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair">
            <p>Updates a resource. Throws if the resource does not exist. Update methods might take a parameter controlling whether the update is a replace, merge, or other specific semantics.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Verb</div>
        <div class="standard-verbs-table-cell  standard-verbs-table-cell-verb">
            <p>Get&lt;resource_name&gt;</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Parameters</div>
        <div class="standard-verbs-table-cell "><p>key</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Returns</div>
        <div class="standard-verbs-table-cell "><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Comments</div>
        <div class="standard-verbs-table-cell ">
            <p>Retrieves a resource. Throws if the resource does not exist.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Verb</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair standard-verbs-table-cell-verb">
            <p>Get&lt;resource_name_plural&gt;</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Parameters</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>key, item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Returns</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Comments</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair">
            <p>Retrieves one or more resources. Returns empty set if no resources found.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Verb</div>
        <div class="standard-verbs-table-cell  standard-verbs-table-cell-verb">
            <p>Delete</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Parameters</div>
        <div class="standard-verbs-table-cell "><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Returns</div>
        <div class="standard-verbs-table-cell "><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Comments</div>
        <div class="standard-verbs-table-cell ">
            <p>Deletes one or more resources, or no-op if the resources do not exist.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Verb</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair standard-verbs-table-cell-verb">
            <p>Remove</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Parameters</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>index, item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Returns</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair"><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header standard-verbs-table-cell-pair">
            Comments</div>
        <div class="standard-verbs-table-cell standard-verbs-table-cell-pair">
            <p>Remove a reference to a resource from a collection. This method doesn’t delete the actual resource, only the reference.</p>
</div>
    </div>
</div>

    
    
    
    
    <div class="standard-verbs-table-row">
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-verb">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Verb</div>
        <div class="standard-verbs-table-cell  standard-verbs-table-cell-verb">
            <p>&lt;resource_name&gt;Exists</p>

        </div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Parameters</div>
        <div class="standard-verbs-table-cell "><p>key</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Returns</div>
        <div class="standard-verbs-table-cell "><p>item</p>
</div>
    </div>
    <div class="standard-verbs-table-cell-container standard-verbs-table-cell-comments">
        <div class="standard-verbs-table-cell standard-verbs-table-cell-mobile-header ">
            Comments</div>
        <div class="standard-verbs-table-cell ">
            <p>Returns true if the resource exists, otherwise returns false.</p>
</div>
    </div>
</div>

    
    
</div>

<h5 id="cancellation">Cancellation</h5>

<p><a href="#dotnet-service-methods-cancellation" name="dotnet-service-methods-cancellation" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure all service methods, both asynchronous and synchronous, take an optional <code class="language-plaintext highlighter-rouge">CancellationToken</code> parameter called <em>cancellationToken</em> or, in case of protocol methods, an optional <code class="language-plaintext highlighter-rouge">RequestContext</code> parameter called <em>context</em>.</p>

<p>The token should be further passed to all calls that take a cancellation token. DO NOT check the token manually, except when running a significant amount of CPU-bound work within the library, e.g. a loop that can take more than a typical network call.</p>

<h5 id="mocking-1">Mocking</h5>

<p><a href="#dotnet-service-methods-virtual" name="dotnet-service-methods-virtual" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make service methods virtual.</p>

<p>Virtual methods are used to support mocking. See <a href="#dotnet-mocking">Support for Mocking</a> for details.</p>

<h5 id="return-types">Return Types</h5>

<p><a href="#dotnet-service-methods-response-sync" name="dotnet-service-methods-response-sync" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return <code class="language-plaintext highlighter-rouge">Response&lt;T&gt;</code> or <code class="language-plaintext highlighter-rouge">Response</code> from synchronous methods.</p>

<p><code class="language-plaintext highlighter-rouge">T</code> represents the content of the response, as described below.</p>

<p><a href="#dotnet-service-methods-response-async" name="dotnet-service-methods-response-async" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return <code class="language-plaintext highlighter-rouge">Task&lt;Response&lt;T&gt;&gt;</code> or <code class="language-plaintext highlighter-rouge">Task&lt;Response&gt;</code> from asynchronous methods that make network requests.</p>

<p>There are two possible return types from asynchronous methods: <code class="language-plaintext highlighter-rouge">Task</code> and <code class="language-plaintext highlighter-rouge">ValueTask</code>. Your code will be doing a network request in the majority of cases.  The <code class="language-plaintext highlighter-rouge">Task</code> variant is more appropriate for this use case. For more information, see <a href="https://devblogs.microsoft.com/dotnet/understanding-the-whys-whats-and-whens-of-valuetask/#user-content-should-every-new-asynchronous-api-return-valuetask--valuetasktresult">this blog post</a>.</p>

<p><code class="language-plaintext highlighter-rouge">T</code> represents the content of the response, as described below.</p>

<p>The <code class="language-plaintext highlighter-rouge">T</code> can be either an unstructured payload (e.g. bytes of a storage blob) or a <em>model type</em> representing deserialized response content.</p>

<p><a href="#dotnet-service-return-unstructured-type" name="dotnet-service-return-unstructured-type" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use one of the following return types to represent an unstructured payload:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">System.IO.Stream</code> - for large payloads</li>
  <li><code class="language-plaintext highlighter-rouge">byte[]</code> - for small payloads</li>
  <li><code class="language-plaintext highlighter-rouge">ReadOnlyMemory&lt;byte&gt;</code> - for slices of small payloads</li>
</ul>

<p><a href="#dotnet-service-return-model-type" name="dotnet-service-return-model-type" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return a <em>model type</em> if the content has a schema and can be deserialized.</p>

<p>For more information, see <a href="#dotnet-model-types">Model Types</a></p>

<h5 id="thread-safety">Thread Safety</h5>

<p><a href="#dotnet-service-methods-thread-safety" name="dotnet-service-methods-thread-safety" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  be thread-safe. All public members of the client type must be safe to call from multiple threads concurrently.</p>

<h4 id="dotnet-parameters">Service Method Parameters</h4>

<p>Service methods fall into two main groups when it comes to the number and complexity of parameters they accept:</p>

<ul>
  <li>Service Methods with Simple Inputs, <em>simple methods</em> for short</li>
  <li>Service Methods with Complex Inputs, <em>complex methods</em> for short</li>
</ul>

<p><em>Simple methods</em> are methods that take up to six parameters, with most of the parameters being simple BCL primitives. <em>Complex methods</em> are methods that take large number of parameters and typically correspond to REST APIs with complex request payloads.</p>

<p><em>Simple methods</em> should follow standard <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a> for parameter list and overload design.</p>

<p><em>Complex methods</em> should use <em>option parameter</em> to represent the request payload, and consider providing convenience simple overloads for most common scenarios.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerClient</span> <span class="p">{</span>

    <span class="c1">// simple service method</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">BlobInfo</span><span class="p">&gt;</span> <span class="nf">UploadBlob</span><span class="p">(</span><span class="kt">string</span> <span class="n">blobName</span><span class="p">,</span> <span class="n">Stream</span> <span class="n">content</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="c1">// complex service method</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">BlobInfo</span><span class="p">&gt;</span> <span class="nf">CreateBlob</span><span class="p">(</span><span class="n">BlobCreateOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="c1">// convinience overload[s]</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">BlobContainerInfo</span><span class="p">&gt;</span> <span class="nf">CreateBlob</span><span class="p">(</span><span class="kt">string</span> <span class="n">blobName</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">BlobCreateOptions</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">PublicAccessType</span> <span class="n">Access</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">Metadata</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">BlobContainerEncryptionScopeOptions</span> <span class="n">Encryption</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <em>Options</em> class is designed similarly to .NET custom attributes, where required service method parameters are modeled as <em>Options</em> class constructor parameters and get-only properties, and optional parameters are get-set properties.</p>

<p><a href="#dotnet-params-complex" name="dotnet-params-complex" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the <em>options</em> parameter pattern for complex service methods.</p>

<p><a href="#dotnet-params-complex" name="dotnet-params-complex" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  use the <em>options</em> parameter pattern for simple service methods that you expect to <code class="language-plaintext highlighter-rouge">grow</code> in the future.</p>

<p><a href="#dotnet-params-complex" name="dotnet-params-complex" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  add simple overloads of methods using the <em>options</em> parameter pattern.</p>

<p>If in common scenarios, users are likely to pass just a small subset of what the <em>options</em> parameter represents, consider adding an overload with a parameter list representing just this subset.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// main overload taking the options property bag</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">BlobInfo</span><span class="p">&gt;</span> <span class="nf">CreateBlob</span><span class="p">(</span><span class="n">BlobCreateOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="c1">// simple overload with a subset of parameters of the options bag</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">BlobContainerInfo</span><span class="p">&gt;</span> <span class="nf">CreateBlob</span><span class="p">(</span><span class="kt">string</span> <span class="n">blobName</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-params-options" name="dotnet-params-options" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  name the <em>option parameter</em> type with the ‘Options’ suffix.</p>

<h5 id="parameter-validation">Parameter Validation</h5>

<p>Service methods take two kinds of parameters: <em>service parameters</em> and <em>client parameters</em>. <em>Service parameters</em> are sent across the wire to the service as URL segments, query parameters, request header values, and request bodies (typically JSON or XML).  <em>Client parameters</em> are used solely within the client library and are not sent to the service; examples are path parameters, CancellationTokens or file paths.</p>

<p><a href="#dotnet-params-client-validation" name="dotnet-params-client-validation" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  validate client parameters.</p>

<p><a href="#dotnet-params-service-validation" name="dotnet-params-service-validation" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  validate service parameters.</p>

<p>Common parameter validations include null checks, empty string checks, and range checks. Let the service validate its parameters.</p>

<p><a href="#dotnet-params-test-devex" name="dotnet-params-test-devex" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  test the developer experience when invalid service parameters are passed in. Ensure clear error messages are generated by the client. If the developer experience is inadequate, work with the service team to correct the problem.</p>

<h4 id="dotnet-paging">Methods Returning Collections (Paging)</h4>

<p>Many Azure REST APIs return collections of data in batches or pages. A client library will expose such APIs as special enumerable types <code class="language-plaintext highlighter-rouge">Pageable&lt;T&gt;</code> or <code class="language-plaintext highlighter-rouge">AsyncPageable&lt;T&gt;</code>.
These types are located in the <code class="language-plaintext highlighter-rouge">Azure.Core</code> package.</p>

<p>For example, the configuration service returns collections of items as follows:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>

    <span class="c1">// asynchronous API returning a collection of items</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">AsyncPageable</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">GetConfigurationSettingsAsync</span><span class="p">(...);</span>

    <span class="c1">// synchronous variant of the method above</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Pageable</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">GetConfigurationSettings</span><span class="p">(...);</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-pagination-ienumerable" name="dotnet-pagination-ienumerable" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return <code class="language-plaintext highlighter-rouge">Pageable&lt;T&gt;</code> or <code class="language-plaintext highlighter-rouge">AsyncPageable&lt;T&gt;</code> from service methods that return a collection of items.</p>

<h4 id="dotnet-longrunning">Methods Invoking Long Running Operations</h4>

<p>Some service operations, known as <em>Long Running Operations</em> or <em>LROs</em> take a long time (up to hours or days). Such operations do not return their result immediately, but rather are started, their progress is polled, and finally the result of the operation is retrieved.</p>

<p>Azure.Core library exposes an abstract type called <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code>, which represents such LROs and supports operations for polling and waiting for status changes, and retrieving the final operation result.  A service method invoking a long running operation will return a subclass of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code>, as shown below.</p>

<p>Note that some older libraries use a slightly different, older LRO pattern. In the old pattern, LRO methods started with the prefix ‘Start’ and did not take the <code class="language-plaintext highlighter-rouge">WaitUntil</code> parameter. Such libraries are free to continue using this older pattern, or they can transition to the new pattern.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// the following type is located in Azure.Core</span>
<span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">Operation</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Operation</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">abstract</span> <span class="kt">bool</span> <span class="n">HasCompleted</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">abstract</span> <span class="kt">bool</span> <span class="n">HasValue</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="k">abstract</span> <span class="kt">string</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="k">abstract</span> <span class="n">T</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// throws if CachedStatus != Succeeded</span>
    <span class="k">public</span> <span class="k">abstract</span> <span class="n">Response</span> <span class="nf">GetRawResponse</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">abstract</span> <span class="n">Response</span> <span class="nf">UpdateStatus</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">abstract</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&gt;</span> <span class="nf">UpdateStatusAsync</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="nf">WaitForCompletion</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="nf">WaitForCompletion</span><span class="p">(</span><span class="n">TimeSpan</span> <span class="n">pollingInterval</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">);</span>	
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;&gt;</span> <span class="nf">WaitForCompletionAsync</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>	
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;&gt;</span> <span class="nf">WaitForCompletionAsync</span><span class="p">(</span><span class="n">TimeSpan</span> <span class="n">pollingInterval</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="c1">// inherited  members returning untyped responses</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span> <span class="nf">WaitForCompletionResponse</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>	
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span> <span class="nf">WaitForCompletionResponse</span><span class="p">(</span><span class="n">TimeSpan</span> <span class="n">pollingInterval</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>	
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&gt;</span> <span class="nf">WaitForCompletionResponseAsync</span><span class="p">(</span><span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>	
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">ValueTask</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&gt;</span> <span class="nf">WaitForCompletionResponseAsync</span><span class="p">(</span><span class="n">TimeSpan</span> <span class="n">pollingInterval</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Client libraries need to inherit from <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code> not only to implement all abstract members, but also to provide a constructor required to access an existing LRO (an LRO initiated by a different process).</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CopyFromUriOperation</span> <span class="p">:</span> <span class="n">Operation</span><span class="p">&lt;</span><span class="kt">long</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nf">CopyFromUriOperation</span><span class="p">(</span><span class="kt">string</span> <span class="n">id</span><span class="p">,</span> <span class="n">BlobBaseClient</span> <span class="n">client</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">BlobBaseClient</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">virtual</span> <span class="n">CopyFromUriOperation</span> <span class="nf">CopyFromUri</span><span class="p">(</span><span class="n">WaitUntil</span> <span class="n">wait</span><span class="p">,</span> <span class="p">...,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">CopyFromUriOperation</span><span class="p">&gt;</span> <span class="nf">CopyFromUriAsync</span><span class="p">(</span><span class="n">WaitUntil</span> <span class="n">wait</span><span class="p">,</span> <span class="p">...,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The following code snippet shows how an SDK consumer would use the <code class="language-plaintext highlighter-rouge">Operation</code> to poll for a response.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BlobBaseClient</span> <span class="n">client</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// automatic polling</span>
<span class="p">{</span>
    <span class="n">Operation</span><span class="p">&lt;</span><span class="kt">long</span><span class="p">&gt;</span> <span class="n">operation</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">CopyFromUri</span><span class="p">(</span><span class="n">WaitUntil</span><span class="p">.</span><span class="n">Completed</span><span class="p">,</span> <span class="p">...);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">operation</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// manual polling</span>
<span class="p">{</span>
    <span class="n">CopyFromUriOperation</span> <span class="n">operation</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">CopyFromUriAsync</span><span class="p">(</span><span class="n">WaitUntil</span><span class="p">.</span><span class="n">Started</span><span class="p">,</span> <span class="p">...);</span>
    <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">await</span> <span class="n">operation</span><span class="p">.</span><span class="nf">UpdateStatusAsync</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">operation</span><span class="p">.</span><span class="n">HasCompleted</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span> <span class="c1">// play some elevator music</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">operation</span><span class="p">.</span><span class="n">HasValue</span><span class="p">)</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">operation</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// saving operation ID</span>
<span class="p">{</span>
    <span class="n">CopyFromUriOperation</span> <span class="n">operation</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">CopyFromUriAsync</span><span class="p">(</span><span class="n">WaitUntil</span><span class="p">.</span><span class="n">Started</span><span class="p">,</span> <span class="p">...);</span>
    <span class="kt">string</span> <span class="n">operationId</span> <span class="p">=</span> <span class="n">operation</span><span class="p">.</span><span class="n">Id</span><span class="p">;</span>

    <span class="c1">// two days later</span>
    <span class="kt">var</span> <span class="n">operation2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CopyFromUriOperation</span><span class="p">(</span><span class="n">operationId</span><span class="p">,</span> <span class="n">client</span><span class="p">);</span>
    <span class="kt">long</span> <span class="k">value</span> <span class="p">=</span> <span class="k">await</span> <span class="n">operation2</span><span class="p">.</span><span class="nf">WaitForCompletionAsync</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-lro-return" name="dotnet-lro-return" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  return a subclass of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code> from LRO methods.</p>

<p><a href="#dotnet-lro-waituntil" name="dotnet-lro-waituntil" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  take <code class="language-plaintext highlighter-rouge">WaitUntil</code> as the first parameter to LRO methods.</p>

<p><a href="#dotnet-lro-subclass" name="dotnet-lro-subclass" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  add additional APIs to subclasses of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code>.
For example, some subclasses add a constructor allowing to create an operation instance from a previously saved operation ID. Also, some subclasses are more granular states besides the IsCompleted and HasValue states that are present on the base class.</p>

<p><a href="#dotnet-lro-constructor" name="dotnet-lro-constructor" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a public constructor on subclasses of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code> to allow users to access an existing LRO.</p>

<p><a href="#dotnet-lro-constructor-for-mocking" name="dotnet-lro-constructor-for-mocking" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide protected parameterless constructor for mocking in subclasses of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CopyFromUriOperation</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="nf">CopyFromUriOperation</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-lro-mocking-properties" name="dotnet-lro-mocking-properties" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make all properties virtual to allow mocking.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CopyFromUriOperation</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Uri</span> <span class="n">SourceUri</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="conditional-request-methods">Conditional Request Methods</h5>

<p>Some services support conditional requests that are used to implement optimistic concurrency control. In Azure, optimistic concurency is typically implemented using If-Match headers and ETags. See <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/concurrency-manage?tabs=dotnet">Managing Concurrency in Blob Storage</a> as a good example.</p>

<p><a href="#dotnet-conditional-etag" name="dotnet-conditional-etag" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use Azure.Core ETag to represent ETags.</p>

<p><a href="#dotnet-conditional-matchcondition" name="dotnet-conditional-matchcondition" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  take <a href="https://docs.microsoft.com/en-us/dotnet/api/azure.matchconditions?view=azure-dotnet">MatchConditions</a>, <a href="https://docs.microsoft.com/en-us/dotnet/api/azure.requestconditions?view=azure-dotnet">RequestConditions</a>, (or a custom subclass) as a parameter to conditional service call methods.</p>

<p>TODO: more guidelines comming. see https://github.com/Azure/azure-sdk/issues/2154</p>

<h3 id="supporting-types">Supporting Types</h3>

<p>In addition to service client types, Azure SDK APIs provide and use other supporting types as well.</p>

<h4 id="dotnet-model-types">Model Types</h4>

<p>This section describes guidelines for the design <em>model types</em> and all their transitive closure of public dependencies (i.e. the <em>model graph</em>).  A model type is a representation of a REST service’s resource.</p>

<p>For example, review the configuration service <em>model type</em> below:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ConfigurationSetting</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="kt">string</span> <span class="k">value</span><span class="p">,</span> <span class="kt">string</span> <span class="n">label</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">ContentType</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ETag</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">internal</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Key</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Label</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">DateTimeOffset</span> <span class="n">LastModified</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">internal</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">Locked</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">internal</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">Tags</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="n">ConfigurationSetting</span> <span class="n">other</span><span class="p">);</span>

    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">);</span>
    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">();</span>
    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This model is returned from service methods as follows:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConfigurationClient</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;&gt;</span> <span class="nf">GetAsync</span><span class="p">(...);</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="nf">Get</span><span class="p">(...);</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-service-return-model-public-getters" name="dotnet-service-return-model-public-getters" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure model public properties are get-only if they aren’t intended to be changed by the user.</p>

<p>Most output-only models can be fully read-only. Models that are used as both outputs and inputs (i.e. received from and sent to the service) typically have a mixture of read-only and read-write properties.</p>

<p>For example, the <code class="language-plaintext highlighter-rouge">Locked</code> property of <code class="language-plaintext highlighter-rouge">ConfigurationSetting</code> is controlled by the service.  It shouldn’t be changed by the user.  The <code class="language-plaintext highlighter-rouge">ContentType</code> property, by contrast, can be modified by the user.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ConfigurationSetting</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">ContentType</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">Locked</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">internal</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Ensure you include an internal setter to allow for deserialization.  For more information, see <a href="/azure-sdk/dotnet_implementation.html#dotnet-usage-json">JSON Serialization</a>.</p>

<p><a href="#dotnet-service-models-prefer-structs" name="dotnet-service-models-prefer-structs" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure model types are structs, if they meet the criteria for being structs.</p>

<p>Good candidates for struct are types that are small and immutable, especially if they are often stored in arrays. See <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a> for details.</p>

<p><a href="#dotnet-service-models-basic-data-interfaces" name="dotnet-service-models-basic-data-interfaces" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  implement basic data type interfaces on model types, per <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a>.</p>

<p>For example, implement <code class="language-plaintext highlighter-rouge">IEquatable&lt;T&gt;</code>, <code class="language-plaintext highlighter-rouge">IComparable&lt;T&gt;</code>, <code class="language-plaintext highlighter-rouge">IEnumerable&lt;T&gt;</code>, etc. if applicable.</p>

<p><a href="#dotnet-service-return-model-collections" name="dotnet-service-return-model-collections" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  use the following collection types for properties of model types:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">IReadOnlyList&lt;T&gt;</code> and <code class="language-plaintext highlighter-rouge">IList&lt;T&gt;</code> for most collections</li>
  <li><code class="language-plaintext highlighter-rouge">IReadOnlyDictionary&lt;T&gt;</code> and <code class="language-plaintext highlighter-rouge">IDictionary&lt;T&gt;</code> for lookup tables</li>
  <li><code class="language-plaintext highlighter-rouge">T[]</code>, <code class="language-plaintext highlighter-rouge">Memory&lt;T&gt;</code>, and <code class="language-plaintext highlighter-rouge">ReadOnlyMemory&lt;T&gt;</code> when low allocations and performance are critical</li>
</ul>

<p>Note that this guidance does not apply to input parameters. Input parameters representing collections should follow standard <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a>, e.g. use <code class="language-plaintext highlighter-rouge">IEnumerable&lt;T&gt;</code> is allowed.
Also, this guidance does not apply to return types of service method calls. These should be using <code class="language-plaintext highlighter-rouge">Pageable&lt;T&gt;</code> and <code class="language-plaintext highlighter-rouge">AsyncPageable&lt;T&gt;</code> discussed in <a href="#dotnet-paging">Methods Returning Collections</a>.</p>

<p><a href="#dotnet-service-models-namespace" name="dotnet-service-models-namespace" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  place output model types in <em>.Models</em> subnamespace to avoid cluttering the main namespace with too many types.</p>

<p>It is important for the main namespace of a client library to be clutter free. Some client libraries have a relatively small number of model types, and these should keep the model types in the main namespace. For example, model types of <code class="language-plaintext highlighter-rouge">Azure.Data.AppConfiguration</code> package are in the main namespace. On the other hand, model types of <code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs</code> package are in <em>.Models</em> subnamespace.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nn">Azure.Storage.Blobs</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BlobClient</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BlobClientOptions</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
<span class="k">namespace</span> <span class="nn">Azure.Storage.Blobs.Models</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerItem</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerProperties</span> <span class="p">{</span> <span class="p">...}</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-service-editor-browsable-state" name="dotnet-service-editor-browsable-state" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  apply the <code class="language-plaintext highlighter-rouge">[EditorBrowsable(EditorBrowsableState.Never)]</code> attribute to methods on the model type that the user isn’t meant to call.</p>

<p>Adding this attribute will hide the methods from being shown with IntelliSense.  A user will almost never call <code class="language-plaintext highlighter-rouge">GetHashCode()</code> directly.  <code class="language-plaintext highlighter-rouge">Equals(object)</code> is almost never called if the type implements <code class="language-plaintext highlighter-rouge">IEquatable&lt;T&gt;</code> (which is preferred).  Hide the <code class="language-plaintext highlighter-rouge">ToString()</code> method if it isn’t overridden.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ConfigurationSetting</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">);</span>
    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Unlike service clients, model types aren’t required to be thread-safe, as they’re rarely shared between threads.</div>

<p><a href="#dotnet-models-in-mocks" name="dotnet-models-in-mocks" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  ensure all model types can be used in mocks.</p>

<p>In practice, you need to provide public APIs to construct <em>model graphs</em>. See <a href="#dotnet-mocking">Support for Mocking</a> for details.</p>

<h5 id="model-type-naming">Model Type Naming</h5>

<p>TODO: issue #2298</p>

<h4 id="enumerations">Enumerations</h4>

<p><a href="#dotnet-enums" name="dotnet-enums" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use an <code class="language-plaintext highlighter-rouge">enum</code> for parameters, properties, and return types when values are known.</p>

<p><a href="#dotnet-enums-exception" name="dotnet-enums-exception" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  use a <code class="language-plaintext highlighter-rouge">readonly struct</code> in place of an <code class="language-plaintext highlighter-rouge">enum</code> that declares well-known fields but can contain unknown values returned from the service, or user-defined values passed to the service.</p>

<p>See <a href="/azure-sdk/dotnet_implementation.html#dotnet-enums">enumeration-like structure documentation</a> for implementation details.</p>

<h4 id="dotnet-commontypes">Using Azure Core Types</h4>

<p>The <code class="language-plaintext highlighter-rouge">Azure.Core</code> package provides common functionality for client libraries.  Documentation and usage examples can be found in the <a href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/core/Azure.Core">azure/azure-sdk-for-net</a> repository.</p>

<h4 id="using-primitive-types">Using Primitive Types</h4>

<p><a href="#dotnet-primitives-etag" name="dotnet-primitives-etag" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">Azure.ETag</code> to represent ETags.</p>

<p>The <code class="language-plaintext highlighter-rouge">Azure.ETag</code> type is located in <code class="language-plaintext highlighter-rouge">Azure.Core</code> package.</p>

<p><a href="#dotnet-primitives-uri" name="dotnet-primitives-uri" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">System.Uri</code> to represent URIs.</p>

<h3 id="dotnet-errors">Exceptions</h3>

<p>In .NET, throwing exceptions is how we communicate to library consumers that the services returned an error.</p>

<p><a href="#dotnet-errors-response-failed" name="dotnet-errors-response-failed" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  throw <code class="language-plaintext highlighter-rouge">RequestFailedException</code> or its subtype when a service method fails with non-success status code.</p>

<p>The exception is available in <code class="language-plaintext highlighter-rouge">Azure.Core</code> package:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">RequestFailedException</span> <span class="p">:</span> <span class="n">Exception</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nf">RequestFailedException</span><span class="p">(</span><span class="n">Response</span> <span class="n">response</span><span class="p">);</span>
    <span class="k">public</span> <span class="nf">RequestFailedException</span><span class="p">(</span><span class="n">Response</span> <span class="n">response</span><span class="p">,</span> <span class="n">Exception</span> <span class="n">innerException</span><span class="p">);</span>
    <span class="k">public</span> <span class="nf">RequestFailedException</span><span class="p">(</span><span class="n">Response</span> <span class="n">response</span><span class="p">,</span> <span class="n">Exception</span> <span class="n">innerException</span><span class="p">,</span> <span class="n">RequestFailedDetailsParser</span> <span class="n">detailsParser</span><span class="p">);</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">Status</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The exception message will be formed from the passed in <code class="language-plaintext highlighter-rouge">Response</code> content. For example:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Status</span> <span class="p">!=</span> <span class="m">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RequestFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-errors-use-response-failed-when-possible" name="dotnet-errors-use-response-failed-when-possible" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">RequestFailedException</code> or one of its subtypes where possible.</p>

<p><a href="#dotnet-request-failed-details-parser" name="dotnet-request-failed-details-parser" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide <code class="language-plaintext highlighter-rouge">RequestFailedDetailsParser</code> for non-standard error formats.</p>

<p>If customization is required to parse the response content, e.g. because the service does not adhere to the standard error format as represented by the <code class="language-plaintext highlighter-rouge">ResponseError</code> type, libraries can must implement a <code class="language-plaintext highlighter-rouge">RequestFailedDetailsParser</code> and pass the parser into the construction of the <code class="language-plaintext highlighter-rouge">HttpPipeline</code> via the <code class="language-plaintext highlighter-rouge">HttpPipelineOptions</code> type. If more granular control is required than associating the parser per pipeline, there is a constructor of <code class="language-plaintext highlighter-rouge">RequestFailedException</code> that takes a <code class="language-plaintext highlighter-rouge">RequestFailedDetailsParser</code> that may be used.</p>

<p>Don’t introduce new exception types unless there’s a programmatic scenario for handling the new exception that’s different than <code class="language-plaintext highlighter-rouge">RequestFailedException</code></p>

<h3 id="dotnet-authentication">Authentication</h3>

<p>The client library consumer should construct a service client using just the constructor.  After construction, service methods can successfully invoke service operations.  The constructor parameters must take all parameters required to create a functioning client, including all information needed to authenticate with the service.</p>

<p>The general constructor pattern refers to <em>binding parameters</em>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// simple constructors</span>
<span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">simple_binding_parameters</span><span class="p">&gt;);</span>
<span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">simple_binding_parameters</span><span class="p">&gt;,</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="n">ClientOptions</span> <span class="n">options</span><span class="p">);</span>

<span class="c1">// 0 or more advanced constructors</span>
<span class="k">public</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="nf">Client</span><span class="p">(&lt;</span><span class="n">advanced_binding_parameters</span><span class="p">&gt;,</span> <span class="p">&lt;</span><span class="n">service_name</span><span class="p">&gt;</span><span class="n">ClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">);</span>
</code></pre></div></div>

<p>Typically, <em>binding parameters</em> would include a URI to the service endpoint and authorization credentials. For example, the blob service client can be bound using any of:</p>

<ul>
  <li>a connection string (which contains both endpoint information and credentials),</li>
  <li>an endpoint (for anonymous access),</li>
  <li>an endpoint and credentials (for authenticated access).</li>
</ul>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// hello world constructors using the main authentication method on the service's Azure Portal (typically a connection string)</span>
<span class="c1">// we don't want to use default parameters here; all other overloads can use default parameters</span>
<span class="k">public</span> <span class="nf">BlobServiceClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">)</span>
<span class="k">public</span> <span class="nf">BlobServiceClient</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">,</span> <span class="n">BlobClientOptions</span> <span class="n">options</span><span class="p">)</span>

<span class="c1">// anonymous access</span>
<span class="k">public</span> <span class="nf">BlobServiceClient</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">,</span> <span class="n">BlobClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">)</span>

<span class="c1">// using credential types</span>
<span class="k">public</span> <span class="nf">BlobServiceClient</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">,</span> <span class="n">StorageSharedKeyCredential</span> <span class="n">credential</span><span class="p">,</span> <span class="n">BlobClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">)</span>
<span class="k">public</span> <span class="nf">BlobServiceClient</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">,</span> <span class="n">TokenCredential</span> <span class="n">credential</span><span class="p">,</span> <span class="n">BlobClientOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="k">default</span><span class="p">)</span>
</code></pre></div></div>

<p><a href="#dotnet-auth-azure-core" name="dotnet-auth-azure-core" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  use credential types provided in the <code class="language-plaintext highlighter-rouge">Azure.Core</code> package.</p>

<p>Currently, <code class="language-plaintext highlighter-rouge">Azure.Core</code> provides <code class="language-plaintext highlighter-rouge">TokenCredential</code> for OAuth style tokens, including MSI credentials.</p>

<p><a href="#dotnet-auth-rolling-credentials" name="dotnet-auth-rolling-credentials" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  support changing credentials without having to create a new client instance.</p>

<p>Credentials passed to the constructors must be read before every request (for example, by calling <code class="language-plaintext highlighter-rouge">TokenCredential.GetToken()</code>).</p>

<p><a href="#dotnet-auth-arch-review" name="dotnet-auth-arch-review" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  contact <a href="https://github.com/azure/azure-sdk/issues">adparch</a> if you want to add a new credential type.</p>

<p><a href="#dotnet-auth-connection-strings" name="dotnet-auth-connection-strings" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  offer a way to create credentials from a connection string only if the service offers a connection string via the Azure portal.</p>

<p>Don’t ask users to compose connection strings manually if they aren’t available through the Azure portal. Connection strings are immutable.  It’s impossible for an application to roll over credentials when using connection strings.</p>

<h3 id="dotnet-namespace-naming">Namespaces</h3>

<p><a href="#dotnet-namespaces-naming" name="dotnet-namespaces-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  adhere to the following scheme when choosing a namespace: <code class="language-plaintext highlighter-rouge">Azure.&lt;group&gt;.&lt;service&gt;[.&lt;feature&gt;]</code></p>

<p>For example, <code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs</code>.</p>

<p><a href="#dotnet-namespaces-approved-list" name="dotnet-namespaces-approved-list" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use one of the following pre-approved namespace groups:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Azure.AI</code> for artificial intelligence, including machine learning</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Analytics</code> for client libraries that gather or process analytics data</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Communication</code> communication services</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Core</code> for libraries that aren’t service specific</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Cosmos</code> for object database technologies</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Data</code> for client libraries that handle databases or structured data stores</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.DigitalTwins</code> for DigitalTwins related technologies</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Identity</code> for authentication and authorization client libraries</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.IoT</code> for client libraries dealing with the Internet of Things.
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">Iot</code> for Pascal cased compound words, such as <code class="language-plaintext highlighter-rouge">IotClient</code>, otherwise follow language conventions.</li>
      <li>Do not use <code class="language-plaintext highlighter-rouge">IoT</code> more than once in a namespace.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Media</code> for client libraries that deal with audio, video, or mixed reality</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Messaging</code> for client libraries that provide messaging services, such as push notifications or pub-sub.</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Monitor</code> for observability and Azure Monitor client libraries.</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.ResourceManager.[ResourceProvider]</code> for management plane client libraries for a given resource provider.
    <ul>
      <li>For example the compute management plane namespace would be Azure.ResourceManager.Compute.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Search</code> for search technologies</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Security</code> for client libraries dealing with security</li>
  <li><code class="language-plaintext highlighter-rouge">Azure.Storage</code> for client libraries that handle unstructured data</li>
</ul>

<p>If you think a new group should be added to the list, contact <a href="https://github.com/azure/azure-sdk/issues">adparch</a>.</p>

<p><a href="#dotnet-namespaces-registration" name="dotnet-namespaces-registration" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  register all namespaces with <a href="https://github.com/azure/azure-sdk/issues">adparch</a>.</p>

<p><a href="#dotnet-namespaces-location" name="dotnet-namespaces-location" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  place APIs in the second-level namespace (directly under the <code class="language-plaintext highlighter-rouge">Azure</code> namespace).</p>

<p><a href="#dotnet-namespaces-models" name="dotnet-namespaces-models" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  consider placing model types in a <code class="language-plaintext highlighter-rouge">.Models</code> namespace if number of model types is or might become large.</p>

<p>See <a href="#dotnet-service-models-namespace">model type guidelines</a> for details.</p>

<h3 id="dotnet-mocking">Support for Mocking</h3>

<p>All client libraries must support mocking to enable non-live testing of service clients by customers.</p>

<p>Here is an example of how the <code class="language-plaintext highlighter-rouge">ConfigurationClient</code> can be mocked using <a href="https://github.com/moq/moq4">Moq</a> (a popular .NET mocking library):</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create a mock response</span>
<span class="kt">var</span> <span class="n">mockResponse</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">Response</span><span class="p">&gt;();</span>
<span class="c1">// Create a client mock</span>
<span class="kt">var</span> <span class="n">mock</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">ConfigurationClient</span><span class="p">&gt;();</span>
<span class="c1">// Setup client method</span>
<span class="n">mock</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"Key"</span><span class="p">,</span> <span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(),</span> <span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">DateTimeOffset</span><span class="p">&gt;(),</span> <span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">CancellationToken</span><span class="p">&gt;()))</span>
    <span class="p">.</span><span class="nf">Returns</span><span class="p">(</span><span class="k">new</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">ConfigurationSetting</span><span class="p">&gt;(</span><span class="n">mockResponse</span><span class="p">.</span><span class="n">Object</span><span class="p">,</span> <span class="n">ConfigurationModelFactory</span><span class="p">.</span><span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="s">"Key"</span><span class="p">,</span> <span class="s">"Value"</span><span class="p">)));</span>

<span class="c1">// Use the client mock</span>
<span class="n">ConfigurationClient</span> <span class="n">client</span> <span class="p">=</span> <span class="n">mock</span><span class="p">.</span><span class="n">Object</span><span class="p">;</span>
<span class="n">ConfigurationSetting</span> <span class="n">setting</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"Key"</span><span class="p">);</span>
<span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="s">"Value"</span><span class="p">,</span> <span class="n">setting</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
</code></pre></div></div>

<p>Review the <a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/appconfiguration/Azure.Data.AppConfiguration/samples/Sample7_MockClient.md">full sample</a> in the GitHub repository.</p>

<p><a href="#dotnet-mocking-constructor" name="dotnet-mocking-constructor" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide protected parameterless constructor for mocking.</p>

<p><a href="#dotnet-mocking-virtual-method" name="dotnet-mocking-virtual-method" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make all service methods virtual.</p>

<p><a href="#dotnet-mocking-virtual-properties" name="dotnet-mocking-virtual-properties" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make all properties virtual.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerClient</span> <span class="p">{</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">Uri</span> <span class="n">Uri</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-mocking-virtual-getclient-method" name="dotnet-mocking-virtual-getclient-method" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make methods returning other clients virtual.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerClient</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">BlobClient</span> <span class="nf">GetBlobClient</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-mocking-extensions" name="dotnet-mocking-extensions" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use instance methods instead of extension methods when defined in the same assembly. The instance methods are simpler to mock.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerClient</span>
<span class="p">{</span>
    <span class="c1">// This method is possible to mock</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="n">AppendBlobClient</span> <span class="nf">GetAppendBlobClient</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">BlobContainerClientExtensions</span>
<span class="p">{</span>
    <span class="c1">// This method is impossible to mock</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">AppendBlobClient</span> <span class="nf">GetAppendBlobClient</span><span class="p">(</span><span class="k">this</span> <span class="n">BlobContainerClient</span> <span class="n">containerClient</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-mocking-factory-builder" name="dotnet-mocking-factory-builder" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide factory or builder for constructing model graphs returned from virtual service methods.</p>

<p>Model types shouldn’t have public constructors.  Instances of the model are typically returned from the client library, and are not constructed by the consumer of the library.  Mock implementations need to create instances of model types.  Implement a static class called <code class="language-plaintext highlighter-rouge">&lt;service&gt;ModelFactory</code> in the same namespace as the model types:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ConfigurationModelFactory</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ConfigurationSetting</span> <span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="kt">string</span> <span class="k">value</span><span class="p">,</span> <span class="kt">string</span> <span class="n">label</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="kt">string</span> <span class="n">contentType</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="n">ETag</span> <span class="n">eTag</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="n">DateTimeOffset</span><span class="p">?</span> <span class="n">lastModified</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="kt">bool</span><span class="p">?</span> <span class="n">locked</span><span class="p">=</span><span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">SettingBatch</span> <span class="nf">SettingBatch</span><span class="p">(</span><span class="n">ConfigurationSetting</span><span class="p">[]</span> <span class="n">settings</span><span class="p">,</span> <span class="kt">string</span> <span class="n">link</span><span class="p">,</span> <span class="n">SettingSelector</span> <span class="n">selector</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="#dotnet-mocking-factory-builder-methods" name="dotnet-mocking-factory-builder-methods" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  hide older overloads and avoid ambiguity.</p>

<p>When read-only properties are added to models and factory methods must be added to optionally set these properties,
you must hide the previous method and remove all default parameter values to avoid ambiguity:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ConfigurationModelFactory</span> <span class="p">{</span>
    <span class="p">[</span><span class="nf">EditorBrowsable</span><span class="p">(</span><span class="n">EditorBrowsableState</span><span class="p">.</span><span class="n">Never</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ConfigurationSetting</span> <span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="kt">string</span> <span class="k">value</span><span class="p">,</span> <span class="kt">string</span> <span class="n">label</span><span class="p">,</span> <span class="kt">string</span> <span class="n">contentType</span><span class="p">,</span> <span class="n">ETag</span> <span class="n">eTag</span><span class="p">,</span> <span class="n">DateTimeOffset</span><span class="p">?</span> <span class="n">lastModified</span><span class="p">,</span> <span class="kt">bool</span><span class="p">?</span> <span class="n">locked</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="k">value</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">contentType</span><span class="p">,</span> <span class="n">eTag</span><span class="p">,</span> <span class="n">lastModified</span><span class="p">,</span> <span class="n">locked</span><span class="p">,</span> <span class="k">default</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ConfigurationSetting</span> <span class="nf">ConfigurationSetting</span><span class="p">(</span><span class="kt">string</span> <span class="n">key</span><span class="p">,</span> <span class="kt">string</span> <span class="k">value</span><span class="p">,</span> <span class="kt">string</span> <span class="n">label</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="kt">string</span> <span class="n">contentType</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="n">ETag</span> <span class="n">eTag</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="n">DateTimeOffset</span><span class="p">?</span> <span class="n">lastModified</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="kt">bool</span><span class="p">?</span> <span class="n">locked</span><span class="p">=</span><span class="k">default</span><span class="p">,</span> <span class="kt">int</span><span class="p">?</span> <span class="n">ttl</span><span class="p">=</span><span class="k">default</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="azure-sdk-library-design">Azure SDK Library Design</h2>

<h3 id="dotnet-packaging">Packaging</h3>

<p><a href="#dotnet-packaging-nuget" name="dotnet-packaging-nuget" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  package all components as NuGet packages.</p>

<p>If your client library is built by the Azure SDK engineering systems, all packaging requirements will be met automatically. Follow the <a href="https://docs.microsoft.com/dotnet/standard/library-guidance/nuget">.NET packaging guidelines</a> if you’re self-publishing. For Microsoft owned packages we need to support both windows (for windows dump diagnostics) and portable (for x-platform debugging) pdb formats which means you need to publish them to the Microsoft symbol server and not the Nuget symbol server which only supports portable pdbs.</p>

<p><a href="#dotnet-packaging-naming" name="dotnet-packaging-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name the package based on the name of the main namespace of the component.</p>

<p>For example, if the component is in the <code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs</code> namespace, the component DLL will be <code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs.dll</code> and the NuGet package will b<code class="language-plaintext highlighter-rouge">Azure.Storage.Blobs</code>``.</p>

<p><a href="#dotnet-packaging-granularity" name="dotnet-packaging-granularity" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  place small related components that evolve together in a single NuGet package.</p>

<p><a href="#dotnet-build-net-standard" name="dotnet-build-net-standard" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  build all libraries for <a href="https://docs.microsoft.com/dotnet/standard/net-standard">.NET Standard 2.0</a>.</p>

<p>Use the following target setting in the <code class="language-plaintext highlighter-rouge">.csproj</code> file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;TargetFramework&gt;</span>netstandard2.0<span class="nt">&lt;/TargetFramework&gt;</span>
</code></pre></div></div>

<p><a href="#dotnet-build-multi-targeting-api" name="dotnet-build-multi-targeting-api" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  define the same APIs for all <a href="https://learn.microsoft.com/dotnet/standard/frameworks">target framework monikers (TFMs)</a>.</p>

<p>You may multi-target client libraries to different <a href="https://learn.microsoft.com/dotnet/standard/frameworks">TFMs</a> but the public API must be the same for all targets including class, interface, parameter, and return types.</p>

<h4 id="common-libraries">Common Libraries</h4>

<p>There are occasions when common code needs to be shared between several client libraries. For example, a set of cooperating client libraries may wish to share a set of exceptions or models.</p>

<p><a href="#dotnet-commonlib-approval" name="dotnet-commonlib-approval" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  gain <a href="https://github.com/azure/azure-sdk/issues">Architecture Board</a> discuss how to design such common library.</p>

<h3 id="dotnet-versioning">Versioning</h3>

<h4 id="client-versions">Client Versions</h4>

<p><a href="#dotnet-versioning-backwards-compatibility" name="dotnet-versioning-backwards-compatibility" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  be 100% backwards compatible with older versions of the same package.</p>

<p>For detailed rules, see <a href="https://github.com/dotnet/runtime/blob/master/docs/coding-guidelines/breaking-change-rules.md">.NET Breaking Changes</a>.</p>

<p><a href="#dotnet-versioning-new-package" name="dotnet-versioning-new-package" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  introduce a new package (with new assembly names, new namespace names, and new type names) if you must do an API breaking change.</p>

<p>Breaking changes should happen rarely, if ever.  Register your intent to do a breaking change with <a href="https://github.com/azure/azure-sdk/issues">adparch</a>. You’ll need to have a discussion with the language architect before approval.</p>

<h5 id="dotnet-versionnumbers">Package Version Numbers</h5>

<p>Consistent version number scheme allows consumers to determine what to expect from a new version of the library.</p>

<p><a href="#dotnet-version-semver" name="dotnet-version-semver" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <em>MAJOR</em>.<em>MINOR</em>.<em>PATCH</em> format for the version of the library dll and the NuGet package.</p>

<p>Use <em>-beta._N</em> suffix for beta package versions. For example, <em>1.0.0-beta.2</em>.</p>

<p><a href="#dotnet-version-change-on-release" name="dotnet-version-change-on-release" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  change the version number of the client library when <strong>ANYTHING</strong> changes in the client library.</p>

<p><a href="#dotnet-version-patching" name="dotnet-version-patching" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  increment the patch version when fixing a bug.</p>

<p><a href="#dotnet-version-features-in-patch" name="dotnet-version-features-in-patch" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  include new APIs in a patch release.</p>

<p><a href="#dotnet-version-add-feature" name="dotnet-version-add-feature" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  increment the major or minor version when adding support for a service API version.</p>

<p><a href="#dotnet-version-add-api" name="dotnet-version-add-api" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  increment the major or minor version when adding a new method to the public API.</p>

<p><a href="#dotnet-version-major-changes" name="dotnet-version-major-changes" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  increment the major version when making large feature changes.</p>

<p><a href="#dotnet-version-change-on-release" name="dotnet-version-change-on-release" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  select a version number greater than the highest version number of any other released Track 1 package for the service in any other scope or language.</p>

<h3 id="dotnet-dependencies">Dependencies</h3>

<p><a href="#dotnet-dependencies-minimize" name="dotnet-dependencies-minimize" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  minimize dependencies outside of the .NET Standard and <code class="language-plaintext highlighter-rouge">Azure.Core</code> packages.</p>

<p><a href="#dotnet-dependencies-list" name="dotnet-dependencies-list" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  depend on any NuGet package except the following packages:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Azure.*</code> packages from the <a href="https://github.com/azure/azure-sdk-for-net">azure/azure-sdk-for-net</a> repository.</li>
  <li><code class="language-plaintext highlighter-rouge">System.Text.Json</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Microsoft.BCL.AsyncInterfaces</code>.</li>
  <li>packages produced by your own team.</li>
</ul>

<p>In the past, <a href="https://www.newtonsoft.com/json">JSON.NET</a>, aka Newtonsoft.Json, was commonly used for serialization and deserialization. Use the <a href="https://www.nuget.org/packages/System.Text.Json/">System.Text.Json</a>
package that is now a part of the .NET platform instead.</p>

<p><a href="#dotnet-dependencies-exposing" name="dotnet-dependencies-exposing" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  publicly expose types from dependencies unless the types follow these guidelines as well.</p>

<h3 id="native-code">Native Code</h3>

<p>Native dependencies introduce lots of complexities to .NET libraries and so they should be avoided.</p>

<p><a href="#dotnet-problems-too-many-types" name="dotnet-problems-too-many-types" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  native dependencies.</p>

<h3 id="dotnet-documentation">Documentation Comments</h3>

<p><a href="#dotnet-docs-document-everything" name="dotnet-docs-document-everything" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document every exposed (public or protected) type and member within your library’s code.</p>

<p><a href="#dotnet-docs-docstrings" name="dotnet-docs-docstrings" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <a href="https://docs.microsoft.com/dotnet/csharp/language-reference/language-specification/documentation-comments">C# documentation comments</a> for reference documentation.</p>

<p>See the <a href="/azure-sdk/general_documentation.html">documentation guidelines</a> for language-independent guidelines for how to provide good documentation.</p>

<h2 id="dotnet-repository">Repository Guidelines</h2>

<p><a href="#dotnet-general-repository" name="dotnet-general-repository" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  locate all source code and README in the <a href="https://github.com/azure/azure-sdk-for-net">azure/azure-sdk-for-net</a> GitHub repository.</p>

<p><a href="#dotnet-general-engsys" name="dotnet-general-engsys" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow Azure SDK engineering systems guidelines for working in the <a href="https://github.com/azure/azure-sdk-for-net">azure/azure-sdk-for-net</a> GitHub repository.</p>

<h3 id="documentation-style">Documentation Style</h3>

<p>TODO: issue #2338</p>

<h3 id="dotnet-repository-readme">README</h3>

<p><a href="#dotnet-docs-readme" name="dotnet-docs-readme" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  have a README.md file in the component root folder.</p>

<p>An example of a good <code class="language-plaintext highlighter-rouge">README.md</code> file can be found <a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/appconfiguration/Azure.Data.AppConfiguration/README.md">here</a>.</p>

<p><a href="#dotnet-docs-readme-consumer" name="dotnet-docs-readme-consumer" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  optimize the <code class="language-plaintext highlighter-rouge">README.md</code> for the consumer of the client library.</p>

<p>The contributor guide (<code class="language-plaintext highlighter-rouge">CONTRIBUTING.md</code>) should be a separate file linked to from the main component <code class="language-plaintext highlighter-rouge">README.md</code>.</p>

<h3 id="dotnet-samples">Samples</h3>

<p>Each client library should have a quickstart guide with code samples.  Developers like to learn about a library by looking at sample code; not by reading in-depth technology papers.</p>

<p><a href="#dotnet-samples-location" name="dotnet-samples-location" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  have usage samples in <code class="language-plaintext highlighter-rouge">samples</code> subdirectory of main library directory.</p>

<p>For a complete example, see the <a href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/appconfiguration/Azure.Data.AppConfiguration/samples">Configuration Service samples</a>.</p>

<p><a href="#dotnet-samples-readme" name="dotnet-samples-readme" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  have a <code class="language-plaintext highlighter-rouge">README.md</code> file with the following front matter:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">page_type</span><span class="pi">:</span> <span class="s">sample</span>
<span class="na">languages</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">csharp</span>
<span class="na">products</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">azure</span>
<span class="pi">-</span> <span class="s">azure-app-configuration</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Azure.Data.AppConfiguration samples for .NET</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Samples for the Azure.Data.AppConfiguration client library</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">README.md</code> file should be written as a getting started guide. See <a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/servicebus/Azure.Messaging.ServiceBus/README.md">the ServiceBus README</a> for a good example.</p>

<p><a href="#dotnet-samples-readme-links" name="dotnet-samples-readme-links" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  link to each of the samples files using a brief description as the link text.</p>

<p><a href="#dotnet-samples-naming" name="dotnet-samples-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  have a sample file called <code class="language-plaintext highlighter-rouge">Sample1_HelloWorld.md</code>. All other samples are ordered from simplest to most complex using the <code class="language-plaintext highlighter-rouge">Sample&lt;number&gt;_</code> prefix.</p>

<p><a href="#dotnet-sync-samples-naming" name="dotnet-sync-samples-naming" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use synchronous APIs in the <code class="language-plaintext highlighter-rouge">Sample1_HelloWorld.md</code> sample.  Add a second sample named <code class="language-plaintext highlighter-rouge">Sample1_HelloWorldAsync.md</code> that does the same thing as <code class="language-plaintext highlighter-rouge">Sample1_HelloWorld.md</code> using asynchronous code.</p>

<p><a href="#dotnet-samples-source-snippets" name="dotnet-samples-source-snippets" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">#region</code>s in source with a unique identifier starting with “Snippet:” like <code class="language-plaintext highlighter-rouge">Snippet:AzConfigSample1_CreateConfigurationClient</code>. This must be unique within the entire repo.</p>

<p><a href="#dotnet-samples-snippets" name="dotnet-samples-snippets" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  C# code fences with the corresponding <code class="language-plaintext highlighter-rouge">#region</code> name like so:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">C# Snippet:AzConfigSample1_CreateConfigurationClient
</span><span class="sb">var client = new ConfigurationClient(connectionString);</span>
<span class="p">```</span>
</code></pre></div></div>

<p><a href="#dotnet-samples-build" name="dotnet-samples-build" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make sure all the samples build and run as part of the CI process.</p>

<p>TODO: Update guidance on samples to reflect what we do in most places.</p>

<h2 id="dotnet-appendix-overlookedguidelines">Commonly Overlooked .NET API Design Guidelines</h2>

<p>Some <a href="https://aka.ms/fxdg3">.NET Framework Design Guidelines</a> have been notoriously overlooked in earlier Azure SDKs. This section serves as a way to highlight these guidelines.</p>

<p><a href="#dotnet-problems-too-many-types" name="dotnet-problems-too-many-types" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  have many types in the main namespace. Number of types is directly proportional to the perceived complexity of a library.</p>

<p><a href="#dotnet-problems-abstractions" name="dotnet-problems-abstractions" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use abstractions unless the Azure SDK both returns and consumes the abstraction.  An abstraction is either an interface or abstract class.</p>

<p><a href="#dotnet-problems-interfaces" name="dotnet-problems-interfaces" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use interfaces if you can use abstract classes. The only reasons to use an interface are: a) you need to “multiple-inherit”, b) you want structs to implement an abstraction.</p>

<p><a href="#dotnet-problems-generic-words" name="dotnet-problems-generic-words" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use generic words and terms for type names.  For example, do not use names like <code class="language-plaintext highlighter-rouge">OperationResponse</code> or <code class="language-plaintext highlighter-rouge">DataCollection</code>.</p>

<p><a href="#dotnet-problems-valid-values" name="dotnet-problems-valid-values" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  use parameter types where it’s not clear what valid values are supported.  For example, do not use strings but only accept certain values in the string.</p>

<p><a href="#dotnet-problems-empty-types" name="dotnet-problems-empty-types" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  have empty types (types with no members).</p>

<!-- Links -->


        
            <div class="tags">
                
            </div>
        
            

        </div>
    </div>
</div>
                </div>
                <!-- /.row -->

            </div>
            <!-- /.container -->
        </div>
        <!-- /#main -->
    </div>
    
    <!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-46"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62780441-46');
</script>

<!-- OLD SCRIPT
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-62780441-46','auto');ga('require','displayfeatures');ga('send','pageview');</script>
-->

    
    
    <!-- the app_insights gets auto inserted from the config file -->
<!-- For other configuration elements, see https://docs.microsoft.com/azure/azure-monitor/app/javascript#snippet-based-setup -->

<script type="text/javascript">
var sdkInstance="appInsightsSDK";window[sdkInstance]="appInsights";var aiName=window[sdkInstance],aisdk=window[aiName]||function(n){var o={config:n,initialize:!0},t=document,e=window,i="script";setTimeout(function(){var e=t.createElement(i);e.src=n.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",t.getElementsByTagName(i)[0].parentNode.appendChild(e)});try{o.cookie=t.cookie}catch(e){}function a(n){o[n]=function(){var e=arguments;o.queue.push(function(){o[n].apply(o,e)})}}o.queue=[],o.version=2;for(var s=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];s.length;)a("track"+s.pop());var r="Track",c=r+"Page";a("start"+c),a("stop"+c);var u=r+"Event";if(a("start"+u),a("stop"+u),a("addTelemetryInitializer"),a("setAuthenticatedUserContext"),a("clearAuthenticatedUserContext"),a("flush"),o.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},!(!0===n.disableExceptionTracking||n.extensionConfig&&n.extensionConfig.ApplicationInsightsAnalytics&&!0===n.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking)){a("_"+(s="onerror"));var p=e[s];e[s]=function(e,n,t,i,a){var r=p&&p(e,n,t,i,a);return!0!==r&&o["_"+s]({message:e,url:n,lineNumber:t,columnNumber:i,error:a}),r},n.autoExceptionInstrumented=!0}return o}(
{
    instrumentationKey:"5e03f19a-f5b4-4620-97d5-35707cec7fcb",
    autoTrackPageVisitTime:true,
    isCookieUseDisabled:true
}
);(window[aiName]=aisdk).queue&&0===aisdk.queue.length&&aisdk.trackPageView({});
</script>

    
</body>
<hr class="shaded"/>
<footer>
    <div class="container-fluid">
        <div class="row footer">
            <div class="col-lg-6 text-left pb-1">
           &copy;2023 Microsoft Azure. All rights reserved. 
 Site last generated: Sep 20, 2023
            </div>
            <div class="col-lg-6 text-right">
                <p><img src="/azure-sdk/images/company_logo.png" width="100px" alt="Microsoft logo"/></p>
            </div>
        </div>
    </div>
</footer>

</html>
