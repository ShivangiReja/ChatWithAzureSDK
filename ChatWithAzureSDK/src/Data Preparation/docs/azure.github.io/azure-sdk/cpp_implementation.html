<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" guidelines cpp">
<title>C++ Guidelines: Implementation | Azure SDKs</title>
<link rel="stylesheet" href="/azure-sdk/css/syntax.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/azure-sdk/css/modern-business.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/azure-sdk/css/boxshadowproperties.css" />
<link rel="stylesheet" href="/azure-sdk/css/theme-azure.css" />
<link rel="stylesheet" href="/azure-sdk/css/customstyles.css" />
<link rel="stylesheet" href="/azure-sdk/css/normalize.css">
<link rel="stylesheet" href="/azure-sdk/css/tipuesearch.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/azure-sdk/js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="/azure-sdk/js/toc.js"></script>
<script src="/azure-sdk/js/customscripts.js"></script>

<link rel="shortcut icon" href="/azure-sdk/images/azure-sdk-glyph.svg"/>
<link rel="alternate" type="application/rss+xml" title="Azure SDKs" href="/azure-sdk/feed.xml" />

    <script>
        $(document).ready(function () {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function (e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function () {
            $("#tg-sb-link").click(function () {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    
    <!-- Due to the page header height, all anchors uses top padding to offset the top possion and appear below the main header.
        If one requirement icon is just below another, the padding of the icon overlaps the one on top of it and block the clicking surface.
        The script below finds all requirements icons and adds z-index decrementally to place any previous icon on top of the next ones.
        The script runs after the page is completelly load (all content is downloaded).
      -->
    <script>
        $(window).bind("load", function () {
            let requeriments = $('.requirement');
            requeriments.each(function (index, element) {
                $(element).css("z-index", requeriments.length - index);
            });
        });
    </script>

</head>

<body>
    <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/azure-sdk/releases/latest/index.html"/>
                <span class="projectTitle"><img style="margin-top: -8px;" class="d-inline-block align-top" src="/azure-sdk/images/azure-sdk-glyph.svg" width="35" height="35" alt=""/> Azure SDKs</span>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> -->
                <!-- entries without drop-downs appear here -->





                
                
                
                <li><a href="https://aka.ms/azsdk/blog" rel="noopener">Blog</a></li>
                
                
                
                <li><a href="/azure-sdk/releases/latest/">Releases</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guidelines<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/azure-sdk/general_introduction.html" rel="noopener">General Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/dotnet_introduction.html" rel="noopener">.NET Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/java_introduction.html" rel="noopener">Java Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/python_design.html" rel="noopener">Python Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/typescript_introduction.html" rel="noopener">TypeScript Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/android_design.html" rel="noopener">Android Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/ios_design.html" rel="noopener">iOS Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/clang_design.html" rel="noopener">C Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/cpp_introduction.html" rel="noopener">C++ Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/golang_introduction.html" rel="noopener">Go Guidelines</a></li>
                        
                        <li><a href="/azure-sdk/policies_adoption.html" rel="noopener">GitHub Repos</a></li>
                        
                        <li><a href="/azure-sdk/policies_reviewprocess.html" rel="noopener">Policies</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API References<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        
                        <li><a href="https://aka.ms/net-docs" rel="noopener">.NET</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/java-docs" rel="noopener">Java</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/python-docs" rel="noopener">Python</a></li>
                        
                        
                        
                        <li><a href="https://aka.ms/js-docs" rel="noopener">TypeScript</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                
                
                <li>
                    
                        <a style="font-size: 1.666em !important" class="fa fa-github fa-2x" title="GitHub Link" href="https://github.com/azure/azure-sdk"></a>
                    
                </li>
                <li>
                    <a style="font-size: 1.666em !important" class="fa fa-twitter fa-2x" title="Twitter Link" href="https://twitter.com/AzureSDK"></a>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

    <!-- Page Content -->
    <div class="container-fluid" style="margin-top: 60px; min-height: calc(100vh - 50px);">
        <div id="main">
            <!-- Content Row -->
            <div class="row">
                
                
                <!-- Sidebar Column -->
                <div class="col-md-2 col-xs-12" id="tg-sb-sidebar">
                    

<div id="mysidebar" class="nav">

  <script src="/azure-sdk/js/tipuesearch_content.js"></script>
  <script src="/azure-sdk/js/tipuesearch_set.js"></script>
  <script src="/azure-sdk/js/tipuesearch.min.js"></script>

<p>
<form action="/azure-sdk/search.html" >
    <div class=" tipue_search_left"><img src="/azure-sdk/images/search.png" alt="Search Icon" class="tipue_search_icon"></div>
    <input type="text" class="form-control tipue_search_right" name="q" id="tipue_search_input" pattern=".{3,}" title="At least 3 characters" required placeholder="Search website">
</form>
</p>
<div style="clear: both;"></div>
  <ol>
    <li class="sidebarTitle"> </li>
    
      
        
        <li>
        
          
          <a title="General Guidelines" href="#">General Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/general_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="Terminology" href="/azure-sdk/general_terminology.html">Terminology</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/general_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/general_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/general_documentation.html">Documentation</a></li>
              
              
            
              
                <li><a title="Azure Core" href="/azure-sdk/general_azurecore.html">Azure Core</a></li>
              
              
            
              
                <li><a title="Contribution Guidelines" href="/azure-sdk/policies_opensource.html">Contribution Guidelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title=".NET Guidelines" href="#">.NET Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/dotnet_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/dotnet_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="Microsoft.Azure.Cosmos" href="https://docs.microsoft.com/dotnet/api/microsoft.azure.cosmos" target="_blank" rel="noopener">Microsoft.Azure.Cosmos</a></li>
                      
                    
                      
                        <li><a title="Azure.Messaging.EventHubs" href="https://azure.github.io/azure-sdk-for-net/eventhubs.html#azuremessagingeventhubs" target="_blank" rel="noopener">Azure.Messaging.EventHubs</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Keys" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultkeys" target="_blank" rel="noopener">Azure.Security.KeyVault.Keys</a></li>
                      
                    
                      
                        <li><a title="Azure.Security.KeyVault.Secrets" href="https://azure.github.io/azure-sdk-for-net/keyvault.html#azuresecuritykeyvaultsecrets" target="_blank" rel="noopener">Azure.Security.KeyVault.Secrets</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Blobs" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestorageblobs" target="_blank" rel="noopener">Azure.Storage.Blobs</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Files.Shares" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragefilesshares" target="_blank" rel="noopener">Azure.Storage.Files.Shares</a></li>
                      
                    
                      
                        <li><a title="Azure.Storage.Queues" href="https://azure.github.io/azure-sdk-for-net/storage.html#azurestoragequeues" target="_blank" rel="noopener">Azure.Storage.Queues</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Java Guidelines" href="#">Java Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/java_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/java_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Spring Guidelines" href="/azure-sdk/java_spring.html">Spring Guidelines</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-data-appconfiguration" href="https://azure.github.io/azure-sdk-for-java/appconfiguration.html#azure-data-appconfiguration" target="_blank" rel="noopener">azure-data-appconfiguration</a></li>
                      
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-java/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-messaging-eventhubs" href="https://azure.github.io/azure-sdk-for-java/eventhubs.html#azure-messaging-eventhubs" target="_blank" rel="noopener">azure-messaging-eventhubs</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-java/keyvault.html#azure-security-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-java/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Python Guidelines" href="#">Python Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/python_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/python_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/python_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-cosmos" href="https://azure.github.io/azure-sdk-for-python/cosmosdb.html#azure-cosmos" target="_blank" rel="noopener">azure-cosmos</a></li>
                      
                    
                      
                        <li><a title="azure-eventhub" href="https://azure.github.io/azure-sdk-for-python/eventhubs.html#azure-eventhub" target="_blank" rel="noopener">azure-eventhub</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-keys" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">azure-keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="azure-keyvault-secrets" href="https://azure.github.io/azure-sdk-for-python/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">azure-keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-file-share" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                      
                        <li><a title="azure-storage-queue" href="https://azure.github.io/azure-sdk-for-python/storage.html#azure-storage-queue" target="_blank" rel="noopener">azure-storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="TypeScript Guidelines" href="#">TypeScript Guidelines</a>
          
          <ul>
            
              
                <li><a title="Introduction" href="/azure-sdk/typescript_introduction.html">Introduction</a></li>
              
              
            
              
                <li><a title="API Design" href="/azure-sdk/typescript_design.html">API Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/typescript_implementation.html">Implementation</a></li>
              
              
            
              
                <li><a title="Documentation" href="/azure-sdk/typescript_documentation.html">Documentation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="@azure/cosmos" href="https://azure.github.io/azure-cosmos-js/" target="_blank" rel="noopener">@azure/cosmos</a></li>
                      
                    
                      
                        <li><a title="@azure/event-hubs" href="https://azure.github.io/azure-sdk-for-js/eventhubs.html#azure-event-hubs" target="_blank" rel="noopener">@azure/event-hubs</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-keys" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-keys" target="_blank" rel="noopener">@azure/keyvault-keys</a></li>
                      
                    
                      
                        <li><a title="@azure/keyvault-secrets" href="https://azure.github.io/azure-sdk-for-js/keyvault.html#azure-keyvault-secrets" target="_blank" rel="noopener">@azure/keyvault-secrets</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-blob" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-blob" target="_blank" rel="noopener">@azure/storage-blob</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-file-share" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-file-share" target="_blank" rel="noopener">@azure/storage-file-share</a></li>
                      
                    
                      
                        <li><a title="@azure/storage-queue" href="https://azure.github.io/azure-sdk-for-js/storage.html#azure-storage-queue" target="_blank" rel="noopener">@azure/storage-queue</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Android Guidelines" href="#">Android Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/android_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/android_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="iOS Guidelines" href="#">iOS Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/ios_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/ios_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C Guidelines" href="#">C Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/clang_design.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/clang_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="az_iot" href="https://azuresdkdocs.blob.core.windows.net/$web/c/az_iot/latest/index.html" target="_blank" rel="noopener">az_iot</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="C++ Guidelines" href="#">C++ Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/cpp_introduction.html">Design</a></li>
              
              
            
              
                <li class="active"><a title="Implementation" href="/azure-sdk/cpp_implementation.html">Implementation</a></li>
              
              
                <li class="subfolders">
                  <a title="API Documentation" href="#">API Documentation</a>
                  <ul>
                    
                      
                        <li><a title="azure-storage-blob" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-blob" target="_blank" rel="noopener">azure-storage-blob</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-datalake" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-datalake" target="_blank" rel="noopener">azure-storage-file-datalake</a></li>
                      
                    
                      
                        <li><a title="azure-storage-file-share" href="https://azure.github.io/azure-sdk-for-cpp/storage.html#azure-storage-file-shares" target="_blank" rel="noopener">azure-storage-file-share</a></li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Go Guidelines" href="#">Go Guidelines</a>
          
          <ul>
            
              
                <li><a title="Design" href="/azure-sdk/golang_introduction.html">Design</a></li>
              
              
            
              
                <li><a title="Implementation" href="/azure-sdk/golang_implementation.html">Implementation</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="GitHub Repos" href="#">GitHub Repos</a>
          
          <ul>
            
              
                <li><a title="Guidelines Contributions" href="/azure-sdk/policies_adoption.html">Guidelines Contributions</a></li>
              
              
            
              
                <li><a title="Repository structure" href="/azure-sdk/policies_repostructure.html">Repository structure</a></li>
              
              
            
              
                <li><a title="Repository branching" href="/azure-sdk/policies_repobranching.html">Repository branching</a></li>
              
              
            
              
                <li><a title="Pipelines" href="/azure-sdk/policies_pipelines.html">Pipelines</a></li>
              
              
            
          </ul>
        </li>
      
        
        <li>
        
          
          <a title="Policies" href="#">Policies</a>
          
          <ul>
            
              
                <li><a title="Review Process" href="/azure-sdk/policies_reviewprocess.html">Review Process</a></li>
              
              
            
              
                <li><a title="Releases" href="/azure-sdk/policies_releases.html">Releases</a></li>
              
              
            
              
                <li><a title="Release notes" href="/azure-sdk/policies_releasenotes.html">Release notes</a></li>
              
              
            
              
                <li><a title="Support" href="/azure-sdk/policies_support.html">Support</a></li>
              
              
            
          </ul>
        </li>
      
    
  </ol>
</div>

<script>$("li.active").parents('li').toggleClass("active");</script>

                </div>
                
                

                <!-- Content Column -->
                <div class="col-md-10 col-xs-12" id="tg-sb-content">
                    <div class="row">
    
    <div class="col-md-2 col-xs-12 content-right pull-right">
        
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 60);
  return false
})
  
});
</script>

<div id="toc"></div>

    </div>
    

    <div class="col-md-10  col-xs-12 content-center pull-left">
        <div class="post-header">
        <h1 class="post-title-main">C++ Guidelines: Implementation</h1>
        </div>
        
        
        
        <div class="post-content">
            
        
            
        
            <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>DRAFT:</b> The C++ Language guidelines are in DRAFT status</div>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h2 id="api-implementation">API Implementation</h2>

<p>This section describes guidelines for implementing Azure SDK client libraries. Please note that some of these guidelines are automatically enforced by code generation tools.</p>

<h3 id="service-client">Service Client</h3>

<p>When configuring your client library, particular care must be taken to ensure that the consumer of your client library can properly configure the connectivity to your Azure service both globally (along with other client libraries the consumer is using) and specifically with your client library.</p>

<blockquote>
  <p>TODO: add a brief mention of the approach to implementing service clients.</p>
</blockquote>

<h4 id="service-methods">Service Methods</h4>

<blockquote>
  <p>TODO: Briefly introduce that service methods are implemented via an <code class="language-plaintext highlighter-rouge">HttpPipeline</code> instance.  Mention that much of this is done for you using code generation.</p>
</blockquote>

<h5 id="httppipeline">HttpPipeline</h5>

<p>The following example shows a typical way of using <code class="language-plaintext highlighter-rouge">HttpPipeline</code> to implement a service call method. The <code class="language-plaintext highlighter-rouge">HttpPipeline</code> will handle common HTTP requirements such as the user agent, logging, distributed tracing, retries, and proxy configuration.</p>

<blockquote>
  <p>TODO: Show an example of invoking the pipeline</p>
</blockquote>

<h5 id="httppipelinepolicycustom-policies">HttpPipelinePolicy/Custom Policies</h5>

<p>The HTTP pipeline includes a number of policies that all requests pass through.  Examples of policies include setting required headers, authentication, generating a request ID, and implementing proxy authentication.  <code class="language-plaintext highlighter-rouge">HttpPipelinePolicy</code> is the base type of all policies (plugins) of the <code class="language-plaintext highlighter-rouge">HttpPipeline</code>. This section describes guidelines for designing custom policies.</p>

<blockquote>
  <p>TODO: Show how to customize a pipeline</p>
</blockquote>

<h4 id="service-method-parameters">Service Method Parameters</h4>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h5 id="parameter-validation">Parameter Validation</h5>

<p>In addition to <a href="/azure-sdk/cpp_introduction.html#cpp-parameters">general parameter validation guidelines</a>:</p>

<blockquote>
  <p>TODO: Briefly show common patterns for parameter validation</p>
</blockquote>

<h3 id="supporting-types">Supporting Types</h3>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h4 id="cpp-usage-json">Serialization</h4>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h5 id="json-serialization">JSON Serialization</h5>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h4 id="enumeration-like-structs">Enumeration-like Structs</h4>

<p>As described in <a href="/azure-sdk/cpp_introduction.html#cpp-enums">general enumeration guidelines</a>, you should use <code class="language-plaintext highlighter-rouge">enum</code> types whenever passing or deserializing a well-known set of values to or from the service.
There may be times, however, where a <code class="language-plaintext highlighter-rouge">struct</code> is necessary to capture an extensible value from the service even if well-known values are defined,
or to pass back to the service those same or other user-supplied values:</p>

<ul>
  <li>The value is retrieved and deserialized from service, and may contain a value not supported by the client library.</li>
  <li>The value is roundtripped: the value is retrieved and deserialized from the service, and may later be serialized and sent back to the server.</li>
</ul>

<blockquote>
  <p>TODO: Content in this section may need a new home.</p>
</blockquote>

<p><a href="#cpp-design-naming-enum" name="cpp-design-naming-enum" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name <code class="language-plaintext highlighter-rouge">enum class</code>es and enumerators using <strong>PascalCase</strong>.</p>

<p><a href="#cpp-design-naming-enum-class" name="cpp-design-naming-enum-class" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">enum class</code> for enumerations. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">enum</span> <span class="k">class</span> <span class="nc">PinState</span> <span class="p">{</span>
    <span class="n">Off</span><span class="p">,</span>
    <span class="n">On</span>
<span class="p">};</span></code></pre></figure>

<h4 id="using-azure-core-types">Using Azure Core Types</h4>

<h5 id="cpp-implement-operation">Implementing Subtypes of Operation&lt;T&gt;</h5>

<p>Subtypes of <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code> are returned from service client methods invoking long running operations.</p>

<p><a href="#cpp-lro-return" name="cpp-lro-return" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  check the value of <code class="language-plaintext highlighter-rouge">IsDone</code> in subclass implementations of <code class="language-plaintext highlighter-rouge">PollInternal</code> and <code class="language-plaintext highlighter-rouge">PollUntilDoneInternal</code> and immediately return the result of <code class="language-plaintext highlighter-rouge">GetRawResponse</code> if it is true.</p>

<blockquote>
  <p>TODO: Show an example implementation for Operation<T>.</T></p>
</blockquote>

<p><a href="#cpp-lro-return" name="cpp-lro-return" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  throw from methods on <code class="language-plaintext highlighter-rouge">Operation&lt;T&gt;</code> subclasses in the following scenarios.</p>

<ul>
  <li>If an underlying service operation call from <code class="language-plaintext highlighter-rouge">Poll</code> or <code class="language-plaintext highlighter-rouge">PollUntilDone</code> throws, re-throw <code class="language-plaintext highlighter-rouge">RequestFailedException</code> or its subtype.</li>
  <li>If the operation completes with a non-success result, throw <code class="language-plaintext highlighter-rouge">RequestFailedException</code> or its subtype from <code class="language-plaintext highlighter-rouge">Poll</code> or <code class="language-plaintext highlighter-rouge">PollUntilDone</code>.
    <ul>
      <li>Include any relevant error state information in the exception message.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>TODO: Show an example of how to handle errors.</p>
</blockquote>

<ul>
  <li>If the <code class="language-plaintext highlighter-rouge">Value</code> property is evaluated after the operation failed (<code class="language-plaintext highlighter-rouge">HasValue</code> is false and <code class="language-plaintext highlighter-rouge">IsDone</code> is true) throw the same exception as the one thrown when the operation failed.</li>
</ul>

<blockquote>
  <p>TODO: Show an example of how to throw in this case.</p>
</blockquote>

<ul>
  <li>If the <code class="language-plaintext highlighter-rouge">Value</code> property is evaluated before the operation is complete (<code class="language-plaintext highlighter-rouge">IsDone</code> is false) throw <code class="language-plaintext highlighter-rouge">TODO: What to throw</code>.
    <ul>
      <li>The exception message should be: “The operation has not yet completed.”</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>TODO: DO we want this behavior.<br />
TODO: Show an example of how to throw in this case.</p>
</blockquote>

<h3 id="sdk-feature-implementation">SDK Feature Implementation</h3>

<h4 id="configuration">Configuration</h4>

<blockquote>
  <p>TODO: This section needs to be driven by code in the Core library.</p>
</blockquote>

<h4 id="logging">Logging</h4>

<p>Request logging will be done automatically by the <code class="language-plaintext highlighter-rouge">HttpPipeline</code>.  If a client library needs to add custom logging, follow the <a href="/azure-sdk/cpp_implementation.html#general-logging">same guidelines</a> and mechanisms as the pipeline logging mechanism.  If a client library wants to do custom logging, the designer of the library must ensure that the logging mechanism is pluggable in the same way as the <code class="language-plaintext highlighter-rouge">HttpPipeline</code> logging policy.</p>

<p><a href="#dotnet-logging-follow-guidelines" name="dotnet-logging-follow-guidelines" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  follow <a href="/azure-sdk/cpp_implementation.html#general-logging">the logging section of the Azure SDK General Guidelines</a> if logging directly (as opposed to through the <code class="language-plaintext highlighter-rouge">HttpPipeline</code>).</p>

<h5 id="c-logging-specific-details">C++ Logging specific details</h5>

<blockquote>
  <p>TODO: This additional logging info may need a new home.</p>
</blockquote>

<p>Client libraries must support robust logging mechanisms so that the consumer can adequately diagnose issues with the method calls and quickly determine whether the issue is in the consumer code, client library code, or service.</p>

<p>In general, our advice to consumers of these libraries is to establish logging in their preferred manner at the <code class="language-plaintext highlighter-rouge">WARNING</code> level or above in production to capture problems with the application, and this level should be enough for customer support situations.  Informational or verbose logging can be enabled on a case-by-case basis to assist with issue resolution.</p>

<p><a href="#cpp-logging-use-azurecore" name="cpp-logging-use-azurecore" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the Azure Core library for logging.</p>

<p><a href="#cpp-logging-pluggable-logger" name="cpp-logging-pluggable-logger" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  support pluggable log handlers.</p>

<p><a href="#cpp-logging-console-logger" name="cpp-logging-console-logger" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  make it easy for a consumer to enable logging output to the console. The specific steps required to enable logging to the console must be documented.</p>

<p><a href="#cpp-logging-levels" name="cpp-logging-levels" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use one of the following log levels when emitting logs: <code class="language-plaintext highlighter-rouge">Verbose</code> (details), <code class="language-plaintext highlighter-rouge">Informational</code> (things happened), <code class="language-plaintext highlighter-rouge">Warning</code> (might be a problem or not), and <code class="language-plaintext highlighter-rouge">Error</code>.</p>

<p><a href="#cpp-logging-failure" name="cpp-logging-failure" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the <code class="language-plaintext highlighter-rouge">Error</code> logging level for failures that the application is unlikely to recover from (out of memory, etc.).</p>

<p><a href="#cpp-logging-warning" name="cpp-logging-warning" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the <code class="language-plaintext highlighter-rouge">Warning</code> logging level when a function fails to perform its intended task. This generally means that the function will raise an exception.  Do not include occurrences of self-healing events (for example, when a request will be automatically retried).</p>

<p><a href="#cpp-logging-slowlinks" name="cpp-logging-slowlinks" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  log the request and response (see below) at the <code class="language-plaintext highlighter-rouge">Warning</code> when a request/response cycle (to the start of the response body) exceeds a service-defined threshold.  The threshold should be chosen to minimize false-positives and identify service issues.</p>

<p><a href="#cpp-logging-info" name="cpp-logging-info" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the <code class="language-plaintext highlighter-rouge">Informational</code> logging level when a function operates normally.</p>

<p><a href="#cpp-logging-verbose" name="cpp-logging-verbose" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use the <code class="language-plaintext highlighter-rouge">Verbose</code> logging level for detailed troubleshooting scenarios. This is primarily intended for developers or system administrators to diagnose specific failures.</p>

<p><a href="#cpp-logging-no-sensitive-info" name="cpp-logging-no-sensitive-info" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  only log headers and query parameters that are in a service-provided “allow-list” of approved headers and query parameters.  All other headers and query parameters must have their values redacted.</p>

<p><a href="#cpp-logging-requests" name="cpp-logging-requests" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  log request line and headers as an <code class="language-plaintext highlighter-rouge">Informational</code> message. The log should include the following information:</p>

<ul>
  <li>The HTTP method.</li>
  <li>The URL.</li>
  <li>The query parameters (redacted if not in the allow-list).</li>
  <li>The request headers (redacted if not in the allow-list).</li>
  <li>An SDK provided request ID for correlation purposes.</li>
  <li>The number of times this request has been attempted.</li>
</ul>

<p><a href="#cpp-logging-responses" name="cpp-logging-responses" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  log response line and headers as an <code class="language-plaintext highlighter-rouge">Informational</code> message.  The format of the log should be the following:</p>

<ul>
  <li>The SDK provided request ID (see above).</li>
  <li>The status code.</li>
  <li>Any message provided with the status code.</li>
  <li>The response headers (redacted if not in the allow-list).</li>
  <li>The time period between the first attempt of the request and the first byte of the body.</li>
</ul>

<p><a href="#cpp-logging-cancellations" name="cpp-logging-cancellations" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  log an <code class="language-plaintext highlighter-rouge">Informational</code> message if a service call is cancelled.  The log should include:</p>

<ul>
  <li>The SDK provided request ID (see above).</li>
  <li>The reason for the cancellation (if available).</li>
</ul>

<p><a href="#cpp-logging-exceptions" name="cpp-logging-exceptions" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  log exceptions thrown as a <code class="language-plaintext highlighter-rouge">Warning</code> level message. If the log level set to <code class="language-plaintext highlighter-rouge">Verbose</code>, append stack trace information to the message.</p>

<h4 id="cpp-distributedtracing">Distributed Tracing</h4>

<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>DRAFT:</b> Guidance coming soon …</div>

<blockquote>
  <p>TODO: Add guidance for distributed tracing implementation</p>
</blockquote>

<h4 id="telemetry">Telemetry</h4>

<blockquote>
  <p>TODO: Add guidance regarding user agent strings</p>
</blockquote>

<h3 id="testing">Testing</h3>

<p>We believe testing is a part of the development process, so we expect unit and integration tests to be a part of the source code.  All components must be covered by automated testing, and developers should strive to test corner cases and main flows for every use case.</p>

<p>All code should contain, at least, requirements, unit tests, end-to-end tests, and samples.</p>

<p>Tests should be written using the [Google Test][] library.</p>

<h3 id="language-specific-other">Language-specific other</h3>

<p>Unlike many other programming languages, which have large runtimes, the C++ standard runtime is limited in functionality and scope. The standard library covers areas such as memory and string manipulation, standard input/output, floating point and others. However, many of the features required for modern applications and services; e.g. those required for networking and advanced memory management are not part of the standard library. Instead, many of those features are included in open source C++ libraries that are also cross-platform with good support for Windows, OSX and most Linux platforms. Because of that support and because Azure SDK implementations will need such functionality, it is expected that client libraries will take dependencies on these libraries.  Ensure the version matches to allow for compatibility when an application integrates multiple client libraries.</p>

<p><a href="#cpp-approved-dependencies" name="cpp-approved-dependencies" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  utilize the following libraries as needed for commonly required operations:</p>

<table>
  <thead>
    <tr>
      <th>Library</th>
      <th>Version</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>libxml2</td>
      <td>2.7.6</td>
      <td>XML parser - http://www.xmlsoft.org/</td>
    </tr>
    <tr>
      <td>gtest</td>
      <td>1.10.0</td>
      <td>Google Test - https://github.com/google/googletest/</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Note: None of the libraries in this list currently throw C++ exceptions; policy for propagation
of C++ exceptions from dependencies needs to be evaluated on a dependency-by-dependency basis.</p>
</blockquote>

<p><a href="#cpp-test-implicit-assign" name="cpp-test-implicit-assign" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use implicit assignment inside a test.  This is generally an accidental omission of the second <code class="language-plaintext highlighter-rouge">=</code> of the logical compare. The following is confusing and prone to error.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></code></pre></figure>

<p>Does the programmer really mean assignment here? Sometimes yes, but usually no. Instead use explicit tests and avoid assignment with an implicit test. The recommended form is to do the assignment before doing the test:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></code></pre></figure>

<p><a href="#cpp-no-register" name="cpp-no-register" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use the register keyword.  Modern compilers will put variables in registers automatically.</p>

<p><a href="#cpp-be-const-correct" name="cpp-be-const-correct" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  be <code class="language-plaintext highlighter-rouge">const</code> correct.  C++ provides the <code class="language-plaintext highlighter-rouge">const</code> keyword to allow passing as parameters objects that cannot change to indicate when a method doesn’t modify its object. Using <code class="language-plaintext highlighter-rouge">const</code> in all the right places is called “const correctness.”</p>

<p><a href="#cpp-use-hashif" name="cpp-use-hashif" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">#if</code> instead of <code class="language-plaintext highlighter-rouge">#ifdef</code>.  For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Bad example</span>
<span class="cp">#ifdef DEBUG
</span>    <span class="n">TemporaryDebuggerBreak</span><span class="p">();</span>
<span class="cp">#endif</span></code></pre></figure>

<p>Someone else might compile the code with turned-of debug info like:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">cc</span> <span class="o">-</span><span class="n">c</span> <span class="n">lurker</span><span class="p">.</span><span class="n">cc</span> <span class="o">-</span><span class="n">DDEBUG</span><span class="o">=</span><span class="mi">0</span></code></pre></figure>

<p>Alway use <code class="language-plaintext highlighter-rouge">#if</code> if you have to use the preprocessor. This works fine, and does the right thing, even if <code class="language-plaintext highlighter-rouge">DEBUG</code> is not defined at all (!)</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Good example</span>
<span class="cp">#if DEBUG
</span>    <span class="n">TemporaryDebuggerBreak</span><span class="p">();</span>
<span class="cp">#endif</span></code></pre></figure>

<p>If you really need to test whether a symbol is defined or not, test it with the <code class="language-plaintext highlighter-rouge">defined()</code> construct, which allows you to add more things later to the conditional without editing text that’s already in the program:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#if !defined(USER_NAME)
</span> <span class="cp">#define USER_NAME "john smith"
#endif</span></code></pre></figure>

<p><a href="#cpp-large-comments" name="cpp-large-comments" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong> 
Use <code class="language-plaintext highlighter-rouge">#if</code> to comment out large code blocks.</p>

<p>Sometimes large blocks of code need to be commented out for testing.  The easiest way to do this is with an <code class="language-plaintext highlighter-rouge">#if 0</code> block:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">Example</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">great</span> <span class="n">looking</span> <span class="n">code</span>

    <span class="c">#if 0
      many lines  of code
    #endif
</span>
    <span class="n">more</span> <span class="n">code</span>
<span class="p">}</span></code></pre></figure>

<p>You can’t use <code class="language-plaintext highlighter-rouge">/**/</code> style comments because comments can’t contain comments and a large block of your code will probably contain connects.</p>

<p>Do not use <code class="language-plaintext highlighter-rouge">#if 0</code> directly.  Instead, use descriptive macro names:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#if NOT_YET_IMPLEMENTED
#if OBSOLETE
#if TEMP_DISABLED</span></code></pre></figure>

<p>Always add a short comment explaining why it is commented out.</p>

<p><a href="#cpp-" name="cpp-" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  put data definitions in header files.  For example, this should be avoided:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cm">/* aheader.hpp */</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></code></pre></figure>

<p>It’s bad magic to have space consuming code silently inserted through the innocent use of header files.  It’s not common practice to define variables in the header file, so it will not occur to developers to look for this when there are problems.  Instead, define the variable once in a source file and then use an <code class="language-plaintext highlighter-rouge">extern</code> statement to reference it in the header file.</p>

<p><a href="#cpp-no-magic-numbers" name="cpp-no-magic-numbers" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use magic numbers. A magic number is a bare naked number used in source code. It’s magic because no-one will know what it means after a while.  This significantly reduces maintainability. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Don't write this.</span>
<span class="k">if</span> <span class="p">(</span><span class="mi">19</span> <span class="o">==</span> <span class="n">foo</span><span class="p">)</span> <span class="p">{</span> <span class="n">RefundLotsMoney</span><span class="p">();</span> <span class="p">}</span><span class="err">}</span>
<span class="k">else</span>           <span class="p">{</span> <span class="n">HappyDaysIKnowWhyIAmHere</span><span class="p">();</span> <span class="p">}</span></code></pre></figure>

<p>Instead of magic numbers, use a real name that means something. You can use <code class="language-plaintext highlighter-rouge">constexpr</code> for names. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">constexpr</span> <span class="kt">int</span> <span class="n">WE_GOOFED</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">WE_GOOFED</span> <span class="o">==</span> <span class="n">foo</span><span class="p">)</span> <span class="p">{</span> <span class="n">RefundLotsMoney</span><span class="p">();</span> <span class="p">}</span>
<span class="k">else</span>                  <span class="p">{</span> <span class="n">HappyDaysIKnowWhyIAmHere</span><span class="p">();</span> <span class="p">}</span></code></pre></figure>

<p><a href="#cpp-check-syscall-errors" name="cpp-check-syscall-errors" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  check every system call for an error return, unless you know you wish to ignore errors. For example, <code class="language-plaintext highlighter-rouge">printf</code> returns an error code but it is rarely relevant. Cast the return to (void) if you do not care about the error code.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">printf</span><span class="p">(</span><span class="s">"The return value is ignored"</span><span class="p">);</span></code></pre></figure>

<p><a href="#cpp-include-errorstr" name="cpp-include-errorstr" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  include the system error text when reporting system error messages.</p>

<h4 id="complexity-management">Complexity Management</h4>

<p><a href="#cpp-init-all-vars" name="cpp-init-all-vars" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  Initialize all variables. Only leave them
uninitialized if there is a real performance reason to do so. Use static and dynamic analysis tools to
check for uninitialized access. You may leave “result” variables uninitialized so long as they clearly do
not escape from the innermost lexical scope.</p>

<p><a href="#cpp-function-size" name="cpp-function-size" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  limit function bodies to one page of code (40 lines, approximately).</p>

<p><a href="#cpp-document-null-bodies" name="cpp-document-null-bodies" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  document null statements.  Always document a null body for a <code class="language-plaintext highlighter-rouge">for</code> or <code class="language-plaintext highlighter-rouge">while</code> statement so that it is clear the null body is intentional.</p>

<p><a href="#cpp-use-explicit-compares" name="cpp-use-explicit-compares" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use explicit comparisons when testing for failure.  Use <code class="language-plaintext highlighter-rouge">if (FAIL != f())</code> rather than <code class="language-plaintext highlighter-rouge">if (f())</code>, even though FAIL may have the value 0 which C considers to be false.  An explicit test will help you out later when somebody decides that a failure return should be -1 instead of 0.</p>

<p>Explicit comparison should be used even if the comparison value will never change.  e.g. <code class="language-plaintext highlighter-rouge">if (!(bufsize % sizeof(int)))</code> should be written as <code class="language-plaintext highlighter-rouge">if (0 == (bufsize % sizeof(int))</code> to reflect the numeric (not boolean) nature of the test.</p>

<p>A frequent trouble spot is using <code class="language-plaintext highlighter-rouge">strcmp</code> to test for string equality.  You should <strong>never</strong> use a default action.  The preferred approach is to use an inline function:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">StringEqual</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">));</span>
<span class="p">}</span></code></pre></figure>

<p>~ Should
<a href="#cpp-embedded-assign" name="cpp-embedded-assign" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  use embedded assignments.  There is a time and a place for embedded assignment statements.  In some constructs, there is no better way to accomplish the results without making the code bulkier and less readable.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">while</span> <span class="p">(</span><span class="n">EOF</span> <span class="o">!=</span> <span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="n">getchar</span><span class="p">()))</span> <span class="p">{</span>
    <span class="cm">/* process the character */</span>
<span class="p">}</span></code></pre></figure>

<p>However, one should consider the tradeoff between increased speed and decreased maintainability that results when embedded assignments are used in artificial places.</p>

<h4 id="templates">Templates</h4>

<p><a href="#cpp-design-naming-templates" name="cpp-design-naming-templates" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name function templates and class templates the same as one would name non-templates.</p>

<p><a href="#cpp-design-naming-templates-parameters" name="cpp-design-naming-templates-parameters" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name template arguments with <strong>PascalCase</strong>.</p>

<h4 id="macros">Macros</h4>

<p><a href="#cpp-design-naming-macros-avoid" name="cpp-design-naming-macros-avoid" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  avoid use of macros. It is acceptable to use macros in the following situations. Use outside of these situations should contact the Azure Review Board.</p>

<ul>
  <li>Platform, compiler, or other environment detection (for example, <code class="language-plaintext highlighter-rouge">_WIN32</code> or <code class="language-plaintext highlighter-rouge">_MSC_VER</code>).</li>
  <li>Emission or suppression of diagnostics.</li>
  <li>Emission or supression of debugging asserts.</li>
  <li>Import declarations. (<code class="language-plaintext highlighter-rouge">__declspec(dllimport)</code>, <code class="language-plaintext highlighter-rouge">__declspec(dllexport)</code>)</li>
</ul>

<blockquote>
  <p>TODO: Need to involve Charlie in how we want to talk about import declarations</p>
</blockquote>

<p><a href="#cpp-design-naming-macros-caps" name="cpp-design-naming-macros-caps" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name macros with <strong>ALL_CAPITAL_SNAKE_CASE</strong>.</p>

<p><a href="#cpp-design-naming-macros-form" name="cpp-design-naming-macros-form" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  prepend macro names with <code class="language-plaintext highlighter-rouge">AZ_&lt;SERVICENAME&gt;</code> to make macros unique.</p>

<p><a href="#cpp-design-naming-macros-functions" name="cpp-design-naming-macros-functions" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use macros where an inline function or function template would achieve the same effect. Macros are not required for code efficiency.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Bad</span>
<span class="cp">##define MAX(a,b) ((a &gt; b) ? a : b)
</span>
<span class="c1">// Good</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">&gt;</span>
<span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kr">inline</span> <span class="n">T</span> <span class="nf">Max</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">,</span> <span class="n">T</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">?</span> <span class="n">x</span> <span class="o">:</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p><a href="#cpp-design-naming-macros-donoevil" name="cpp-design-naming-macros-donoevil" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  change syntax via macro substitution.  It <a href="https://gist.github.com/aras-p/6224951">makes the program unintelligible</a> to all but the perpetrator.</p>

<h4 id="type-safety-recommendations">Type Safety Recommendations</h4>

<p><a href="#cpp-design-logical-rule-of-zero" name="cpp-design-logical-rule-of-zero" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  In class types, implement the “rule of zero”, the “rule of 3”, or the “rule of 5”. That is, of the special member functions, a type should implement exactly one of the following:</p>

<ul>
  <li>No copy constructor, no copy assignment operator, no move constructor, no move assignment operator, or destructor.</li>
  <li>A copy constructor, a copy assignment operator, no move constructor, no move assignment operator, and a destructor.</li>
  <li>A copy constructor, a copy assignment operator, a move constructor, a move assignment operator, and a destructor.</li>
</ul>

<p>This encourages use of resource managing types like std::unique_ptr (which implements the rule of 5) as a compositional tool in more complex data models that implement the rule of zero.</p>

<p><a href="#cpp-design-logical-initialize-all-data" name="cpp-design-logical-initialize-all-data" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide types which are usable when default-initialized. (That is, every constructor must initialize all type invariants, not assume members have default values of 0 or similar.)</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">TypeWithInvariants</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m_member</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">TypeWithInvariants</span><span class="p">()</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">member</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// Good: initializes all parts of the object</span>
    <span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">int</span> <span class="n">Next</span><span class="p">()</span> <span class="k">noexcept</span>  <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_member</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">BadTypeWithInvariants</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m_member</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">BadTypeWithInvariants</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// Bad: Does not initialize all parts of the object</span>
    <span class="kt">int</span> <span class="n">Next</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_member</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">TheCustomerCode</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">TypeWithInvariants</span> <span class="n">a</span><span class="p">{};</span> <span class="c1">// value-initializes a TypeWithInvariants, OK</span>
    <span class="n">TypeWithInvariants</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// default-initializes a TypeWithInvariants, we want this to be OK</span>
    <span class="n">BadTypeWithInvariants</span> <span class="n">c</span><span class="p">{};</span> <span class="c1">// value-initializes a BadTypeWithInvariants, OK</span>
    <span class="n">BadTypeWithInvariants</span> <span class="n">d</span><span class="p">;</span> <span class="c1">// default-initializes a BadTypeWithInvariants, this will trigger</span>
                             <span class="c1">// undefined behavior if anyone calls d.Next()</span>
<span class="p">}</span></code></pre></figure>

<p><a href="#cpp-design-logical-no-getters-or-setters" name="cpp-design-logical-no-getters-or-setters" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  define getters and setters for data transfer objects.  Expose the members directly to users unless you need to enforce some constraints on the data.  For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Good - no restrictions on values</span>
<span class="k">struct</span> <span class="nc">ExampleRequest</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">RetryTimeoutMs</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">Text</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Bad - no restrictions on parameters and access is not idiomatic</span>
<span class="k">class</span> <span class="nc">ExampleRequest</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m_retryTimeoutMs</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">m_text</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">int</span> <span class="n">GetRetryTimeoutMs</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_retryTimeoutMs</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">SetRetryTimeoutMs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">m_retryTimeoutMs</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">GetText</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_text</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">SetText</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">m_text</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Good - type maintains invariants</span>
<span class="k">class</span> <span class="nc">TypeWhichEnforcesDataRequirements</span> <span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">m_size</span><span class="p">;</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">m_data</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">size_t</span> <span class="n">GetSize</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_size</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">AddData</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="n">m_data</span><span class="err">\</span><span class="p">[</span><span class="n">m_size</span><span class="o">++</span><span class="err">\</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Also Good</span>
<span class="k">class</span> <span class="nc">TypeWhichClamps</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m_retryTimeout</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">int</span> <span class="n">GetRetryTimeout</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_retryTimeout</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">SetRetryTimeout</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// clamp i to the range [0, 1000]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="n">m_retryTimeout</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<p><a href="#cpp-design-logical-optimize-position" name="cpp-design-logical-optimize-position" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  declare variables in structures organized by use in a manner that minimizes memory wastage because of compiler alignment issues and size.  All things being equal, use alphabetical ordering.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Bad</span>
<span class="k">struct</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">A</span><span class="p">;</span> <span class="c1">// the compiler will insert 4 bytes of padding after A to align B</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">B</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">C</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">D</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Good</span>
<span class="k">struct</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">A</span><span class="p">;</span> <span class="c1">// C is now stored in that padding</span>
    <span class="kt">int</span> <span class="n">C</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">B</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">D</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p><a href="#cpp-design-logical-enumsareinternal" name="cpp-design-logical-enumsareinternal" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  use enums to model any data sent to the service. Use enums only for types completely internal to the client library. For example, an enum to disable Nagle’s algorithm would be OK, but an enum to ask the service to create a particular entity kind is not.</p>

<h4 id="const-and-reference-members">Const and Reference members</h4>

<p><a href="#cpp-design-logical-no-const-or-reference-members" name="cpp-design-logical-no-const-or-reference-members" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  declare types with const or reference members. Const and reference members artificially make your types non-Regular as they aren’t assignable, and have surprising interactions with C++ Core language rules. For example, many accesses to const or reference members would need to involve use of <code class="language-plaintext highlighter-rouge">std::launder</code> to avoid undefined behavior, but <code class="language-plaintext highlighter-rouge">std::launder</code> was added in C++17, a later version than the SDKs currently target. See C++ Core Working Group <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1116">CWG1116 “Aliasing of union members”</a>, <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1776">CWG1776 “Replacement of class objects containing reference members”</a>, and <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0137r1.html">P0137R1 “Replacement of class objects containing reference members”</a> for additional details.</p>

<p>If you want a type to provide effectively const data except assignment, declare all your member functions const. Const member functions only get a const view of the class’ data.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Bad</span>
<span class="k">class</span> <span class="nc">RetrySettings</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">m_maxRetryCount</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">GetMaxRetryCount</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// intent: disallow m_maxRetryCount = aDifferentValue;</span>
        <span class="k">return</span> <span class="n">m_maxRetryCount</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Good</span>
<span class="k">class</span> <span class="nc">RetrySettings</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m_maxRetryCount</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">GetMaxRetryCount</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
        <span class="c1">// still prohibits m_maxRetryCount = aDifferentValue; without making RetrySettings un-assignable</span>
        <span class="k">return</span> <span class="n">m_maxRetryCount</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<h4 id="integer-sizes">Integer sizes</h4>

<p>The following integer rules are listed in rough priority order. Integer size selections are primarily driven by service future compatibility. For example, just because today a service might have a 2 GiB file size limit does not mean that it will have such a limit forever. We believe 64 bit length limits will be sufficient for sizes an individual program works with for the foreseeable future.</p>

<p><a href="#cpp-design-logical-integer-files" name="cpp-design-logical-integer-files" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  Represent file sizes with <code class="language-plaintext highlighter-rouge">int64_t</code>, even on 32 bit platforms.</p>

<p><a href="#cpp-design-logical-integer-memory-buffers" name="cpp-design-logical-integer-memory-buffers" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  Represent memory buffer sizes with <code class="language-plaintext highlighter-rouge">size_t</code> or <code class="language-plaintext highlighter-rouge">ptrdiff_t</code> as appropriate for the environment. Between the two, choose the type likely to need the fewest conversions in application. For example, we would prefer signed <code class="language-plaintext highlighter-rouge">ptrdiff_t</code> in most cases because signed integers behave like programmers expect more consistently, but the SDK will need to transact with <code class="language-plaintext highlighter-rouge">malloc</code>, <code class="language-plaintext highlighter-rouge">std::vector</code>, and/or <code class="language-plaintext highlighter-rouge">std::string</code> which all speak unsigned <code class="language-plaintext highlighter-rouge">size_t</code>.</p>

<p><a href="#cpp-design-logical-integer-service-values" name="cpp-design-logical-integer-service-values" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  Represent any other integral quantity passed over the wire to a service using <code class="language-plaintext highlighter-rouge">int64_t</code>, even if the service uses a 32 bit constant internally today.</p>

<p><a href="#cpp-design-logical-integer-not-int" name="cpp-design-logical-integer-not-int" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  Use <code class="language-plaintext highlighter-rouge">int</code> under any circumstances, including <code class="language-plaintext highlighter-rouge">for</code> loop indexes. Those should usually use <code class="language-plaintext highlighter-rouge">ptrdiff_t</code> or <code class="language-plaintext highlighter-rouge">size_t</code> under the buffer size rule above.</p>

<p><a href="#cpp-design-logical-integer-otherwise" name="cpp-design-logical-integer-otherwise" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  Use any integer type in the <code class="language-plaintext highlighter-rouge">intN_t</code> or <code class="language-plaintext highlighter-rouge">uintN_t</code> family as appropriate for quantities not enumerated above, such as calculated values internal to the SDK such as retry counts.</p>

<h4 id="secure-functions">Secure functions</h4>

<p><a href="#cpp-design-logical-no-ms-secure-functions" name="cpp-design-logical-no-ms-secure-functions" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  use <a href="https://docs.microsoft.com/cpp/c-runtime-library/security-enhanced-versions-of-crt-functions">Microsoft security enhanced versions of CRT functions</a> to implement APIs that need to be portable across many platforms. Such code is not portable and is not compatible with either the C or C++ Standards. See <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm">arguments against</a>.</p>

<blockquote>
  <p>TODO: Verify with the security team, and what are the alternatives?</p>
</blockquote>

<h4 id="enumerations">Enumerations</h4>

<p><a href="#cpp-design-logical-client-enumerations-no-enums" name="cpp-design-logical-client-enumerations-no-enums" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <code class="language-plaintext highlighter-rouge">enum</code> or <code class="language-plaintext highlighter-rouge">enum class</code> for values shared “over the wire” with a service, to support future compatibility with the service where additional values are added. Such values should be persisted as strings in client data structures instead.</p>

<p><a href="#cpp-design-logical-client-enumerations-enumish-pattern" name="cpp-design-logical-client-enumerations-enumish-pattern" class="requirement" role="img" aria-label="YOU MAY">✔️</a> <strong>YOU MAY</strong>  provide an ‘extensible enum’ pattern for storing service enumerations which provides reasonable constant values. This pattern stores the value as a string but provides public static member fields with the individual values for customer consumption. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &lt;azure/core/strings.hpp&gt; // for Azure::Core::Strings::LocaleInvariantCaseInsensitiveEqual
#include &lt;utility&gt; // for std::move
</span><span class="k">namespace</span> <span class="n">Azure</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">Group</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">Service</span> <span class="p">{</span>

<span class="c1">// an "Extensible Enum" type</span>
<span class="k">class</span> <span class="nc">KeyType</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_value</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="c1">// Provide `explicit` conversion from string or types convertible to string:</span>
    <span class="k">explicit</span> <span class="n">KeyType</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="o">:</span> <span class="n">m_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">explicit</span> <span class="n">KeyType</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="o">:</span> <span class="n">m_value</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="p">{</span> <span class="p">}</span>
    <span class="k">explicit</span> <span class="n">KeyType</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="p">)</span> <span class="o">:</span> <span class="n">m_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="c1">// Provide an equality comparison. If the service treats the enumeration case insensitively,</span>
    <span class="c1">// use LocaleInvariantCaseInsensitiveEqual to prevent differing locale settings from affecting</span>
    <span class="c1">// the SDK's behavior:</span>
    <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">KeyType</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Azure</span><span class="o">::</span><span class="n">Core</span><span class="o">::</span><span class="n">Strings</span><span class="o">::</span><span class="n">LocaleInvariantCaseInsensitiveEqual</span><span class="p">(</span><span class="n">m_value</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="n">m_value</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">KeyType</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="k">this</span> <span class="o">==</span> <span class="n">other</span><span class="p">);</span> <span class="p">}</span>

    <span class="c1">// Provide a "Get" accessor</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">Get</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_value</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">// Provide your example values as static const members</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">KeyType</span> <span class="n">Ec</span><span class="p">;</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">KeyType</span> <span class="n">EcHsm</span><span class="p">;</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">KeyType</span> <span class="n">Rsa</span><span class="p">;</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">KeyType</span> <span class="n">RsaHsm</span><span class="p">;</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">KeyType</span> <span class="n">Oct</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">}}}</span> <span class="c1">// namespace Azure::Group::Service</span>


<span class="c1">// in a .cpp file:</span>
<span class="k">namespace</span> <span class="n">Azure</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">Group</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">Service</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">KeyType</span> <span class="n">KeyType</span><span class="o">::</span><span class="n">Ec</span><span class="p">{</span><span class="s">"EC"</span><span class="p">};</span>
    <span class="k">const</span> <span class="n">KeyType</span> <span class="n">KeyType</span><span class="o">::</span><span class="n">EcHsm</span><span class="p">{</span><span class="s">"EC-HSM"</span><span class="p">};</span>
    <span class="k">const</span> <span class="n">KeyType</span> <span class="n">KeyType</span><span class="o">::</span><span class="n">Rsa</span><span class="p">{</span><span class="s">"RSA"</span><span class="p">};</span>
    <span class="k">const</span> <span class="n">KeyType</span> <span class="n">KeyType</span><span class="o">::</span><span class="n">RsaHsm</span><span class="p">{</span><span class="s">"RSA-HSM"</span><span class="p">};</span>
    <span class="k">const</span> <span class="n">KeyType</span> <span class="n">KeyType</span><span class="o">::</span><span class="n">Oct</span><span class="p">{</span><span class="s">"OCT"</span><span class="p">};</span>
<span class="p">}}}</span> <span class="c1">// namespace Azure::Group::Service</span></code></pre></figure>

<h4 id="physical-design">Physical Design</h4>

<blockquote>
  <p>TODO: Move this to implementation or move the headers discussion from implementation here</p>
</blockquote>

<p><a href="#cpp-design-physical-include-quotes" name="cpp-design-physical-include-quotes" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  include files using quotes (“) for files within the same git repository, and angle brackets (&lt;&gt;) for external dependencies.</p>

<p><a href="#cpp-design-physical-unnamed-namespace" name="cpp-design-physical-unnamed-namespace" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  declare all types that are only used within the same <code class="language-plaintext highlighter-rouge">.cpp</code> file in an unnamed namespace. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">namespace</span> <span class="p">{</span>
<span class="k">struct</span> <span class="nc">HashComputation</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">InternalBookkeeping</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">}</span> <span class="c1">// unnamed namespace</span></code></pre></figure>

<h4 id="class-types-including-unions-and-structs">Class Types (including <code class="language-plaintext highlighter-rouge">union</code>s and <code class="language-plaintext highlighter-rouge">struct</code>s)</h4>

<p>Throughout this section, <em>class types</em> includes types with <em>class-key</em> <code class="language-plaintext highlighter-rouge">struct</code> or <em>class-key</em> <code class="language-plaintext highlighter-rouge">union</code>, consistent with the <a href="http://eel.is/c++draft/class#pre-4">C++ Standard</a>.</p>

<p><a href="#cpp-design-naming-classes" name="cpp-design-naming-classes" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name class types with <strong>PascalCase</strong>.</p>

<p><a href="#cpp-design-naming-classes-public-protected-variables" name="cpp-design-naming-classes-public-protected-variables" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name <code class="language-plaintext highlighter-rouge">public</code> and <code class="language-plaintext highlighter-rouge">protected</code> member variables with <strong>PascalCase</strong>.</p>

<p><a href="#cpp-design-naming-classes-public-variables" name="cpp-design-naming-classes-public-variables" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name <code class="language-plaintext highlighter-rouge">private</code> member variables with an <code class="language-plaintext highlighter-rouge">m_</code> prefix, followed by a <strong>camelCase</strong> name. For example, <code class="language-plaintext highlighter-rouge">m_timeoutMs</code>.</p>

<p><a href="#cpp-design-naming-classes-functions" name="cpp-design-naming-classes-functions" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  name member functions with <strong>PascalCase</strong>, except where the C++ Standard forbids this. For example, <code class="language-plaintext highlighter-rouge">UploadBlob</code>, or <code class="language-plaintext highlighter-rouge">operator[]</code>.</p>

<p><a href="#cpp-design-naming-classes-no-struct-keyword" name="cpp-design-naming-classes-no-struct-keyword" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  declare classes with only public members using <em>class-key</em> <code class="language-plaintext highlighter-rouge">struct</code>.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Good</span>
<span class="k">struct</span> <span class="nc">OnlyPublicMembers</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">Member</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Bad</span>
<span class="k">class</span> <span class="nc">OnlyPublicMembers</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">Member</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p><a href="#cpp-design-naming-classes-typedefs" name="cpp-design-naming-classes-typedefs" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  define class types without using <code class="language-plaintext highlighter-rouge">typedef</code>s. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Good: Uses C++ style class declaration:</span>
<span class="k">struct</span> <span class="nc">IotClient</span> <span class="p">{</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">ApiVersion</span><span class="p">;</span>
    <span class="n">IotClientCredentials</span><span class="o">*</span> <span class="n">Credentials</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">RetryTimeout</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Bad: Uses C-style typedef:</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">IotClient</span> <span class="p">{</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">ApiVersion</span><span class="p">;</span>
    <span class="n">IotClientCredentials</span><span class="o">*</span> <span class="n">Credentials</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">RetryTimeout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AzIotClient</span><span class="p">;</span></code></pre></figure>

<h4 id="tooling">Tooling</h4>

<p>We use a common build and test pipeline to provide for automatic distribution of client libraries.  To support this, we need common tooling.</p>

<p><a href="#cpp-tooling-cmake" name="cpp-tooling-cmake" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <a href="https://CMake.org/">CMake</a> v3.7 for your project build system.</p>

<p>Version 3.7 is the minimum version installed on the Azure Pipelines Microsoft hosted agents
(https://docs.microsoft.com/azure/devops/pipelines/agents/hosted)</p>

<p><a href="#cpp-tooling-cmake-targets" name="cpp-tooling-cmake-targets" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  include the following standard targets:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">build</code> to build the library</li>
  <li><code class="language-plaintext highlighter-rouge">test</code> to run the unit test suite</li>
  <li><code class="language-plaintext highlighter-rouge">docs</code> to generate reference documentation</li>
  <li><code class="language-plaintext highlighter-rouge">all</code> to run all three targets</li>
</ul>

<p>Include other targets as they appear useful during the development process.</p>

<p><a href="#cpp-tooling-cmake-settings1" name="cpp-tooling-cmake-settings1" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use hidden visibility when building dynamic libraries. For CMake:</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">set</span><span class="p">(</span>CMAKE_C_VISIBILITY_PRESET hidden<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>CMAKE_VISIBILITY_INLINES_HIDDEN ON<span class="p">)</span></code></pre></figure>

<p>This allows you to use an export macro to export symbols. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef APPCONF_EXPORT_H
#define APPCONF_EXPORT_H
</span>
<span class="cp">#ifdef APPCONF_STATIC_DEFINE
#  define APPCONF_EXPORT
#  define APPCONF_NO_EXPORT
#else
#  ifndef APPCONF_EXPORT
#    ifdef appconf_EXPORTS
</span>        <span class="cm">/* We are building this library */</span>
<span class="cp">#      define APPCONF_EXPORT __declspec(dllexport)
#    else
</span>        <span class="cm">/* We are using this library */</span>
<span class="cp">#      define APPCONF_EXPORT __declspec(dllimport)
#    endif
#  endif
</span>
<span class="cp">#  ifndef APPCONF_NO_EXPORT
#    define APPCONF_NO_EXPORT
#  endif
#endif
</span>
<span class="cp">#ifndef APPCONF_DEPRECATED
#  define APPCONF_DEPRECATED __declspec(deprecated)
#endif
</span>
<span class="cp">#ifndef APPCONF_DEPRECATED_EXPORT
#  define APPCONF_DEPRECATED_EXPORT APPCONF_EXPORT APPCONF_DEPRECATED
#endif
</span>
<span class="cp">#ifndef APPCONF_DEPRECATED_NO_EXPORT
#  define APPCONF_DEPRECATED_NO_EXPORT APPCONF_NO_EXPORT APPCONF_DEPRECATED
#endif
</span>
<span class="c">#if 0 /* DEFINE_NO_DEPRECATED */
#  ifndef APPCONF_NO_DEPRECATED
#    define APPCONF_NO_DEPRECATED
#  endif
</span><span class="cp">#endif
</span>
<span class="cp">#endif </span><span class="cm">/* APPCONF_EXPORT_H */</span></code></pre></figure>

<p>CMake will automatically generate an appropriate export header:</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">include</span><span class="p">(</span>GenerateExportHeader<span class="p">)</span>
<span class="nf">generate_export_header</span><span class="p">(</span>speech
    EXPORT_FILE_NAME azure/speech_export.hpp<span class="p">)</span></code></pre></figure>

<p><a href="#cpp-tooling-cpp-format" name="cpp-tooling-cpp-format" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use <a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> for formatting, with the following command-line options:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cpp-format <span class="nt">-style</span><span class="o">=</span>file <span class="nt">-i</span> &lt;file&gt; ...</code></pre></figure>

<p>Using <code class="language-plaintext highlighter-rouge">-i</code> does an in-place edit of the files for style.  There is <a href="https://marketplace.visualstudio.com/items?itemName=LLVMExtensions.llvm-toolchain">a Visual Studio extension</a> that binds Ctrl-R Ctrl-F to this operation. Visual Studio 2019 includes this functionality by default.</p>

<p><a href="#cpp-tooling-cmake-docs" name="cpp-tooling-cmake-docs" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  generate API documentation with <code class="language-plaintext highlighter-rouge">doxygen</code>.
For example in CMake:</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">find_package</span><span class="p">(</span>Doxygen REQUIRED doxygen<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_GENERATE_HTML YES<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_GENERATE_XML YES<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_OPTIMIZE_OUTPUT_FOR_C YES<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_EXTRACT_PACKAGE YES<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_SIMPLE_STRUCTS YES<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span>DOXYGEN_TYPEDEF_HIDES_STRUCT NO<span class="p">)</span>

<span class="nf">doxygen_add_docs</span><span class="p">(</span>doxygen
	<span class="si">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="si">}</span>/inc
	<span class="si">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="si">}</span>/src
	<span class="si">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="si">}</span>/doc
	COMMENT <span class="s2">"generate docs"</span><span class="p">)</span></code></pre></figure>

<p>Notice that:</p>
<ul>
  <li>We use <code class="language-plaintext highlighter-rouge">find_package()</code> to find doxygen</li>
  <li>We use the <code class="language-plaintext highlighter-rouge">DOXYGEN_&lt;PREF&gt;</code> CMake variables instead of writing your own <code class="language-plaintext highlighter-rouge">doxyfile</code>.</li>
  <li>We set <code class="language-plaintext highlighter-rouge">OPTIMIZE_OUTPUT_FOR_C</code> in order to get more C appropriate output.</li>
  <li>We use <code class="language-plaintext highlighter-rouge">doxygen_add_docs</code> to add the target, this will generate a <code class="language-plaintext highlighter-rouge">doxyfile</code> for you.</li>
</ul>

<p><a href="#cpp-tooling-cmake-samples" name="cpp-tooling-cmake-samples" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  provide a CMake option of the form <code class="language-plaintext highlighter-rouge">&lt;SDK_NAME&gt;_BUILD_SAMPLES</code> that includes all samples in the build.  For example:</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">if</span><span class="p">(</span>AZURE_APPCONF_BUILD_SAMPLES<span class="p">)</span>
    <span class="nb">add_subdirectory</span><span class="p">(</span>samples<span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span></code></pre></figure>

<p><a href="#cpp-tooling-cmake-no-samples-by-default" name="cpp-tooling-cmake-no-samples-by-default" class="requirement" role="img" aria-label="DO NOT">⛔️</a> <strong>DO NOT</strong>  install samples by default.</p>

<h2 id="supported-platforms">Supported platforms</h2>

<p><a href="#cpp-platform-min" name="cpp-platform-min" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  support the following platforms and associated compilers when implementing your client library.</p>

<h3 id="windows">Windows</h3>

<table>
  <thead>
    <tr>
      <th>Operating System</th>
      <th>Version</th>
      <th>Architectures</th>
      <th>Compiler Version</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Windows Client</td>
      <td>7 SP1+, 8.1</td>
      <td>x64, x86</td>
      <td>MSVC 14.16.x, MSVC 14.20x</td>
      <td> </td>
    </tr>
    <tr>
      <td>Windows 10 Client</td>
      <td>Version 1607+</td>
      <td>x64, x86, ARM</td>
      <td>MSVC 14.16.x, MSVC 14.20x</td>
      <td> </td>
    </tr>
    <tr>
      <td>Windows 10 Client</td>
      <td>Version 1909+</td>
      <td>ARM64</td>
      <td>MSVC 14.20x</td>
      <td> </td>
    </tr>
    <tr>
      <td>Nano Server</td>
      <td>Version 1803+</td>
      <td>x64, ARM32</td>
      <td>MSVC 14.16.x, MSVC 14.20x</td>
      <td> </td>
    </tr>
    <tr>
      <td>Windows Server</td>
      <td>2012 R2+</td>
      <td>x64, x86</td>
      <td>MSVC 14.16.x, MSVC 14.20x</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="mac">Mac</h3>

<table>
  <thead>
    <tr>
      <th>Operating System</th>
      <th>Version</th>
      <th>Architectures</th>
      <th>Compiler Version</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>macOS</td>
      <td>10.13+</td>
      <td>x64</td>
      <td>XCode 9.4.1</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="linux">Linux</h4>

<table>
  <thead>
    <tr>
      <th>Operating System</th>
      <th>Version</th>
      <th>Architectures</th>
      <th>Compiler Version</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Red Hat Enterprise Linux <br /> CentOS <br /> Oracle Linux</td>
      <td>7+</td>
      <td>x64</td>
      <td>gcc-4.8</td>
      <td><a href="https://access.redhat.com/support/policy/updates/errata/">Red Hat lifecycle</a> <br /> <a href="https://www.centos.org/centos-linux-eol/">CentOS lifecycle</a> <br /> <a href="http://www.oracle.com/us/support/library/elsp-lifetime-069338.pdf">Oracle Linux lifecycle</a></td>
    </tr>
    <tr>
      <td>Debian</td>
      <td>9+</td>
      <td>x64</td>
      <td>gcc-6.3</td>
      <td><a href="https://wiki.debian.org/DebianReleases">Debian lifecycle</a></td>
    </tr>
    <tr>
      <td>Ubuntu</td>
      <td>18.04, 16.04</td>
      <td>x64</td>
      <td>gcc-7.3</td>
      <td><a href="https://wiki.ubuntu.com/Releases">Ubuntu lifecycle</a></td>
    </tr>
    <tr>
      <td>Linux Mint</td>
      <td>18+</td>
      <td>x64</td>
      <td>gcc-7.3</td>
      <td><a href="https://www.linuxmint.com/download_all.php">Linux Mint lifecycle</a></td>
    </tr>
    <tr>
      <td>openSUSE</td>
      <td>15+</td>
      <td>x64</td>
      <td>gcc-7.5</td>
      <td><a href="https://en.opensuse.org/Lifetime">OpenSUSE lifecycle</a></td>
    </tr>
    <tr>
      <td>SUSE Enterprise Linux (SLES)</td>
      <td>12 SP2+</td>
      <td>x64</td>
      <td>gcc-4.8</td>
      <td><a href="https://www.suse.com/lifecycle/">SUSE lifecycle</a></td>
    </tr>
  </tbody>
</table>

<p><a href="#cpp-platform" name="cpp-platform" class="requirement" role="img" aria-label="YOU SHOULD">☑️</a> <strong>YOU SHOULD</strong>  support the following additional platforms and associated compilers when implementing your client library.</p>

<p><a href="#cpp-cpp-extensions" name="cpp-cpp-extensions" class="requirement" role="img" aria-label="YOU SHOULD NOT">⚠️</a> <strong>YOU SHOULD NOT</strong>  use compiler extensions.  Examples of extensions to avoid include:</p>

<ul>
  <li><a href="https://docs.microsoft.com/cpp/build/reference/microsoft-extensions-to-c-and-cpp">MSVC compiler extensions</a></li>
  <li><a href="https://clang.llvm.org/docs/LanguageExtensions.html">clang language extensions</a></li>
  <li><a href="https://gcc.gnu.org/extensions.html">GNU C compiler extensions</a></li>
</ul>

<p>Use the appropriate options for each compiler to prevent the use of such extensions.</p>

<p><a href="#cpp-cpp-options" name="cpp-cpp-options" class="requirement" role="img" aria-label="DO">✅</a> <strong>DO</strong>  use compiler flags to identify warnings:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Compiler</th>
      <th>Compiler Flags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">gcc</td>
      <td><code class="language-plaintext highlighter-rouge">-Wall -Wextra</code></td>
    </tr>
    <tr>
      <td style="text-align: left">cpp and XCode</td>
      <td><code class="language-plaintext highlighter-rouge">-Wall -Wextra</code></td>
    </tr>
    <tr>
      <td style="text-align: left">MSVC</td>
      <td><code class="language-plaintext highlighter-rouge">/W4</code></td>
    </tr>
  </tbody>
</table>


        
            <div class="tags">
                
            </div>
        
            

        </div>
    </div>
</div>
                </div>
                <!-- /.row -->

            </div>
            <!-- /.container -->
        </div>
        <!-- /#main -->
    </div>
    
    <!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-46"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62780441-46');
</script>

<!-- OLD SCRIPT
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-62780441-46','auto');ga('require','displayfeatures');ga('send','pageview');</script>
-->

    
    
    <!-- the app_insights gets auto inserted from the config file -->
<!-- For other configuration elements, see https://docs.microsoft.com/azure/azure-monitor/app/javascript#snippet-based-setup -->

<script type="text/javascript">
var sdkInstance="appInsightsSDK";window[sdkInstance]="appInsights";var aiName=window[sdkInstance],aisdk=window[aiName]||function(n){var o={config:n,initialize:!0},t=document,e=window,i="script";setTimeout(function(){var e=t.createElement(i);e.src=n.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",t.getElementsByTagName(i)[0].parentNode.appendChild(e)});try{o.cookie=t.cookie}catch(e){}function a(n){o[n]=function(){var e=arguments;o.queue.push(function(){o[n].apply(o,e)})}}o.queue=[],o.version=2;for(var s=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];s.length;)a("track"+s.pop());var r="Track",c=r+"Page";a("start"+c),a("stop"+c);var u=r+"Event";if(a("start"+u),a("stop"+u),a("addTelemetryInitializer"),a("setAuthenticatedUserContext"),a("clearAuthenticatedUserContext"),a("flush"),o.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},!(!0===n.disableExceptionTracking||n.extensionConfig&&n.extensionConfig.ApplicationInsightsAnalytics&&!0===n.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking)){a("_"+(s="onerror"));var p=e[s];e[s]=function(e,n,t,i,a){var r=p&&p(e,n,t,i,a);return!0!==r&&o["_"+s]({message:e,url:n,lineNumber:t,columnNumber:i,error:a}),r},n.autoExceptionInstrumented=!0}return o}(
{
    instrumentationKey:"5e03f19a-f5b4-4620-97d5-35707cec7fcb",
    autoTrackPageVisitTime:true,
    isCookieUseDisabled:true
}
);(window[aiName]=aisdk).queue&&0===aisdk.queue.length&&aisdk.trackPageView({});
</script>

    
</body>
<hr class="shaded"/>
<footer>
    <div class="container-fluid">
        <div class="row footer">
            <div class="col-lg-6 text-left pb-1">
           &copy;2023 Microsoft Azure. All rights reserved. 
 Site last generated: Sep 20, 2023
            </div>
            <div class="col-lg-6 text-right">
                <p><img src="/azure-sdk/images/company_logo.png" width="100px" alt="Microsoft logo"/></p>
            </div>
        </div>
    </div>
</footer>

</html>
